{"version":3,"mappings":"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","names":["Utils","ExtensionStoreService","discountCampaignService","extensionService","variants","first","second","firstPrice","secondPrice","variant","perMonth","price","recommendedVariant","Criteria","ExtensionStoreDataService","httpClient","loginService","apiEndpoint","context","search","criteria","data","extensions","name","extension","id","page","limit","headers","rating","category","term","sorting","filter","filters","field","value","ExtensionLicenseService","extensionId","variantId","payload","__vitePreload","route","next","currentRoute","ApiService","InAppPurchasesService","technicalName","feature","taxRate","positions","InAppPurchases"],"ignoreList":[],"sources":["../../../app/administration/src/module/sw-extension/index.ts","../../../app/administration/src/module/sw-extension-store/service/extension-store.service.ts","../../../app/administration/src/module/sw-extension-store/service/extension-store-data.service.js","../../../app/administration/src/module/sw-extension-store/service/extension-store-licenses.service.js","../../../app/administration/src/module/sw-extension-store/index.js","../../../app/administration/src/module/sw-dashboard/index.js","../../../app/administration/src/module/sw-in-app-purchases/service/in-app-purchases.service.ts","../../../app/administration/src/module/sw-in-app-purchases/index.ts"],"sourcesContent":["Shopware.Component.override('sw-extension-card-base', () => import('./component/sw-extension-card-base'));\n","import type { ShopwareDiscountCampaignService } from 'src/app/service/discount-campaign.service';\nimport type { ExtensionVariant } from 'src/module/sw-extension/service/extension-store-action.service';\nimport type ShopwareExtensionService from 'src/module/sw-extension/service/shopware-extension.service';\n\nconst { Utils } = Shopware;\n\nexport default class ExtensionStoreService {\n    public readonly EXTENSION_RENT_DURATIONS = {\n        MONTHLY: 1,\n        YEARLY: 12,\n    };\n\n    constructor(\n        private readonly discountCampaignService: ShopwareDiscountCampaignService,\n        private readonly extensionService: ShopwareExtensionService,\n    ) {\n    }\n\n    public orderVariantsByPricePerMonth(variants: ExtensionVariant[]): ExtensionVariant[] {\n        return variants.toSorted((first, second) => {\n            const firstPrice = this.getPriceFromVariant(first, true);\n            const secondPrice = this.getPriceFromVariant(second, true);\n\n            return firstPrice - secondPrice;\n        });\n    }\n\n    public orderVariantsByRentDuration(variants: ExtensionVariant[]): ExtensionVariant[] {\n        if (variants.length === 1) {\n            return variants;\n        }\n\n        return variants.toSorted((first, second) => {\n            if (!first.duration || !second.duration) {\n                return 0;\n            }\n\n            return first.duration - second.duration;\n        });\n    }\n\n    public getCalculatedPrice(variant: ExtensionVariant): string {\n        const perMonth = this.isVariantOfTypeRent(variant);\n        const price = this.getPriceFromVariant(variant, perMonth);\n\n        return Utils.format.currency(price, 'EUR', 2);\n    }\n\n    public getCalculatedPriceSnippet(variants: ExtensionVariant[]): string {\n        if (variants.length > 1) {\n            return 'sw-extension-store.general.labelFromPricePerMonth';\n        }\n\n        const recommendedVariant = this.getRecommendedVariant(variants);\n\n        return this.getPriceSnippetForVariant(recommendedVariant);\n    }\n\n    public getPriceSnippetForVariant(variant: ExtensionVariant): string {\n        if (this.isVariantOfTypeBuy(variant)) {\n            return 'sw-extension-store.general.labelPriceOneTime';\n        }\n\n        return 'sw-extension-store.general.labelPricePerMonth';\n    }\n\n    public getPriceFromVariant(variant: ExtensionVariant, perMonth = false): number {\n        if (this.isVariantDiscounted(variant)) {\n            return perMonth ? variant?.discountCampaign.discountedPricePerMonth : variant?.discountCampaign.discountedPrice;\n        }\n\n        let price = 0;\n\n        if (perMonth && (variant as ExtensionVariant & { netPricePerMonth: number })?.netPricePerMonth) {\n            price = (variant as ExtensionVariant & { netPricePerMonth: number }).netPricePerMonth;\n        } else if (variant?.netPrice) {\n            price = variant.netPrice;\n        }\n\n        return price;\n    }\n\n    public getRecommendedVariant(variants: ExtensionVariant[]): ExtensionVariant {\n        if (variants.length === 1) {\n            return variants[0];\n        }\n\n        return this.orderVariantsByPricePerMonth(variants)[0];\n    }\n\n    public isExtensionDiscounted(variants: ExtensionVariant[]): boolean {\n        return variants.some((variant) => this.isVariantDiscounted(variant));\n    }\n\n    public isVariantDiscounted(variant: ExtensionVariant): variant is ExtensionVariant & {\n        discountCampaign: {\n            discountedPrice: number;\n            discountedPricePerMonth: number;\n        };\n    } {\n        if (\n            !variant ||\n            !variant.discountCampaign ||\n            typeof variant.discountCampaign.discountedPrice !== 'number' ||\n            variant.discountCampaign.discountedPrice === variant.netPrice\n        ) {\n            return false;\n        }\n\n        return this.discountCampaignService.isDiscountCampaignActive(variant.discountCampaign);\n    }\n\n    public isVariantOfTypeBuy(variant: ExtensionVariant): boolean {\n        return variant?.type === this.extensionService.EXTENSION_VARIANT_TYPES.BUY;\n    }\n\n    public isVariantOfTypeFree(variant: ExtensionVariant): boolean {\n        return variant?.type === this.extensionService.EXTENSION_VARIANT_TYPES.FREE;\n    }\n\n    public isVariantOfTypeRent(variant: ExtensionVariant): boolean {\n        return variant?.type === this.extensionService.EXTENSION_VARIANT_TYPES.RENT;\n    }\n\n    public isRentDurationMonthly(variant: ExtensionVariant): boolean {\n        return variant?.duration === this.EXTENSION_RENT_DURATIONS.MONTHLY;\n    }\n\n    public isRentDurationYearly(variant: ExtensionVariant): boolean {\n        return variant?.duration === this.EXTENSION_RENT_DURATIONS.YEARLY;\n    }\n}\n","const { Criteria } = Shopware.Data;\n\nexport default class ExtensionStoreDataService extends Shopware.Classes.ApiService {\n    constructor(httpClient, loginService, apiEndpoint = 'extension-store') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'extensionStoreDataService';\n    }\n\n    async listingFilters(context) {\n        const res = await this.httpClient.get(`_action/${this.apiEndpoint}/store-filters`, {\n            headers: this.basicHeaders(context),\n            version: 3,\n        });\n\n        return res.data;\n    }\n\n    async getExtensionList(search, context) {\n        const criteria = this._getCriteriaFromSearch(search);\n\n        const { data } = await this.httpClient.post(`_action/${this.apiEndpoint}/list`, criteria.parse(), {\n            headers: this.basicHeaders(context),\n            version: 3,\n        });\n\n        const extensions = [];\n        extensions.total = data.meta.total;\n        extensions.push(...data.data);\n\n        return extensions;\n    }\n\n    /**\n     * @returns {Promise<Extension|null>}\n     */\n    async getExtensionByName(name, context) {\n        return this.getExtensionList({ term: name }, context).then(\n            (extensions) => extensions.find((extension) => extension.name === name) ?? null,\n        );\n    }\n\n    async getDetail(id, context) {\n        const { data } = await this.httpClient.get(`_action/${this.apiEndpoint}/detail/${id}`, {\n            headers: this.basicHeaders(context),\n            version: 3,\n        });\n\n        return data;\n    }\n\n    async getReviews(page, limit, id) {\n        const criteria = new Criteria(\n            page,\n            limit,\n        );\n\n        const { data } = await this.httpClient.get(`_action/${this.apiEndpoint}/${id}/reviews`, {\n            headers: this.basicHeaders(),\n            params: criteria.parse(),\n            version: 3,\n        });\n\n        return data;\n    }\n\n    basicHeaders(context = null) {\n        const headers = {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            Authorization: `Bearer ${this.loginService.getToken()}`,\n        };\n\n        if (context && context.languageId) {\n            headers['sw-language-id'] = context.languageId;\n        }\n\n        return headers;\n    }\n\n    _getCriteriaFromSearch({\n        page = 1,\n        limit = 25,\n        rating = null,\n        category = null,\n        term = null,\n        sorting = null,\n        filter = {},\n    } = {}) {\n        const criteria = new Criteria(\n            page,\n            limit,\n        );\n\n        if (term) {\n            criteria.setTerm(term);\n        }\n\n        const filters = [];\n\n        if (rating !== null) {\n            filters.push(Criteria.equals('rating', rating));\n        }\n\n        Object.entries(filter).forEach(([field, value]) => {\n            filters.push(Criteria.equals(field, value));\n        });\n\n        if (category !== null) {\n            filters.push(Criteria.equals('category', category));\n        }\n\n        if (filters.length > 0) {\n            criteria.addFilter(Criteria.multi('AND', filters));\n        }\n\n        if (sorting) {\n            criteria.resetSorting();\n            criteria.addSorting(sorting);\n        }\n\n        return criteria;\n    }\n}\n","export default class ExtensionLicenseService extends Shopware.Classes.ApiService {\n    constructor(httpClient, loginService, apiEndpoint = 'extension-store') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'extensionStoreLicensesService';\n    }\n\n    newCart(extensionId, variantId) {\n        return this.httpClient.post(\n            `/_action/${this.apiEndpoint}/cart/new`,\n            { extensionId, variantId },\n            { headers: this.basicHeaders(), version: 3 },\n        );\n    }\n\n    orderCart(payload) {\n        return this.httpClient.post(\n            `/_action/${this.apiEndpoint}/cart/order`,\n            payload,\n            { headers: this.basicHeaders(), version: 3 },\n        );\n    }\n\n    getPaymentMeans() {\n        return this.httpClient.get(\n            `/_action/${this.apiEndpoint}/cart/payment-means`,\n            { headers: this.basicHeaders(), version: 3 },\n        );\n    }\n\n    basicHeaders(context = null) {\n        const headers = {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            Authorization: `Bearer ${this.loginService.getToken()}`,\n        };\n\n        if (context && context.languageId) {\n            headers['sw-language-id'] = context.languageId;\n        }\n\n        return headers;\n    }\n}\n","import ExtensionStoreService from './service/extension-store.service';\nimport ExtensionStoreDataService from './service/extension-store-data.service';\nimport ExtensionLicenseService from './service/extension-store-licenses.service';\n\n\nShopware.Component.register('sw-extension-store-index', () => import('./page/sw-extension-store-index'));\nShopware.Component.register('sw-extension-store-listing', () => import('./page/sw-extension-store-listing'));\nShopware.Component.register('sw-extension-store-detail', () => import('./page/sw-extension-store-detail'));\nShopware.Component.register('sw-extension-store-slider', () => import('./component/sw-extension-store-slider'));\nShopware.Component.register('sw-extension-store-listing-filter', () => import('./component/sw-extension-store-listing-filter'));\nShopware.Component.register('sw-extension-buy-modal', () => import('./component/sw-extension-buy-modal'));\nShopware.Component.register('sw-extension-listing-card', () => import('./component/sw-extension-listing-card'));\nShopware.Component.register('sw-extension-store-update-warning', () => import('./component/sw-extension-store-update-warning'));\nShopware.Component.register('sw-extension-label', () => import('./component/sw-extension-store-label'));\nShopware.Component.register('sw-extension-type-label', () => import('./component/sw-extension-store-type-label'));\nShopware.Component.register('sw-extension-store-label-display', () => import('./component/sw-extension-store-label-display'));\nShopware.Component.register('sw-extension-store-error-card', () => import('./component/sw-extension-store-error-card'));\nShopware.Component.register('sw-extension-store-accessibility', () => import('./component/sw-extension-store-accessibility'));\nShopware.Component.register('sw-extension-store-statistics-promotion', () => import('./component/sw-extension-store-statistics-promotion'));\nShopware.Component.register('sw-extension-store-in-app-purchases-listing-modal', () => import('./component/sw-extension-store-in-app-purchases-listing-modal'));\n\n\nShopware.Application.addServiceProvider('extensionStoreService', () => {\n    return new ExtensionStoreService(\n        Shopware.Service('shopwareDiscountCampaignService'),\n        Shopware.Service('shopwareExtensionService'),\n    );\n});\n\nShopware.Application.addServiceProvider('extensionStoreDataService', () => {\n    return new ExtensionStoreDataService(\n        Shopware.Application.getContainer('init').httpClient,\n        Shopware.Service('loginService'),\n    );\n});\n\nShopware.Application.addServiceProvider('extensionStoreLicensesService', () => {\n    return new ExtensionLicenseService(\n        Shopware.Application.getContainer('init').httpClient,\n        Shopware.Service('loginService'),\n    );\n});\n\nShopware.Module.register('sw-extension-store', {\n    title: 'sw-extension-store.general.title',\n    name: 'sw-extension-store.general.title',\n    routePrefixName: 'sw.extension',\n    routePrefixPath: 'sw/extension',\n    routes: {\n        store: {\n            path: 'store',\n            redirect: {\n                name: 'sw.extension.store.listing',\n            },\n            meta: {\n                privilege: 'system.extension_store',\n            },\n            component: 'sw-extension-store-index',\n            children: {\n                listing: {\n                    path: 'listing',\n                    component: 'sw-extension-store-listing',\n                    redirect: {\n                        name: 'sw.extension.store.listing.app',\n                    },\n                    meta: {\n                        privilege: 'system.extension_store',\n                    },\n                    children: {\n                        app: {\n                            path: 'app',\n                            component: 'sw-extension-store-listing',\n                            propsData: {\n                                isTheme: false,\n                            },\n                            meta: {\n                                privilege: 'system.extension_store',\n                            },\n                        },\n                        theme: {\n                            path: 'theme',\n                            component: 'sw-extension-store-listing',\n                            propsData: {\n                                isTheme: true,\n                            },\n                            meta: {\n                                privilege: 'system.extension_store',\n                            },\n                        },\n                    },\n                },\n            },\n        },\n        'store.detail': {\n            component: 'sw-extension-store-detail',\n            path: 'store/detail/:id',\n            meta: {\n                parentPath: 'sw.extension.store',\n                privilege: 'system.extension_store',\n            },\n            props: {\n                default: (route) => {\n                    return { id: route.params.id };\n                },\n            },\n        },\n    },\n\n    /**\n     * Add routeMiddleware to add a redirect to the landing page\n     */\n    routeMiddleware(next, currentRoute) {\n        if (currentRoute.name === 'sw.extension.store.landing-page') {\n            currentRoute.redirect = {\n                name: 'sw.extension.store.listing',\n            };\n        }\n\n        next(currentRoute);\n    },\n});\n","Shopware.Component.override('sw-dashboard-index', () => import('./page/sw-dashboard-index'));\nShopware.Component.register('sw-dashboard-statistics-promotion-card', () => import('./component/sw-dashboard-statistics-promotion-card'));\n","import type * as IAP from 'SwagExtensionStore/module/sw-in-app-purchases/types';\nimport type { LoginService } from 'src/core/service/login.service';\nimport type { AxiosInstance } from 'axios';\n\nconst { ApiService } = Shopware.Classes;\n\nexport default class InAppPurchasesService extends ApiService {\n    constructor(httpClient: AxiosInstance, loginService: LoginService, apiEndpoint = 'in-app-purchases') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'inAppPurchasesService';\n    }\n\n    async getExtension(technicalName: string) {\n        return this.httpClient.get<IAP.Extension>(\n            `_action/${this.apiEndpoint}/${technicalName}/details`,\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n\n    async createCart(name: string, feature: string, variant: string) {\n        return this.httpClient.post<IAP.InAppPurchaseCart>(\n            `_action/${this.apiEndpoint}/cart/new`,\n            { name, feature, variant },\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n\n    async orderCart(taxRate: number, positions: IAP.InAppPurchaseCartPosition[], name: string) {\n        return this.httpClient.post<IAP.InAppPurchase>(\n            `_action/${this.apiEndpoint}/cart/order`,\n            { taxRate, positions, name },\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n\n    async getAvailablePurchases(name: string) {\n        return this.httpClient.get<IAP.InAppPurchaseCollection>(\n            `_action/${this.apiEndpoint}/${name}/list`,\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n\n    async getPriceModels(name: string, feature:string) {\n        return this.httpClient.get<IAP.InAppPurchase>(\n            `_action/${this.apiEndpoint}/${name}/${feature}`,\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n\n    async refreshInAppPurchases() {\n        return this.httpClient.get<never>(\n            `_action/${this.apiEndpoint}/refresh`,\n            { headers: this.getBasicHeaders() },\n        ).then(ApiService.handleResponse.bind(this));\n    }\n}\n","import InAppPurchases from './service/in-app-purchases.service';\n\nShopware.Component.override(\n    'sw-in-app-purchase-checkout',\n    () => import('./component/sw-in-app-purchase-checkout'),\n);\nShopware.Component.register(\n    'sw-in-app-purchase-checkout-button',\n    () => import('./component/sw-in-app-purchase-checkout-button'),\n);\nShopware.Component.register(\n    'sw-in-app-purchase-checkout-overview',\n    () => import('./component/sw-in-app-purchase-checkout-overview'),\n);\nShopware.Component.register(\n    'sw-in-app-purchase-checkout-state',\n    () => import('./component/sw-in-app-purchase-checkout-state'),\n);\nShopware.Component.register(\n    'sw-in-app-purchase-checkout-subscription-change',\n    () => import('./component/sw-in-app-purchase-checkout-subscription-change'),\n);\nShopware.Component.register(\n    'sw-in-app-purchase-price-box',\n    () => import('./component/sw-in-app-purchase-price-box'),\n);\n\nShopware.Application.addServiceProvider('inAppPurchasesService', () => {\n    return new InAppPurchases(\n        Shopware.Application.getContainer('init').httpClient,\n        Shopware.Service('loginService'),\n    );\n});\n"],"file":"assets/swag-extension-store-uL8m4Cxe.js"}