{"version":3,"file":"index-Dd9Kp9dI.js","sources":["../../../app/administration/src/module/sw-extension-store/component/sw-extension-buy-modal/sw-extension-buy-modal.html.twig","../../../app/administration/src/module/sw-extension-store/component/sw-extension-buy-modal/index.js"],"sourcesContent":["{% block sw_extension_buy_modal %}\n<sw-modal\n    class=\"sw-extension-buy-modal\"\n    :title=\"$t('sw-extension-store.component.sw-extension-buy-modal.title')\"\n    size=\"600px\"\n    :is-loading=\"isLoading\"\n    @modal-close=\"emitClose\"\n>\n\n    {% block sw_extension_buy_modal_content %}\n        <template v-if=\"checkoutStep === checkoutSteps.SUCCESS\">\n            {% block sw_extension_buy_modal_adding_success_content %}\n                <sw-extension-adding-success\n                    @close=\"emitClose\"\n                />\n            {% endblock %}\n        </template>\n\n        <template v-else-if=\"checkoutStep === checkoutSteps.FAILED\">\n            {% block sw_extension_buy_modal_adding_failed_content %}\n                <sw-extension-adding-failed\n                    :extension-name=\"extension.name\"\n                    :title=\"checkoutError && checkoutError.title\"\n                    :detail=\"checkoutError && checkoutError.detail\"\n                    :documentation-link=\"checkoutErrorDocumentationLink\"\n                    @close=\"emitClose\"\n                />\n            {% endblock %}\n        </template>\n\n        <template v-else>\n            {% block sw_extension_buy_modal_content_not_installed %}\n                {% block sw_extension_buy_modal_variant_selection %}\n                    <div class=\"sw-extension-buy-modal__variants-selection\">\n                        {% block sw_extension_buy_modal_variant_selection_content %}\n                            {% block sw_extension_buy_modal_variant_selection_extension_preview %}\n                                <div class=\"sw-extension-buy-modal__extension-summary\">\n                                    {% block sw_extension_buy_modal_variant_selection_extension_preview_content %}\n                                        {% block sw_extension_buy_modal_variant_selection_extension_icon %}\n                                            <sw-extension-icon :src=\"extension.icon\" />\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_name %}\n                                            <h4 class=\"sw-extension-buy-modal__extension-summary-name\">\n                                                {{ extension.label }}\n                                            </h4>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_trial_phase %}\n                                            <p\n                                                v-if=\"isVariantOfTypeRent(selectedVariant) && firstMonthFree\"\n                                                class=\"sw-extension-buy-modal__extension-summary-trial-phase\"\n                                            >\n                                                <mt-icon name=\"regular-check-circle\" size=\"16px\" />\n                                                {{ $t('sw-extension-store.buy-modal.rent.freeTrial') }}\n                                            </p>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_disclaimer %}\n                                            <p\n                                                v-if=\"isVariantOfTypeRent(selectedVariant)\"\n                                                class=\"sw-extension-buy-modal__extension-summary-disclaimer\"\n                                            >\n                                                {{ $t('sw-extension-store.buy-modal.rent.disclaimer') }}\n                                            </p>\n                                        {% endblock %}\n                                    {% endblock %}\n                                </div>\n                            {% endblock %}\n\n                            {% block sw_extension_buy_modal_variant_selection_variant_list %}\n                                <ul>\n                                    {% block sw_extension_buy_modal_variant_selection_variant_list_item %}\n                                        <li\n                                            v-for=\"variant in recommendedVariants\"\n                                            :key=\"variant.id\"\n                                            class=\"sw-extension-buy-modal__variants-card\"\n                                            :class=\"variantCardClass(variant)\"\n                                            @click=\"onChangeVariantSelection(variant)\"\n                                        >\n\n                                            {% block sw_extension_buy_modal_variant_selection_variant_list_item_radio_button %}\n                                                <div class=\"sw-extension-buy-modal__variants-card-input sw-field--radio\">\n                                                    <div class=\"sw-field__radio-input\">\n                                                        <input\n                                                            :id=\"`sw-extension-buy-modal__variant-${variant.type}`\"\n                                                            type=\"radio\"\n                                                            name=\"variant-selection\"\n                                                            :value=\"variant.id\"\n                                                            :checked=\"variant.id === selectedVariantId\"\n                                                            :disabled=\"isLoading || recommendedVariants.length <= 1\"\n                                                        >\n                                                        <div class=\"sw-field__radio-state\" />\n                                                    </div>\n                                                </div>\n                                            {% endblock %}\n\n                                            {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label %}\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_description %}\n                                                    <label\n                                                        :for=\"`sw-extension-buy-modal__variant-${variant.type}`\"\n                                                        class=\"sw-extension-buy-modal__variant-description\"\n                                                    >\n                                                        {{ variant.label || variant.type }}\n                                                    </label>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent %}\n                                                    <div\n                                                        v-if=\"isVariantOfTypeRent(variant)\"\n                                                        class=\"sw-extension-buy-modal__rent\"\n                                                        :class=\"getVariantClasses(variant)\"\n                                                    >\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_prices %}\n                                                            <div>\n                                                                <i18n-t :keypath=\"getVariantPriceSnippet(variant)\" tag=\"span\">\n                                                                    <template #price>\n                                                                        <strong>{{ getVariantPrice(variant) }}*</strong>\n                                                                    </template>\n                                                                </i18n-t>\n                                                            </div>\n                                                        {% endblock %}\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_discount_information %}\n                                                            <div v-if=\"hasActiveDiscount(variant)\">\n                                                                <i18n-t :keypath=\"getVariantDiscountInformationSnippet(variant)\" tag=\"span\">\n                                                                    <template #months>\n                                                                        {{ variant.discountCampaign.discountAppliesForMonths }}\n                                                                    </template>\n                                                                    <template #price>\n                                                                        {{ renderPrice(variant.netPrice) }}*\n                                                                    </template>\n                                                                </i18n-t>\n                                                            </div>\n                                                        {% endblock %}\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_additional_information %}\n                                                            <div>\n                                                                <span v-if=\"isRentDurationYearly(variant)\">\n                                                                    <i18n-t keypath=\"sw-extension-store.general.labelPricePerYear\" tag=\"span\">\n                                                                        <template #price>\n                                                                            {{ renderPrice(variant.netPrice) }}*\n                                                                        </template>\n                                                                    </i18n-t>\n                                                                    -\n                                                                </span>\n                                                                <span>\n                                                                    {{ $t(getVariantCancellationInformationSnippet(variant)) }}\n                                                                </span>\n                                                            </div>\n                                                        {% endblock %}\n                                                    </div>\n\n                                                    <div\n                                                        v-if=\"isVariantOfTypeRent(variant) && getVariantBadgeSavings(variant) > 0\"\n                                                        class=\"sw-extension-buy-modal__variants-card-badge\"\n                                                        :class=\"getVariantBadgeClasses(variant)\"\n                                                    >\n                                                        {{ $t('sw-extension-store.general.labelSavings', { percentage: getVariantBadgeSavings(variant) }) }}\n                                                    </div>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_buy %}\n                                                    <div\n                                                        v-if=\"isVariantOfTypeBuy(variant)\"\n                                                        class=\"sw-extension-buy-modal__buy\"\n                                                        :class=\"getDiscountClasses(variant)\"\n                                                    >\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_buy_prices %}\n                                                            <span\n                                                                v-if=\"hasActiveDiscount(variant)\"\n                                                                class=\"sw-extension-buy-modal__list-price\"\n                                                            >\n                                                                {{ renderPrice(variant.netPrice) }}\n                                                            </span>\n                                                            <span class=\"sw-extension-buy-modal__discounted-price\">{{ renderBuyPrice(variant) }}</span>\n                                                        {% endblock %}\n                                                    </div>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_fallback %}\n                                                    <div\n                                                        v-if=\"!isVariantOfTypeBuy(variant) && !isVariantOfTypeRent(variant)\"\n                                                        :class=\"`sw-extension-buy-modal__${variant.type}`\"\n                                                    >\n                                                        <span class=\"sw-extension-buy-modal__display-default-price\">\n                                                            {{ renderPrice(variant.netPrice) }}\n                                                        </span>\n                                                    </div>\n                                                {% endblock %}\n                                            {% endblock %}\n                                        </li>\n                                    {% endblock %}\n                                </ul>\n                            {% endblock %}\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_summary %}\n                    <div class=\"sw-extension-buy-modal__variant-summary\">\n                        {% block sw_extension_buy_modal_summary_content %}\n                            {% block sw_extension_buy_modal_summary_price %}\n                                <p class=\"sw-extension-buy-modal__variant-summary-price\">\n                                    {% block sw_extension_buy_modal_summary_price_content %}\n                                        {% block sw_extension_buy_modal_summary_label_price %}\n                                            <span>\n                                                {{ $t('sw-extension-store.component.sw-extension-buy-modal.variantSummary.labelPrice') }}\n                                            </span>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_summary_actual_price %}\n                                            <span\n                                                v-if=\"!isLoading\"\n                                                class=\"sw-extension-buy-modal__variant-summary-actual-price\"\n                                            >\n                                                <i18n-t :keypath=\"actualPriceSnippet\" tag=\"span\">\n                                                    <template #price>\n                                                        {{ actualPrice }}*\n                                                    </template>\n                                                </i18n-t>\n                                            </span>\n                                        {% endblock %}\n                                    {% endblock %}\n                                </p>\n\n                                <template v-if=\"isVariantOfTypeRent(selectedVariant) && firstMonthFree\">\n                                    <i18n-t\n                                        v-if=\"hasActiveDiscount(selectedVariant)\"\n                                        keypath=\"sw-extension-store.buy-modal.rent.followingDiscount\"\n                                        class=\"sw-extension-buy-modal__variant-summary-price-subline\"\n                                        tag=\"p\"\n                                    >\n                                        <template #price>\n                                            {{ renderPrice(selectedVariant.discountCampaign.discountedPricePerMonth) }}*\n                                        </template>\n                                        <template #months>\n                                            {{ !isRentDurationMonthly(selectedVariant) ? selectedVariant.duration : selectedVariant.discountCampaign.discountAppliesForMonths }}\n                                        </template>\n                                    </i18n-t>\n\n                                    <i18n-t\n                                        :keypath=\"finalPriceSnippet\"\n                                        class=\"sw-extension-buy-modal__variant-summary-price-subline is--final-price\"\n                                        tag=\"p\"\n                                    >\n                                        <template #price>\n                                            {{ renderPrice(selectedVariant.netPrice) }}*\n                                        </template>\n                                    </i18n-t>\n                                </template>\n                            {% endblock %}\n\n                            {% block sw_extension_buy_modal_summary_renewal_date %}\n                                <p\n                                    class=\"sw-extension-buy-modal__variant-summary-price-subline\"\n                                    :class=\"renewalDateClasses\"\n                                >\n                                    {{ $t('sw-extension-store.component.sw-extension-buy-modal.variantSummary.renewal', { renewalDate: dateFilter(renewalDate) }, 0) }}\n                                </p>\n                            {% endblock %}\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n\n                {% block sw_extension_payment_selection %}\n                    <sw-single-select\n                        v-if=\"showPaymentSelection\"\n                        v-model:value=\"selectedPaymentMean\"\n                        :options=\"paymentMeans\"\n                        :placeholder=\"$t('sw-extension-store.buy-modal.paymentSelectionPlaceholder')\"\n                        value-property=\"id\"\n                    />\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_toc %}\n                    <sw-gtc-checkbox\n                        v-model:value=\"tocAccepted\"\n                        class=\"sw-extension-buy-modal__checkbox\"\n                    />\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_permissions %}\n                    <mt-checkbox\n                        v-if=\"extensionHasPermissions\"\n                        v-model:checked=\"permissionsAccepted\"\n                        class=\"sw-extension-buy-modal__checkbox sw-extension-buy-modal__checkbox-permissions\"\n                        :class=\"`sw-extension-buy-modal__checkbox-permissions--${extension.name}`\"\n                    >\n                        <template #label>\n                            <span v-if=\"legalText\">\n                                {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.introText') }}\n                                <mt-link\n                                    class=\"link permissions-modal-trigger\"\n                                    as=\"a\"\n                                    @click=\"openPermissionsModal\"\n                                >\n                                    {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonPermissions') }}\n                                </mt-link>\n                                {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.middleText') }}\n                                <mt-link\n                                    class=\"link legal-text-modal-trigger\"\n                                    as=\"a\"\n                                    @click=\"openLegalTextModal\"\n                                >\n                                    {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonAppProvider') }}\n                                </mt-link>\n                                {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.endText') }}\n                            </span>\n\n                            <span v-else>\n                                {{ $t('sw-extension-store.component.sw-extension-buy-modal.labelAcceptPermissions') }}\n                                <mt-link\n                                    class=\"link permissions-modal-trigger\"\n                                    as=\"a\"\n                                    @click=\"openPermissionsModal\"\n                                >\n                                    {{ $t('sw-extension-store.detail.labelButtonShowPermissions') }}\n                                </mt-link>\n                            </span>\n                        </template>\n                    </mt-checkbox>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_app_provider %}\n                    <mt-checkbox\n                        v-if=\"!extensionHasPermissions && legalText\"\n                        v-model:checked=\"legalTextAccepted\"\n                        class=\"sw-extension-buy-modal__checkbox sw-extension-buy-modal__checkbox-app-provider\"\n                        :class=\"`sw-extension-buy-modal__checkbox-app-provider--${extension.name}`\"\n                    >\n                        <template #label>\n                            {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.appProviderStartText') }}\n                            <mt-link\n                                class=\"link legal-text-modal-trigger\"\n                                as=\"a\"\n                                @click=\"openLegalTextModal\"\n                            >\n                                {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonAppProvider') }}\n                            </mt-link>\n                            {{ $t('sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.endText') }}\n                        </template>\n                    </mt-checkbox>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_privacy_policy_extensions %}\n                    <mt-checkbox\n                        v-if=\"extension.privacyPolicyExtension\"\n                        v-model:checked=\"privacyExtensionsAccepted\"\n                        class=\"sw-extension-buy-modal__checkbox-privacy-policy\"\n                        :class=\"`sw-extension-buy-modal__checkbox-privacy-policy--${extension.name}`\"\n                    >\n                        <template #label>\n                            <span class=\"is--required\">\n                                {{ $t('sw-extension-store.component.sw-extension-buy-modal.labelAcceptPrivacyExtensions') }}\n                            </span>\n                            <mt-link\n                                class=\"link privacy-policy-modal-trigger\"\n                                as=\"a\"\n                                @click=\"openPrivacyModal\"\n                            >\n                                {{ $t('sw-extension-store.component.sw-extension-buy-modal.buttonShowPrivacyExtensions') }}\n                            </mt-link>\n                        </template>\n                    </mt-checkbox>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_alert_can_not_buy %}\n                    <mt-banner v-if=\"!userCanBuyFromStore\" variant=\"info\">\n                        {% block sw_extension_buy_modal_alert_can_not_buy_content %}\n                            {{ $t('sw-extension-store.component.sw-extension-buy-modal.alertCanNotBuy.text') }}\n                        {% endblock %}\n                    </mt-banner>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_alert_payment_means_required %}\n                    <mt-banner v-if=\"showPaymentWarning\" variant=\"attention\">\n                        {% block sw_extension_buy_modal_alert_payment_means_required_content %}\n                            {{ $t('sw-extension-store.buy-modal.warnings.paymentMeansRequiredText') }}\n                            <sw-external-link\n                                :href=\"cart && cart.payment && cart.payment.registrationUrl\"\n                                class=\"sw-extension-buy-modal__external-link\"\n                            >\n                                {{ $t('sw-extension-store.buy-modal.warnings.paymentMeansRequiredLinkText') }}\n                                <mt-icon name=\"regular-long-arrow-right\" />\n                            </sw-external-link>\n                        {% endblock %}\n                    </mt-banner>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_plus_vat %}\n                    <p\n                        class=\"sw-extension-buy-modal__plus-vat\"\n                        :class=\"vatIncludedClasses\"\n                    >\n                        {{ $t('sw-extension-store.buy-modal.plusVat') }}\n                    </p>\n                {% endblock %}\n\n                {% block sw_extension_payment_general_text_block %}\n                    <p\n                        v-if=\"paymentText\"\n                        class=\"sw-extension-buy-modal__general-text-block\"\n                        v-html=\"paymentText\"\n                    />\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_button_purchase %}\n                    <mt-button\n                        class=\"sw-extension-buy-modal__purchase-button\"\n                        size=\"default\"\n                        variant=\"primary\"\n                        block\n                        :disabled=\"!canPurchaseExtension\"\n                        @click=\"purchaseExtension\"\n                    >\n                        {{ purchaseButtonLabel }}\n                    </mt-button>\n                {% endblock %}\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_permissions_modal %}\n                <sw-extension-permissions-modal\n                    v-if=\"showPermissionsModal\"\n                    :extension-label=\"extension.label\"\n                    :domains=\"extension.domains\"\n                    :permissions=\"extension.permissions\"\n                    @modal-close=\"closePermissionsModal\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_privacy_extensions_modal %}\n                <sw-extension-privacy-policy-extensions-modal\n                    v-if=\"showPrivacyModal\"\n                    :extension-name=\"extension.label\"\n                    :privacy-policy-extension=\"extension.privacyPolicyExtension\"\n                    @modal-close=\"closePrivacyModal\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_legal_text_modal %}\n                <sw-modal\n                    v-if=\"showLegalTextModal\"\n                    class=\"sw-extension-buy-modal__legal-text-modal\"\n                    :title=\"$t('sw-extension-store.buy-modal.legalTextModal.title')\"\n                    @modal-close=\"closeLegalTextModal\"\n                >\n                    <div v-html=\"legalText\" />\n\n                    <template #modal-footer>\n                        <mt-button\n                            variant=\"primary\"\n                            size=\"small\"\n                            @click=\"closeLegalTextModal\"\n                        >\n                            {{ $t('global.default.close') }}\n                        </mt-button>\n                    </template>\n                </sw-modal>\n            {% endblock %}\n        </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-extension-buy-modal.html.twig';\nimport './sw-extension-buy-modal.scss';\n\nconst { Utils } = Shopware;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    inject: [\n        'shopwareExtensionService',\n        'extensionStoreService',\n        'extensionStoreLicensesService',\n    ],\n\n    emits: [\n        'modal-close',\n    ],\n\n    mixins: [\n        'sw-extension-error',\n    ],\n\n    props: {\n        extension: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            tocAccepted: false,\n            selectedVariantId: null,\n            isLoading: false,\n            permissionsAccepted: false,\n            legalTextAccepted: false,\n            showPermissionsModal: false,\n            showLegalTextModal: false,\n            privacyExtensionsAccepted: false,\n            showPrivacyModal: false,\n            checkoutStep: null,\n            checkoutError: null,\n            cart: null,\n            paymentMeans: [],\n        };\n    },\n\n    computed: {\n        actualPrice() {\n            const cartPosition = this.cart && this.cart.positions && this.cart.positions[0];\n            const netPrice = cartPosition && cartPosition.netPrice;\n\n            if (netPrice && cartPosition && cartPosition.firstMonthFree) {\n                return Utils.format.currency(0, 'EUR');\n            }\n\n            if (netPrice) {\n                return Utils.format.currency(netPrice, 'EUR', 2);\n            }\n\n            return Utils.format.currency(\n                this.extensionStoreService.getPriceFromVariant(this.selectedVariant),\n                'EUR',\n            );\n        },\n\n        actualPriceSnippet() {\n            if (this.extensionStoreService.isVariantOfTypeFree(this.selectedVariant)) {\n                return 'sw-extension-store.general.labelFree';\n            }\n\n            if (this.extensionStoreService.isVariantOfTypeBuy(this.selectedVariant)) {\n                return 'sw-extension-store.general.labelPriceOneTime';\n            }\n\n            const cartPosition = this.cart && this.cart.positions && this.cart.positions[0];\n            const netPrice = cartPosition && cartPosition.netPrice;\n\n            if (netPrice && cartPosition && cartPosition.firstMonthFree) {\n                return 'sw-extension-store.general.labelPriceFirstMonth';\n            }\n\n            if (this.isRentDurationYearly(this.selectedVariant)) {\n                return 'sw-extension-store.general.labelPricePerYear';\n            }\n\n            return 'sw-extension-store.general.labelPricePerMonth';\n        },\n\n        finalPriceSnippet() {\n            if (this.isRentDurationYearly(this.selectedVariant)) {\n                return 'sw-extension-store.buy-modal.rent.yearly.finalPrice';\n            }\n\n            return 'sw-extension-store.buy-modal.rent.monthly.finalPrice';\n        },\n\n        recommendedVariants() {\n            return this.extensionStoreService.orderVariantsByRentDuration(this.extension.variants);\n        },\n\n        selectedVariant() {\n            return this.extension.variants.find((variant) => {\n                return variant.id === this.selectedVariantId;\n            });\n        },\n\n        dateFilter() {\n            return Utils.format.date;\n        },\n\n        purchaseButtonLabel() {\n            if (this.isVariantOfTypeFree(this.selectedVariant)) {\n                return this.$t('sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.free');\n            }\n\n            if (this.isVariantOfTypeRent(this.selectedVariant)) {\n                return this.$t('sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.rent');\n            }\n\n            return this.$t('sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.buy');\n        },\n\n        vatIncludedClasses() {\n            return {\n                'is--hidden': this.isVariantOfTypeFree(this.selectedVariant),\n            };\n        },\n\n        renewalDate() {\n            const date = new Date();\n\n            if (this.isRentDurationMonthly(this.selectedVariant)) {\n                date.setMonth(date.getMonth() + 1);\n            } else {\n                date.setMonth(date.getMonth() + 12);\n            }\n\n            return date;\n        },\n\n        renewalDateClasses() {\n            return {\n                'is--hidden': false === this.isVariantOfTypeRent(this.selectedVariant),\n            };\n        },\n\n        extensionHasPermissions() {\n            return !!Object.keys(this.extension.permissions).length;\n        },\n\n        canPurchaseExtension() {\n            return this.tocAccepted &&\n                this.permissionsAccepted &&\n                this.legalTextAccepted &&\n                this.privacyExtensionsAccepted &&\n                this.userCanBuyFromStore &&\n                !this.showPaymentWarning;\n        },\n\n        /* onPrem we need to check if the user is connected to the store in saas we check if the user has a plan */\n        userCanBuyFromStore() {\n            // Trigger for recompute value\n\n            const _trigger = this.tocAccepted;\n\n            return Shopware.Store.get('shopwareExtensions').userInfo !== null;\n        },\n\n        showPaymentWarning() {\n            return (this.paymentMeans || []).length <= 0 &&\n                this.cart && this.cart.payment && this.cart.payment.paymentMeanRequired;\n        },\n\n        checkoutSteps() {\n            return Object.freeze({\n                CHECKOUT: null,\n                SUCCESS: 'checkout-success',\n                FAILED: 'checkout-failed',\n            });\n        },\n\n        showPaymentSelection() {\n            return (this.paymentMeans || []).length > 0 &&\n                this.cart && this.cart.payment && this.cart.payment.paymentMeanRequired;\n        },\n\n        paymentText() {\n            if (!this.cart || !this.cart.payment || !this.cart.payment.paymentText) {\n                return null;\n            }\n\n            return this.$sanitize(this.cart.payment.paymentText, {\n                ALLOWED_TAGS: ['a', 'b', 'i', 'u', 'br', 'strong', 'p', 'br'],\n                ALLOWED_ATTR: ['href', 'target', 'rel'],\n            });\n        },\n\n        legalText() {\n            if (!this.cart || !this.cart.legalText) {\n                return null;\n            }\n\n            return this.$sanitize(this.cart.legalText, {\n                ALLOWED_TAGS: ['a', 'b', 'i', 'u', 'br', 'strong', 'p', 'br'],\n                ALLOWED_ATTR: ['href', 'target', 'rel'],\n            });\n        },\n\n        selectedPaymentMean: {\n            get() {\n                return this.cart &&\n                    this.cart.payment &&\n                    this.cart.payment.paymentMean &&\n                    this.cart.payment.paymentMean.id;\n            },\n            set(paymentId) {\n                if (this.cart && this.cart.payment && this.cart.payment.paymentMean) {\n                    this.cart.payment.paymentMean.id = paymentId;\n                }\n\n                this.cart.payment.paymentMean = {\n                    id: paymentId,\n                };\n            },\n        },\n\n        checkoutErrorDocumentationLink() {\n            return Utils.get(this.checkoutError, 'meta.documentationLink', null);\n        },\n\n        firstMonthFree() {\n            return this.cart && this.cart.positions[0] && this.cart.positions[0].firstMonthFree === true;\n        },\n    },\n\n    async created() {\n        const variantId = this.recommendedVariants.length > 0 ? this.recommendedVariants[0].id : null;\n\n        this.setSelectedVariantId(variantId);\n        this.permissionsAccepted = !this.extensionHasPermissions;\n        this.privacyExtensionsAccepted = !this.extension.privacyPolicyExtension;\n\n        await this.fetchPlan();\n\n        this.legalTextAccepted = !this.legalText;\n    },\n\n    watch: {\n        selectedVariantId() {\n            this.getCart();\n        },\n\n        /**\n         * userCanBuyFromStore is used in the getCart() method to make an early return\n         *\n         * @param value\n         */\n        userCanBuyFromStore(value) {\n            if (value) {\n                this.getCart();\n            }\n        },\n\n        /**\n         * Watcher to automatically sync the `legalTextAccepted` value with the permissions.\n         * When an App has permissions which need to be accepted, the permissions automatically accept\n         * the `legalText` as well because for Apps they are combined in a single checkbox.\n         *\n         * @param value\n         */\n        permissionsAccepted(value) {\n            this.legalTextAccepted = value;\n        },\n    },\n\n    methods: {\n        emitClose() {\n            if (this.isLoading) {\n                return;\n            }\n\n            this.$emit('modal-close');\n        },\n\n        getDiscountClasses(variant) {\n            return {\n                'is--discounted': this.hasActiveDiscount(variant),\n            };\n        },\n\n        getVariantPrice(variant) {\n            return this.extensionStoreService.getCalculatedPrice(variant);\n        },\n\n        getVariantPriceSnippet(variant) {\n            return this.extensionStoreService.getPriceSnippetForVariant(variant);\n        },\n\n        getVariantDiscountInformationSnippet(variant) {\n            if (this.isRentDurationYearly(variant)) {\n                return 'sw-extension-store.buy-modal.rent.yearly.discountInformation';\n            }\n\n            return 'sw-extension-store.buy-modal.rent.monthly.discountInformation';\n        },\n\n        getVariantCancellationInformationSnippet(variant) {\n            if (this.isRentDurationYearly(variant)) {\n                return 'sw-extension-store.buy-modal.rent.yearly.cancellationInformation';\n            }\n\n            return 'sw-extension-store.buy-modal.rent.monthly.cancellationInformation';\n        },\n\n        getVariantClasses(variant) {\n            return {\n                'is--monthly': this.isRentDurationMonthly(variant),\n                'is--yearly': this.isRentDurationYearly(variant),\n            };\n        },\n\n        getVariantBadgeClasses(variant) {\n            return {\n                'sw-extension-buy-modal__variants-card-badge-discounted': this.hasActiveDiscount(variant),\n                'is--monthly': this.isRentDurationMonthly(variant),\n                'is--yearly': this.isRentDurationYearly(variant),\n            };\n        },\n\n        getVariantBadgeSavings(variant) {\n            const monthlyVariant = this.extension.variants.find((v) => {\n                return this.extensionStoreService.isRentDurationMonthly(v);\n            });\n\n            if (!monthlyVariant) {\n                return 0;\n            }\n\n            const monthlyNetPrice = monthlyVariant.netPrice;\n            const variantNetPrice = variant.netPrice;\n            const variantDuration = variant.duration;\n\n            const hasSaving = variantNetPrice !== (monthlyNetPrice * variantDuration);\n            const hasDiscount = this.hasActiveDiscount(variant);\n\n            let savingsPercentage = 0;\n\n            if (hasSaving && false === hasDiscount) {\n                savingsPercentage = 100 * (1 - variantNetPrice / (monthlyNetPrice * variantDuration));\n            } else if (false === hasSaving && hasDiscount) {\n                savingsPercentage = 100 * (1 - variant.discountCampaign.discountedPrice / variant.netPrice);\n            } else if (hasSaving && hasDiscount) {\n                const savingPercentage = 100 * (1 - variantNetPrice / (monthlyNetPrice * variantDuration));\n                const discountPercentage = 100 * (1 - variant.discountCampaign.discountedPrice / (monthlyNetPrice * variantDuration));\n\n                savingsPercentage = discountPercentage - savingPercentage;\n            }\n\n            return savingsPercentage.toFixed(2).replace(/\\.00$/, '');\n        },\n\n        hasActiveDiscount(variant) {\n            return this.extensionStoreService.isVariantDiscounted(variant);\n        },\n\n        isRentDurationMonthly(variant) {\n            return this.extensionStoreService.isRentDurationMonthly(variant);\n        },\n\n        isRentDurationYearly(variant) {\n            return this.extensionStoreService.isRentDurationYearly(variant);\n        },\n\n        isVariantOfTypeFree(variant) {\n            return this.extensionStoreService.isVariantOfTypeFree(variant);\n        },\n\n        isVariantOfTypeBuy(variant) {\n            return this.extensionStoreService.isVariantOfTypeBuy(variant);\n        },\n\n        isVariantOfTypeRent(variant) {\n            return this.extensionStoreService.isVariantOfTypeRent(variant);\n        },\n\n        setSelectedVariantId(variantId) {\n            if (this.isLoading) {\n                return;\n            }\n\n            this.selectedVariantId = variantId;\n        },\n\n        variantCardClass(variant) {\n            return {\n                'is--selected': variant.id === this.selectedVariantId,\n            };\n        },\n\n        onChangeVariantSelection(variant) {\n            this.setSelectedVariantId(variant.id);\n        },\n\n        async purchaseExtension() {\n            this.isLoading = true;\n\n            let checkoutResult = null;\n\n            try {\n                await this.orderCart();\n\n                await this.shopwareExtensionService.updateExtensionData();\n                checkoutResult = this.checkoutSteps.SUCCESS;\n            } catch (error) {\n                this.handleErrors(error);\n                checkoutResult = this.checkoutSteps.FAILED;\n\n                if (Utils.get(error, 'response.data.errors[0]', null)) {\n                    this.checkoutError = error.response.data.errors[0];\n                }\n            } finally {\n                await this.shopwareExtensionService.updateExtensionData();\n                this.checkoutStep = checkoutResult;\n\n                this.isLoading = false;\n            }\n        },\n\n        async orderCart() {\n            await this.extensionStoreLicensesService.orderCart(this.cart);\n        },\n\n        async getCart() {\n            if (!this.userCanBuyFromStore) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            try {\n                const response = await this.extensionStoreLicensesService.newCart(this.extension.id, this.selectedVariantId);\n                this.cart = response.data;\n            } catch (error) {\n                this.handleErrors(error);\n                this.isLoading = false;\n                this.emitClose();\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        renderPrice(price) {\n            return Utils.format.currency(price, 'EUR');\n        },\n\n        renderBuyPrice(variant) {\n            if (this.hasActiveDiscount(variant)) {\n                return this.renderPrice(variant.discountCampaign.discountedPrice);\n            }\n\n            return this.renderPrice(variant.netPrice);\n        },\n\n        handleErrors(error) {\n            this.showExtensionErrors(error);\n        },\n\n        openPermissionsModal() {\n            this.showPermissionsModal = true;\n        },\n\n        closePermissionsModal() {\n            this.showPermissionsModal = false;\n        },\n\n        openLegalTextModal() {\n            this.showLegalTextModal = true;\n        },\n\n        closeLegalTextModal() {\n            this.showLegalTextModal = false;\n        },\n\n        async fetchPlan() {\n            this.isLoading = true;\n            await this.shopwareExtensionService.checkLogin();\n            await this.getPaymentMeans();\n            this.isLoading = false;\n        },\n\n        async getPaymentMeans() {\n            this.extensionStoreLicensesService.getPaymentMeans().then((response) => {\n                this.paymentMeans = response.data;\n            }).catch(error => {\n                const errorMessages = (error.response && error.response.data && error.response.data.errors) || [];\n\n                if (!Array.isArray(errorMessages)) {\n                    Shopware.Utils.debug.warn('Payment loading error', error);\n                    return;\n                }\n\n                errorMessages.forEach(e => {\n                    this.createNotificationError({\n                        system: true,\n                        autoClose: false,\n                        growl: true,\n                        title: e.title,\n                        message: e.detail,\n                    });\n                });\n            });\n        },\n\n        openPrivacyModal() {\n            this.showPrivacyModal = true;\n        },\n\n        closePrivacyModal() {\n            this.showPrivacyModal = false;\n        },\n    },\n};\n"],"names":["template","Utils","index","cartPosition","netPrice","variant","date","paymentId","variantId","value","monthlyVariant","v","monthlyNetPrice","variantNetPrice","variantDuration","hasSaving","hasDiscount","savingsPercentage","savingPercentage","checkoutResult","error","response","price","errorMessages","e"],"mappings":"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"}