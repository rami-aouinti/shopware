{"version":3,"file":"index-DG_VinDN.js","sources":["../../../app/administration/src/module/sw-in-app-purchases/component/sw-in-app-purchase-checkout-overview/sw-in-app-purchase-checkout-overview.html.twig","../../../app/administration/src/module/sw-in-app-purchases/component/sw-in-app-purchase-checkout-overview/index.ts"],"sourcesContent":["<div class=\"sw-in-app-purchase-checkout-purchase\">\n    <div class=\"sw-in-app-purchase-checkout-purchase__feature\">\n        <p class=\"sw-in-app-purchase-checkout-purchase__feature__name\">\n            {{ purchase.name }}\n        </p>\n\n        <p class=\"sw-in-app-purchase-checkout-purchase__feature__description\">\n            {{ purchase.description }}\n        </p>\n    </div>\n\n    <sw-in-app-purchase-checkout-subscription-change\n        v-if=\"subscriptionChange\"\n        :purchase=\"purchase\"\n        :cart=\"cart\"\n    />\n\n    <sw-in-app-purchase-price-box\n        v-else-if=\"purchase.priceModels.length === 1\"\n        :price-model=\"priceModel\"\n    />\n\n    <sw-radio-field\n        v-else\n        block\n        :value=\"variant\"\n        :options=\"purchaseOptions\"\n        class=\"sw-in-app-purchase-checkout-purchase__feature__choices\"\n        @update:value=\"updateVariant\"\n    />\n\n    <div class=\"sw-in-app-purchase-checkout-purchase__subtext\">\n        <p class=\"sw-in-app-purchase-checkout-purchase__subtext__bill\">\n            {{ $t('sw-in-app-purchase-checkout-overview.billHint') }}\n        </p>\n\n        <p class=\"sw-in-app-purchase-checkout-purchase__subtext__exclude_vat\">\n            {{ $t('sw-in-app-purchase-checkout-overview.excludeVat') }}\n        </p>\n\n        <mt-checkbox\n            v-if=\"priceModel.conditionsType !== null\"\n            v-model:value=\"gtcAccepted\"\n            :checked=\"gtcAccepted\"\n            class=\"sw-in-app-purchase-checkout-purchase__subtext__partner_gtc\"\n            @update:checked=\"onGtcAcceptedChange\"\n        >\n            <template #label>\n                {{ $t('sw-in-app-purchase-checkout-overview.partner.accept') }}\n                <mt-link\n                    v-if=\"priceModel.conditionsType === 'gtc'\"\n                    type=\"external\"\n                    as=\"a\"\n                    :href=\"purchase.websiteGtc\"\n                >\n                    {{ $t('sw-in-app-purchase-checkout-overview.partner.gtc', { partner: producer }, 0) }}\n                </mt-link>\n                <mt-link\n                    v-else-if=\"priceModel.conditionsType === 'detailed'\"\n                    type=\"internal\"\n                    as=\"button\"\n                    @click=\"openConditionsModal()\"\n                >\n                    {{ $t('sw-in-app-purchase-checkout-overview.partner.conditions', { partner: producer }, 0) }}\n                </mt-link>\n            </template>\n        </mt-checkbox>\n\n        <sw-gtc-checkbox\n            :value=\"tosAccepted\"\n            class=\"sw-in-app-purchase-checkout-purchase__subtext__tos\"\n            @update:value=\"onTosAcceptedChange\"\n        />\n    </div>\n\n    <sw-modal\n        v-if=\"priceModel.conditionsType === 'detailed' && showConditionsModal\"\n        :title=\"$t('sw-in-app-purchase-checkout-overview.partner.conditions-header')\"\n        variant=\"small\"\n        @modal-close=\"closeConditionsModal\"\n    >\n        <div v-html=\"$sanitize(purchase.serviceConditions, { ALLOWED_TAGS: ['a', 'b', 'i', 'u', 'br', 'ul', 'li', 'ol'], ALLOWED_ATTR: ['href', 'target'] })\" />\n\n        <template #modal-footer>\n            <sw-button\n                variant=\"secondary\"\n                @click=\"closeConditionsModal\"\n            >\n                {{ $t('sw-in-app-purchase-checkout-button.closeButton') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n</div>\n","import type * as IAP from 'SwagExtensionStore/module/sw-in-app-purchases/types';\nimport template from './sw-in-app-purchase-checkout-overview.html.twig';\nimport './sw-in-app-purchase-checkout-overview.scss';\n\n/**\n * @private\n */\nexport default Shopware.Component.wrapComponentConfig({\n    template,\n\n    emits: ['update:tos-accepted', 'update:gtc-accepted', 'update:variant'],\n\n    props: {\n        purchase: {\n            type: Object as PropType<IAP.InAppPurchase>,\n            required: true,\n        },\n        tosAccepted: {\n            type: Boolean,\n            required: true,\n        },\n        gtcAccepted: {\n            type: Boolean,\n            required: true,\n        },\n        producer: {\n            type: String,\n            required: true,\n        },\n        cart: {\n            type: Object as PropType<IAP.InAppPurchaseCart>,\n            required: true,\n        },\n        variant: {\n            type: String,\n            required: true,\n        },\n    },\n\n    data(): {\n        showConditionsModal: boolean;\n    } {\n        return {\n            showConditionsModal: false,\n        };\n    },\n\n    watch: {\n        priceModel: {\n            immediate: true,\n            handler() {\n                this.onGtcAcceptedChange(this.priceModel.conditionsType === null);\n            },\n        },\n    },\n\n    computed: {\n        purchaseOptions(): Array<{ value: string; name: string }> {\n            return this.purchase.priceModels.map((priceModel): { value: string; name: string } => {\n                return {\n                    value: priceModel.variant,\n                    name: `â‚¬${priceModel.price}* /${this.$t(`sw-in-app-purchase-price-box.duration.${priceModel.variant}`)}`,\n                };\n            });\n        },\n\n        priceModel(): IAP.InAppPurchasePriceModel {\n            return this.purchase.priceModels.find(\n                (pm: IAP.InAppPurchasePriceModel) => this.cart.positions[0].variant === pm.variant,\n            ) || this.purchase.priceModels[0];\n        },\n\n        subscriptionChange() {\n            return this.cart.positions.find(position => position.subscriptionChange !== null);\n        },\n    },\n\n    methods: {\n        openConditionsModal() {\n            this.showConditionsModal = true;\n        },\n\n        closeConditionsModal() {\n            this.showConditionsModal = false;\n        },\n\n        onTosAcceptedChange(value: boolean) {\n            this.$emit('update:tos-accepted', value);\n        },\n\n        onGtcAcceptedChange(value: boolean) {\n            this.$emit('update:gtc-accepted', value);\n        },\n\n        updateVariant(variant : string) {\n            if (this.variant !== variant) {\n                this.$emit('update:variant', variant);\n            }\n        },\n    },\n});\n"],"names":["template","index","priceModel","pm","position","value","variant"],"mappings":"AAAA,MAAAA,EAAe,06ECOfC,EAAe,SAAS,UAAU,oBAAoB,CAClD,SAAAD,EAEA,MAAO,CAAC,sBAAuB,sBAAuB,gBAAgB,EAEtE,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EAAA,EAEd,YAAa,CACT,KAAM,QACN,SAAU,EAAA,EAEd,YAAa,CACT,KAAM,QACN,SAAU,EAAA,EAEd,SAAU,CACN,KAAM,OACN,SAAU,EAAA,EAEd,KAAM,CACF,KAAM,OACN,SAAU,EAAA,EAEd,QAAS,CACL,KAAM,OACN,SAAU,EAAA,CACd,EAGJ,MAEE,CACE,MAAO,CACH,oBAAqB,EAAA,CACzB,EAGJ,MAAO,CACH,WAAY,CACR,UAAW,GACX,SAAU,CACN,KAAK,oBAAoB,KAAK,WAAW,iBAAmB,IAAI,CAAA,CACpE,CACJ,EAGJ,SAAU,CACN,iBAA0D,CACtD,OAAO,KAAK,SAAS,YAAY,IAAKE,IAC3B,CACH,MAAOA,EAAW,QAClB,KAAM,IAAIA,EAAW,KAAK,MAAM,KAAK,GAAG,yCAAyCA,EAAW,OAAO,EAAE,CAAC,EAAA,EAE7G,CAAA,EAGL,YAA0C,CACtC,OAAO,KAAK,SAAS,YAAY,KAC5BC,GAAoC,KAAK,KAAK,UAAU,CAAC,EAAE,UAAYA,EAAG,OAAA,GAC1E,KAAK,SAAS,YAAY,CAAC,CAAA,EAGpC,oBAAqB,CACjB,OAAO,KAAK,KAAK,UAAU,KAAKC,GAAYA,EAAS,qBAAuB,IAAI,CAAA,CACpF,EAGJ,QAAS,CACL,qBAAsB,CAClB,KAAK,oBAAsB,EAAA,EAG/B,sBAAuB,CACnB,KAAK,oBAAsB,EAAA,EAG/B,oBAAoBC,EAAgB,CAChC,KAAK,MAAM,sBAAuBA,CAAK,CAAA,EAG3C,oBAAoBA,EAAgB,CAChC,KAAK,MAAM,sBAAuBA,CAAK,CAAA,EAG3C,cAAcC,EAAkB,CACxB,KAAK,UAAYA,GACjB,KAAK,MAAM,iBAAkBA,CAAO,CACxC,CACJ,CAER,CAAC"}