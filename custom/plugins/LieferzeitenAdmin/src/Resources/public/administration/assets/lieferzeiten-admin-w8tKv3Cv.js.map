{"version":3,"file":"lieferzeiten-admin-w8tKv3Cv.js","sources":["../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-index/lieferzeiten-index.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-index/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-all/lieferzeiten-all.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-all/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-open/lieferzeiten-open.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-open/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-statistics/lieferzeiten-statistics.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-statistics/index.js","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-domain-selection/lieferzeiten-domain-selection.html.twig","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-domain-selection/index.js","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-order-table/lieferzeiten-order-table.html.twig","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-order-table/index.js","../../../app/administration/src/module/lieferzeiten/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-channel-settings-list/lieferzeiten-channel-settings-list.html.twig","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-channel-settings-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-task-assignment-rule-list/lieferzeiten-task-assignment-rule-list.html.twig","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-task-assignment-rule-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-notification-toggle-list/lieferzeiten-notification-toggle-list.html.twig","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-notification-toggle-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/index.js","../../../app/administration/src/init/translation.init.js","../../../app/administration/src/core/service/lieferzeiten-tracking.service.js","../../../app/administration/src/core/service/lieferzeiten-orders.service.js","../../../app/administration/src/init/store-api-fallback.init.js","../../../app/administration/src/component/lieferzeiten-demo-data-button/index.js"],"sourcesContent":["{% block lieferzeiten_index %}\r\n    <sw-page class=\"lieferzeiten-index\">\r\n        <template #smart-bar-header>\r\n            <h2>\r\n                {{ $t('lieferzeiten.general.mainMenuItemGeneral') }}\r\n            </h2>\r\n        </template>\r\n\r\n        <template #smart-bar-actions>\r\n            <lieferzeiten-domain-selection v-model=\"selectedDomain\" />\r\n        </template>\r\n\r\n        <template #content>\r\n            <sw-card-view>\r\n                <sw-card class=\"lieferzeiten-index__info\" :title=\"$t('lieferzeiten.general.infoTitle')\">\r\n                    <p>{{ $t('lieferzeiten.general.timezoneInfo') }}</p>\r\n                    <p>{{ $t('lieferzeiten.general.openDefinition') }}</p>\r\n                </sw-card>\r\n\r\n                <sw-card class=\"lieferzeiten-index__tabs\">\r\n                    <sw-loader v-if=\"isLoading\" />\r\n\r\n                    <sw-empty-state\r\n                        v-else-if=\"loadError\"\r\n                        :title=\"$t('lieferzeiten.loading.errorTitle')\"\r\n                        :subline=\"$t('lieferzeiten.loading.errorDescription')\"\r\n                    >\r\n                        <template #actions>\r\n                            <sw-button variant=\"primary\" @click=\"loadOrders\">\r\n                                {{ $t('lieferzeiten.loading.retry') }}\r\n                            </sw-button>\r\n                        </template>\r\n                    </sw-empty-state>\r\n\r\n                    <template v-else>\r\n                        <sw-tabs>\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.all' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.all')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.all') }}\r\n                            </sw-tabs-item>\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.open' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.open')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.open') }}\r\n                            </sw-tabs-item>\r\n\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.statistics' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.statistics')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.statistics') }}\r\n                            </sw-tabs-item>\r\n                        </sw-tabs>\r\n\r\n                        <router-view\r\n                            :orders=\"filteredOrders\"\r\n                            :selected-domain=\"selectedDomain\"\r\n                            :on-reload-order=\"loadOrders\"\r\n                        />\r\n                    </template>\r\n                </sw-card>\r\n            </sw-card-view>\r\n        </template>\r\n    </sw-page>\r\n{% endblock %}\r\n","import template from './lieferzeiten-index.html.twig';\r\n\r\nShopware.Component.register('lieferzeiten-index', {\r\n    template,\r\n\r\n    inject: [\r\n        'lieferzeitenOrdersService',\r\n    ],\r\n\r\n    data() {\r\n        return {\r\n            selectedDomain: null,\r\n            orders: [],\r\n            isLoading: false,\r\n            loadError: null,\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadOrders();\r\n    },\r\n\r\n    computed: {\r\n        filteredOrders() {\r\n            if (!this.selectedDomain) {\r\n                return [];\r\n            }\r\n\r\n            return this.orders.filter((order) => order.domain === this.selectedDomain);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        async loadOrders() {\r\n            this.isLoading = true;\r\n            this.loadError = null;\r\n\r\n            try {\r\n                const result = await this.lieferzeitenOrdersService.getOrders();\r\n                this.orders = Array.isArray(result) ? result : [];\r\n            } catch (error) {\r\n                this.orders = [];\r\n                this.loadError = error;\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_all %}\r\n    <div class=\"lieferzeiten-all\">\r\n        <sw-container columns=\"repeat(auto-fit, minmax(180px, 1fr))\" gap=\"16px\">\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.totalOrders') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ orders.length }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.openOrders') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ openOrders.length }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.closedOrders') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ closedOrders.length }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.openParcels') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ openParcelsCount }}</p>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <lieferzeiten-order-table :orders=\"orders\" :on-reload-order=\"onReloadOrder\" />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-all.html.twig';\r\n\r\nShopware.Component.register('lieferzeiten-all', {\r\n    template,\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        openOrders() {\r\n            return this.orders.filter((order) => this.isOrderOpen(order));\r\n        },\r\n        closedOrders() {\r\n            return this.orders.filter((order) => !this.isOrderOpen(order));\r\n        },\r\n        openParcelsCount() {\r\n            return this.orders.reduce((total, order) => {\r\n                const openParcels = order.parcels.filter((parcel) => !parcel.closed).length;\r\n                return total + openParcels;\r\n            }, 0);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        isOrderOpen(order) {\r\n            return order.parcels.some((parcel) => !parcel.closed);\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_open %}\r\n    <div class=\"lieferzeiten-open\">\r\n        <sw-container columns=\"repeat(auto-fit, minmax(180px, 1fr))\" gap=\"16px\">\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.openOrders') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ openOrders.length }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.openParcels') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ openParcelsCount }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.kpi.filteredDomain') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ selectedDomain || '-' }}</p>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <lieferzeiten-order-table :orders=\"orders\" :only-open=\"true\" :on-reload-order=\"onReloadOrder\" />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-open.html.twig';\r\n\r\nShopware.Component.register('lieferzeiten-open', {\r\n    template,\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        openOrders() {\r\n            return this.orders.filter((order) => this.isOrderOpen(order));\r\n        },\r\n        openParcelsCount() {\r\n            return this.openOrders.reduce((total, order) => {\r\n                const openParcels = order.parcels.filter((parcel) => !parcel.closed).length;\r\n                return total + openParcels;\r\n            }, 0);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        isOrderOpen(order) {\r\n            return order.parcels.some((parcel) => !parcel.closed);\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_statistics %}\r\n    <div class=\"lieferzeiten-statistics\">\r\n        <sw-container columns=\"1fr auto auto\" gap=\"16px\" class=\"lieferzeiten-statistics__filters\">\r\n            <sw-single-select\r\n                v-model:value=\"selectedPeriod\"\r\n                :label=\"$t('lieferzeiten.statistics.periodLabel')\"\r\n                :options=\"periodOptions\"\r\n                labelProperty=\"label\"\r\n                valueProperty=\"value\"\r\n            />\r\n            <sw-single-select\r\n                v-model:value=\"selectedChannel\"\r\n                :label=\"$t('lieferzeiten.statistics.channelLabel')\"\r\n                :options=\"channelOptions\"\r\n                labelProperty=\"label\"\r\n                valueProperty=\"value\"\r\n            />\r\n            <sw-button variant=\"primary\" @click=\"exportCsv\">\r\n                {{ $t('lieferzeiten.statistics.exportCsv') }}\r\n            </sw-button>\r\n        </sw-container>\r\n\r\n        <sw-loader v-if=\"isLoading\" />\r\n\r\n        <sw-empty-state\r\n            v-else-if=\"loadError\"\r\n            :title=\"$t('lieferzeiten.loading.errorTitle')\"\r\n            :description=\"$t('lieferzeiten.loading.errorDescription')\"\r\n        />\r\n\r\n        <template v-else>\r\n        <sw-container columns=\"repeat(4, 1fr)\" gap=\"16px\" class=\"lieferzeiten-statistics__metrics\">\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.open')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.open }}</div>\r\n            </sw-card>\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.overdueShipping')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.overdueShipping }}</div>\r\n            </sw-card>\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.overdueDelivery')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.overdueDelivery }}</div>\r\n            </sw-card>\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.activities')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.activities }}</div>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <sw-card :title=\"$t('lieferzeiten.statistics.chartTitle')\" class=\"lieferzeiten-statistics__chart-card\">\r\n            <div v-if=\"channelChartData.length\" class=\"lieferzeiten-statistics__chart\">\r\n                <div v-for=\"item in channelChartData\" :key=\"item.channel\" class=\"lieferzeiten-statistics__chart-row\">\r\n                    <span>{{ item.channel }}</span>\r\n                    <div class=\"lieferzeiten-statistics__bar-wrap\">\r\n                        <div class=\"lieferzeiten-statistics__bar\" :style=\"{ width: getChartBarWidth(item.value) }\"></div>\r\n                    </div>\r\n                    <strong>{{ item.value }}</strong>\r\n                </div>\r\n            </div>\r\n            <sw-empty-state\r\n                v-else\r\n                :title=\"$t('lieferzeiten.emptyState.title')\"\r\n                :description=\"$t('lieferzeiten.emptyState.description')\"\r\n            />\r\n        </sw-card>\r\n\r\n        <sw-card :title=\"$t('lieferzeiten.statistics.tableTitle')\">\r\n            <sw-data-grid\r\n                :data-source=\"filteredOrders\"\r\n                :columns=\"tableColumns\"\r\n                :show-selection=\"false\"\r\n            >\r\n                <template #column-status=\"{ item }\">\r\n                    <sw-label :appearance=\"item.status === $t('lieferzeiten.statistics.status.overdue') ? 'error' : 'info'\">\r\n                        {{ item.status }}\r\n                    </sw-label>\r\n                </template>\r\n\r\n                <template #column-eventAt=\"{ item }\">\r\n                    {{ formatDate(item.eventAt) }}\r\n                </template>\r\n\r\n                <template #column-promisedAt=\"{ item }\">\r\n                    {{ formatDate(item.promisedAt) }}\r\n                </template>\r\n\r\n                <template #actions=\"{ item }\">\r\n                    <sw-context-menu-item @click=\"onDrilldown(item)\">\r\n                        {{ $t('lieferzeiten.statistics.drilldown') }}\r\n                    </sw-context-menu-item>\r\n                </template>\r\n            </sw-data-grid>\r\n        </sw-card>\r\n\r\n        <sw-modal\r\n            v-if=\"selectedActivity\"\r\n            :title=\"$t('lieferzeiten.statistics.drilldownTitle')\"\r\n            @modal-close=\"closeDrilldown\"\r\n        >\r\n            <p><strong>{{ $t('lieferzeiten.table.orderNumber') }}:</strong> {{ selectedActivity.orderNumber }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.table.domain') }}:</strong> {{ selectedActivity.domain }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.table.status') }}:</strong> {{ selectedActivity.status }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.statistics.activityDate') }}:</strong> {{ formatDate(selectedActivity.eventAt) }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.statistics.promisedDate') }}:</strong> {{ formatDate(selectedActivity.promisedAt) }}</p>\r\n        </sw-modal>\r\n        </template>\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-statistics.html.twig';\r\nimport './lieferzeiten-statistics.scss';\r\n\r\nShopware.Component.register('lieferzeiten-statistics', {\r\n    template,\r\n\r\n    inject: [\r\n        'lieferzeitenOrdersService',\r\n    ],\r\n\r\n    props: {\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            periodOptions: [\r\n                { value: 7, label: this.$t('lieferzeiten.statistics.period.7') },\r\n                { value: 30, label: this.$t('lieferzeiten.statistics.period.30') },\r\n                { value: 90, label: this.$t('lieferzeiten.statistics.period.90') },\r\n            ],\r\n            selectedPeriod: 30,\r\n            selectedChannel: 'all',\r\n            selectedActivity: null,\r\n            isLoading: false,\r\n            loadError: null,\r\n            statistics: {\r\n                metrics: {\r\n                    openOrders: 0,\r\n                    overdueShipping: 0,\r\n                    overdueDelivery: 0,\r\n                    activities: 0,\r\n                },\r\n                channels: [],\r\n                timeline: [],\r\n                activitiesData: [],\r\n            },\r\n            tableColumns: [\r\n                { property: 'orderNumber', label: this.$t('lieferzeiten.table.orderNumber'), primary: true },\r\n                { property: 'domain', label: this.$t('lieferzeiten.table.domain') },\r\n                { property: 'status', label: this.$t('lieferzeiten.table.status') },\r\n                { property: 'eventAt', label: this.$t('lieferzeiten.statistics.activityDate') },\r\n                { property: 'promisedAt', label: this.$t('lieferzeiten.statistics.promisedDate') },\r\n            ],\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadStatistics();\r\n    },\r\n\r\n    watch: {\r\n        selectedPeriod() {\r\n            this.loadStatistics();\r\n        },\r\n        selectedChannel() {\r\n            this.loadStatistics();\r\n        },\r\n        selectedDomain() {\r\n            this.selectedChannel = 'all';\r\n            this.loadStatistics();\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        channelOptions() {\r\n            return [\r\n                { value: 'all', label: this.$t('lieferzeiten.statistics.allChannels') },\r\n                ...this.statistics.channels.map((item) => ({ value: item.channel, label: item.channel })),\r\n            ];\r\n        },\r\n\r\n        metrics() {\r\n            return {\r\n                open: this.statistics.metrics.openOrders,\r\n                overdueShipping: this.statistics.metrics.overdueShipping,\r\n                overdueDelivery: this.statistics.metrics.overdueDelivery,\r\n                activities: this.statistics.metrics.activities,\r\n            };\r\n        },\r\n\r\n        filteredOrders() {\r\n            return this.statistics.activitiesData.map((activity) => ({\r\n                ...activity,\r\n                status: activity.status === 'open'\r\n                    ? this.$t('lieferzeiten.status.open')\r\n                    : (activity.status === 'done' ? this.$t('lieferzeiten.status.closed') : activity.status),\r\n            }));\r\n        },\r\n\r\n        channelChartData() {\r\n            return this.statistics.channels;\r\n        },\r\n\r\n        maxChartValue() {\r\n            if (!this.channelChartData.length) {\r\n                return 1;\r\n            }\r\n\r\n            return Math.max(...this.channelChartData.map((item) => item.value));\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        async loadStatistics() {\r\n            this.isLoading = true;\r\n            this.loadError = null;\r\n\r\n            try {\r\n                const payload = await this.lieferzeitenOrdersService.getStatistics({\r\n                    period: this.selectedPeriod,\r\n                    domain: this.selectedDomain,\r\n                    channel: this.selectedChannel,\r\n                });\r\n\r\n                this.statistics = {\r\n                    metrics: payload.metrics ?? {\r\n                        openOrders: 0,\r\n                        overdueShipping: 0,\r\n                        overdueDelivery: 0,\r\n                        activities: 0,\r\n                    },\r\n                    channels: Array.isArray(payload.channels) ? payload.channels : [],\r\n                    timeline: Array.isArray(payload.timeline) ? payload.timeline : [],\r\n                    activitiesData: Array.isArray(payload.activitiesData) ? payload.activitiesData : [],\r\n                };\r\n            } catch (error) {\r\n                this.statistics = {\r\n                    metrics: {\r\n                        openOrders: 0,\r\n                        overdueShipping: 0,\r\n                        overdueDelivery: 0,\r\n                        activities: 0,\r\n                    },\r\n                    channels: [],\r\n                    timeline: [],\r\n                    activitiesData: [],\r\n                };\r\n                this.loadError = error;\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        formatDate(dateString) {\r\n            if (!dateString) {\r\n                return '—';\r\n            }\r\n\r\n            return Shopware.Utils.format.date(dateString);\r\n        },\r\n\r\n        getChartBarWidth(value) {\r\n            return `${Math.max(Math.round((value / this.maxChartValue) * 100), 6)}%`;\r\n        },\r\n\r\n        onDrilldown(item) {\r\n            this.selectedActivity = item;\r\n        },\r\n\r\n        closeDrilldown() {\r\n            this.selectedActivity = null;\r\n        },\r\n\r\n        exportCsv() {\r\n            const headers = [\r\n                this.$t('lieferzeiten.table.orderNumber'),\r\n                this.$t('lieferzeiten.table.domain'),\r\n                this.$t('lieferzeiten.table.status'),\r\n                this.$t('lieferzeiten.statistics.activityDate'),\r\n                this.$t('lieferzeiten.statistics.promisedDate'),\r\n            ];\r\n\r\n            const rows = this.filteredOrders.map((order) => [\r\n                order.orderNumber,\r\n                order.domain,\r\n                order.status,\r\n                this.formatDate(order.eventAt),\r\n                this.formatDate(order.promisedAt),\r\n            ]);\r\n\r\n            const csv = [headers, ...rows]\r\n                .map((line) => line.map((value) => `\"${String(value).replace(/\"/g, '\"\"')}\"`).join(';'))\r\n                .join('\\n');\r\n\r\n            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n            const link = document.createElement('a');\r\n\r\n            link.href = URL.createObjectURL(blob);\r\n            link.download = 'lieferzeiten-statistiken.csv';\r\n            link.click();\r\n\r\n            URL.revokeObjectURL(link.href);\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_domain_selection %}\r\n    <div class=\"lieferzeiten-domain-selection\">\r\n        <sw-single-select\r\n            v-model=\"selectedDomain\"\r\n            :options=\"domains\"\r\n            :placeholder=\"$t('lieferzeiten.domainSelection.placeholder')\"\r\n            :clearable=\"false\"\r\n            :disabled=\"showDomainModal\"\r\n        />\r\n\r\n        <sw-button\r\n            size=\"small\"\r\n            variant=\"ghost\"\r\n            class=\"lieferzeiten-domain-selection__reset\"\r\n            @click=\"resetDomainSelection\"\r\n        >\r\n            {{ $t('lieferzeiten.domainSelection.reset') }}\r\n        </sw-button>\r\n\r\n        <sw-modal\r\n            v-if=\"showDomainModal\"\r\n            :title=\"$t('lieferzeiten.domainSelection.modalTitle')\"\r\n            @modal-close=\"confirmDomainSelection\"\r\n        >\r\n            <p>{{ $t('lieferzeiten.domainSelection.modalDescription') }}</p>\r\n\r\n            <sw-single-select\r\n                v-model=\"selectedDomain\"\r\n                :options=\"domains\"\r\n                :placeholder=\"$t('lieferzeiten.domainSelection.placeholder')\"\r\n                :clearable=\"false\"\r\n                required\r\n            />\r\n\r\n            <sw-switch-field\r\n                v-model=\"persistSelection\"\r\n                :label=\"$t('lieferzeiten.domainSelection.persistLabel')\"\r\n            />\r\n\r\n            <template #modal-footer>\r\n                <sw-button\r\n                    size=\"small\"\r\n                    variant=\"primary\"\r\n                    :disabled=\"!selectedDomain\"\r\n                    @click=\"confirmDomainSelection\"\r\n                >\r\n                    {{ $t('lieferzeiten.domainSelection.confirm') }}\r\n                </sw-button>\r\n            </template>\r\n        </sw-modal>\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-domain-selection.html.twig';\r\n\r\nconst STORAGE_KEY = 'lieferzeitenManagementDomain';\r\n\r\nShopware.Component.register('lieferzeiten-domain-selection', {\r\n    template,\r\n\r\n    props: {\r\n        value: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selectedDomain: this.value,\r\n            persistSelection: false,\r\n            showDomainModal: false,\r\n            domains: [\r\n                { value: 'First Medical', label: 'First Medical' },\r\n                { value: 'E-Commerce', label: 'E-Commerce' },\r\n                { value: 'Medical Solutions', label: 'Medical Solutions' },\r\n            ],\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadStoredDomain();\r\n    },\r\n\r\n    watch: {\r\n        value(newValue) {\r\n            this.selectedDomain = newValue;\r\n        },\r\n        selectedDomain(newValue) {\r\n            this.$emit('input', newValue);\r\n            this.persistDomain(newValue);\r\n        },\r\n        persistSelection() {\r\n            this.persistDomain(this.selectedDomain);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        loadStoredDomain() {\r\n            const localValue = localStorage.getItem(STORAGE_KEY);\r\n            if (localValue) {\r\n                this.persistSelection = true;\r\n                this.selectedDomain = localValue;\r\n                return;\r\n            }\r\n\r\n            const sessionValue = sessionStorage.getItem(STORAGE_KEY);\r\n            if (sessionValue) {\r\n                this.persistSelection = false;\r\n                this.selectedDomain = sessionValue;\r\n                return;\r\n            }\r\n\r\n            this.showDomainModal = true;\r\n        },\r\n\r\n        persistDomain(value) {\r\n            if (!value) {\r\n                return;\r\n            }\r\n\r\n            if (this.persistSelection) {\r\n                localStorage.setItem(STORAGE_KEY, value);\r\n                sessionStorage.removeItem(STORAGE_KEY);\r\n            } else {\r\n                sessionStorage.setItem(STORAGE_KEY, value);\r\n                localStorage.removeItem(STORAGE_KEY);\r\n            }\r\n        },\r\n\r\n        confirmDomainSelection() {\r\n            if (!this.selectedDomain) {\r\n                return;\r\n            }\r\n\r\n            this.persistDomain(this.selectedDomain);\r\n            this.showDomainModal = false;\r\n        },\r\n\r\n        resetDomainSelection() {\r\n            localStorage.removeItem(STORAGE_KEY);\r\n            sessionStorage.removeItem(STORAGE_KEY);\r\n            this.selectedDomain = null;\r\n            this.showDomainModal = true;\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_order_table %}\r\n    <div class=\"lieferzeiten-order-table\">\r\n        <table class=\"sw-data-grid__table\">\r\n            <thead>\r\n                <tr>\r\n                    <th colspan=\"4\">{{ $t('lieferzeiten.zones.order') }}</th>\r\n                    <th colspan=\"5\">{{ $t('lieferzeiten.zones.delivery') }}</th>\r\n                    <th colspan=\"3\">{{ $t('lieferzeiten.zones.status') }}</th>\r\n                </tr>\r\n                <tr>\r\n                    <th>{{ $t('lieferzeiten.table.orderNumber') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.domain') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.positions') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.parcels') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.supplierDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.supplierWeek') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.newDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.comment') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.history') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.status') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.shippingType') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.audit') }}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <template v-for=\"order in displayedOrders\">\r\n                    <tr :key=\"order.id\">\r\n                        <td>\r\n                            <sw-button size=\"small\" variant=\"ghost\" @click=\"toggleOrder(order.id)\">\r\n                                {{ isExpanded(order.id) ? '-' : '+' }}\r\n                            </sw-button>\r\n                            {{ order.orderNumber }}\r\n                        </td>\r\n                        <td>{{ order.domain }}</td>\r\n                        <td>{{ order.positions.length }}</td>\r\n                        <td>{{ parcelSummary(order) }}</td>\r\n                        <td>\r\n                            <sw-datepicker v-model:value=\"order.lieferterminLieferantRange.from\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                            <sw-datepicker v-model:value=\"order.lieferterminLieferantRange.to\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                            <div>KW Preview: {{ weekLabelFromDate(order.lieferterminLieferantRange.to) }}</div>\r\n                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"primary\" :disabled=\"!canSaveLiefertermin(order)\" @click=\"saveLiefertermin(order)\">\r\n                                {{ $t('global.default.save') }}\r\n                            </sw-button>\r\n                        </td>\r\n                        <td>{{ weekLabelFromDate(order.lieferterminLieferantRange.to) }}</td>\r\n                        <td>\r\n                            <sw-datepicker v-model:value=\"order.neuerLieferterminRange.from\" :disabled=\"!hasEditAccess() || !order.lieferterminLieferantRange.from\" size=\"small\" />\r\n                            <sw-datepicker v-model:value=\"order.neuerLieferterminRange.to\" :disabled=\"!hasEditAccess() || !order.lieferterminLieferantRange.to\" size=\"small\" />\r\n                            <div>KW Preview: {{ weekLabelFromDate(order.neuerLieferterminRange.to) }}</div>\r\n                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"primary\" :disabled=\"!canSaveNeuerLiefertermin(order)\" @click=\"saveNeuerLiefertermin(order)\">\r\n                                {{ $t('global.default.save') }}\r\n                            </sw-button>\r\n                        </td>\r\n                        <td>\r\n                            <sw-text-field v-model:value=\"order.comment\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" @click=\"saveComment(order)\">\r\n                                {{ $t('global.default.save') }}\r\n                            </sw-button>\r\n                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"ghost\" @click=\"requestAdditionalDeliveryDate(order)\">\r\n                                {{ $t('lieferzeiten.additionalRequest.button') }}\r\n                            </sw-button>\r\n                        </td>\r\n                        <td>\r\n                            <ul>\r\n                                <li v-for=\"entry in order.lieferterminLieferantHistory\" :key=\"entry\">{{ entry }}</li>\r\n                                <li v-for=\"entry in order.neuerLieferterminHistory\" :key=\"entry\">{{ entry }}</li>\r\n                                <li v-for=\"entry in order.commentHistory\" :key=\"entry\">{{ entry }}</li>\r\n                            </ul>\r\n                        </td>\r\n                        <td>\r\n                            <sw-label :variant=\"isOrderOpen(order) ? 'warning' : 'success'\">\r\n                                {{ isOrderOpen(order) ? $t('lieferzeiten.status.open') : $t('lieferzeiten.status.closed') }}\r\n                            </sw-label>\r\n                        </td>\r\n                        <td>{{ shippingLabel(order) }}</td>\r\n                        <td>{{ order.audit || '-' }}</td>\r\n                    </tr>\r\n                    <tr v-if=\"isExpanded(order.id)\" :key=\"`${order.id}-positions`\">\r\n                        <td colspan=\"12\">\r\n                            <table class=\"sw-data-grid__table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{{ $t('lieferzeiten.table.position') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.article') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.quantity') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.packageNumbers') }}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"position in order.positions\" :key=\"position.id\">\r\n                                        <td>{{ position.number }}</td>\r\n                                        <td>{{ position.label }}</td>\r\n                                        <td>{{ position.quantity }}</td>\r\n                                        <td>\r\n                                            <template v-for=\"entry in resolveTrackingEntries(order, position)\">\r\n                                                <button\r\n                                                    :key=\"`${position.id}-${entry.number}`\"\r\n                                                    type=\"button\"\r\n                                                    class=\"lieferzeiten-order-table__tracking-link\"\r\n                                                    @click=\"openTrackingHistory(entry)\"\r\n                                                >\r\n                                                    {{ entry.number }}\r\n                                                </button>\r\n                                            </template>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </td>\r\n                    </tr>\r\n                </template>\r\n            </tbody>\r\n        </table>\r\n\r\n\r\n        <div\r\n            v-if=\"showTrackingModal\"\r\n            class=\"lieferzeiten-order-table__tracking-overlay\"\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n        >\r\n            <div class=\"lieferzeiten-order-table__tracking-dialog\">\r\n                <header class=\"lieferzeiten-order-table__tracking-header\">\r\n                    <h3>\r\n                        Tracking {{ activeTracking && activeTracking.carrier && activeTracking.carrier.toUpperCase() }} / {{ activeTracking && activeTracking.number }}\r\n                    </h3>\r\n                    <button type=\"button\" class=\"lieferzeiten-order-table__tracking-close\" @click=\"closeTrackingModal\">×</button>\r\n                </header>\r\n\r\n                <div class=\"lieferzeiten-order-table__tracking-body\">\r\n                    <div v-if=\"isTrackingLoading\">{{ $t('lieferzeiten.tracking.loading') }}</div>\r\n                    <div v-else-if=\"trackingError\" class=\"lieferzeiten-order-table__tracking-error\">{{ trackingError }}</div>\r\n                    <div v-else-if=\"!trackingEvents.length\">{{ $t('lieferzeiten.tracking.empty') }}</div>\r\n                    <ul v-else class=\"lieferzeiten-order-table__tracking-list\">\r\n                        <li v-for=\"(event, index) in trackingEvents\" :key=\"`${event.timestamp}-${index}`\">\r\n                            <strong>{{ event.status }}</strong>\r\n                            <div>{{ event.label }}</div>\r\n                            <small>{{ event.timestamp }}<span v-if=\"event.location\"> · {{ event.location }}</span></small>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <sw-empty-state\r\n            v-if=\"displayedOrders.length === 0\"\r\n            :title=\"$t('lieferzeiten.emptyState.title')\"\r\n            :description=\"$t('lieferzeiten.emptyState.description')\"\r\n        />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-order-table.html.twig';\r\nimport './lieferzeiten-order-table.scss';\r\n\r\nShopware.Component.register('lieferzeiten-order-table', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['lieferzeitenTrackingService', 'lieferzeitenOrdersService'],\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        onlyOpen: {\r\n            type: Boolean,\r\n            required: false,\r\n            default: false,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            expandedOrderIds: [],\r\n            editableOrders: {},\r\n            showTrackingModal: false,\r\n            isTrackingLoading: false,\r\n            trackingError: '',\r\n            trackingEvents: [],\r\n            activeTracking: null,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        displayedOrders() {\r\n            return this.orders\r\n                .filter((order) => (this.onlyOpen ? this.isOrderOpen(order) : true))\r\n                .map((order) => this.getEditableOrder(order));\r\n        },\r\n    },\r\n\r\n    methods: {\r\n\r\n        hasViewAccess() {\r\n            return this.acl.can('lieferzeiten.viewer') || this.acl.can('admin');\r\n        },\r\n\r\n        hasEditAccess() {\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n        isOrderOpen(order) {\r\n            return order.parcels.some((parcel) => !parcel.closed);\r\n        },\r\n\r\n        getEditableOrder(order) {\r\n            if (!this.editableOrders[order.id]) {\r\n                const supplierRange = this.resolveInitialRange(order, 'lieferterminLieferant', 14);\r\n                const newRange = this.resolveInitialRange(order, 'neuerLiefertermin', 4);\r\n\r\n                this.$set(this.editableOrders, order.id, {\r\n                    ...order,\r\n                    lieferterminLieferantRange: supplierRange,\r\n                    neuerLieferterminRange: newRange,\r\n                    originalLieferterminLieferantRange: { ...supplierRange },\r\n                    originalNeuerLieferterminRange: { ...newRange },\r\n                    additionalDeliveryRequest: order.additionalDeliveryRequest || null,\r\n                });\r\n            }\r\n\r\n            this.notifyInitiatorIfClosed(this.editableOrders[order.id]);\r\n\r\n            return this.editableOrders[order.id];\r\n        },\r\n\r\n        resolveInitialRange(order, fieldPrefix, fallbackMaxDays) {\r\n            const from = this.normalizeDate(order[`${fieldPrefix}From`]);\r\n            const to = this.normalizeDate(order[`${fieldPrefix}To`] || order[fieldPrefix]);\r\n\r\n            if (from && to) {\r\n                return { from, to };\r\n            }\r\n\r\n            const fallbackDays = Number(order[`${fieldPrefix}Days`]);\r\n            if (Number.isInteger(fallbackDays) && fallbackDays >= 1 && fallbackDays <= fallbackMaxDays) {\r\n                return this.buildRangeFromDayOffset(fallbackDays);\r\n            }\r\n\r\n            return { from: null, to: null };\r\n        },\r\n\r\n        normalizeDate(value) {\r\n            if (!value) {\r\n                return null;\r\n            }\r\n\r\n            const date = new Date(value);\r\n            if (Number.isNaN(date.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return date.toISOString().slice(0, 10);\r\n        },\r\n\r\n        buildRangeFromDayOffset(days) {\r\n            const fromDate = new Date();\r\n            fromDate.setDate(fromDate.getDate() + 1);\r\n            const toDate = new Date();\r\n            toDate.setDate(toDate.getDate() + days);\r\n\r\n            return {\r\n                from: fromDate.toISOString().slice(0, 10),\r\n                to: toDate.toISOString().slice(0, 10),\r\n            };\r\n        },\r\n\r\n        toggleOrder(orderId) {\r\n            if (this.expandedOrderIds.includes(orderId)) {\r\n                this.expandedOrderIds = this.expandedOrderIds.filter((id) => id !== orderId);\r\n                return;\r\n            }\r\n\r\n            this.expandedOrderIds = [...this.expandedOrderIds, orderId];\r\n        },\r\n\r\n        isExpanded(orderId) {\r\n            return this.expandedOrderIds.includes(orderId);\r\n        },\r\n\r\n        parcelSummary(order) {\r\n            const openParcels = order.parcels.filter((parcel) => !parcel.closed).length;\r\n            return `${openParcels}/${order.parcels.length}`;\r\n        },\r\n\r\n        resolveTrackingEntries(order, position) {\r\n            const carrier = String(position.trackingCarrier || order.trackingCarrier || '').toLowerCase();\r\n            return (position.packages || []).map((pkg) => {\r\n                if (typeof pkg === 'string') {\r\n                    return { number: pkg, carrier };\r\n                }\r\n\r\n                return {\r\n                    number: String(pkg?.number || ''),\r\n                    carrier: String(pkg?.carrier || carrier).toLowerCase(),\r\n                };\r\n            }).filter((entry) => entry.number !== '');\r\n        },\r\n\r\n        async openTrackingHistory(entry) {\r\n            if (!entry?.number || !entry?.carrier) {\r\n                this.trackingError = this.$t('lieferzeiten.tracking.missingCarrier');\r\n                this.showTrackingModal = true;\r\n                return;\r\n            }\r\n\r\n            this.activeTracking = entry;\r\n            this.showTrackingModal = true;\r\n            this.isTrackingLoading = true;\r\n            this.trackingError = '';\r\n            this.trackingEvents = [];\r\n\r\n            try {\r\n                const response = await this.lieferzeitenTrackingService.history(entry.carrier, entry.number);\r\n                if (response?.ok === false) {\r\n                    this.trackingError = response?.message || this.$t('lieferzeiten.tracking.loadError');\r\n                    return;\r\n                }\r\n                this.trackingEvents = Array.isArray(response?.events) ? response.events : [];\r\n            } catch (error) {\r\n                this.trackingError = error?.response?.data?.message || error?.message || this.$t('lieferzeiten.tracking.loadError');\r\n            } finally {\r\n                this.isTrackingLoading = false;\r\n            }\r\n        },\r\n\r\n        closeTrackingModal() {\r\n            this.showTrackingModal = false;\r\n            this.isTrackingLoading = false;\r\n            this.trackingError = '';\r\n            this.trackingEvents = [];\r\n            this.activeTracking = null;\r\n        },\r\n\r\n        shippingLabel(order) {\r\n            if (order.versandart === 'teil') {\r\n                return `${this.$t('lieferzeiten.shipping.partial')} (${order.partialShipment})`;\r\n            }\r\n\r\n            const labels = {\r\n                unklar: this.$t('lieferzeiten.shipping.unclear'),\r\n                gesamt: this.$t('lieferzeiten.shipping.complete'),\r\n                trennung: this.$t('lieferzeiten.shipping.split'),\r\n            };\r\n\r\n            return labels[order.versandart] || this.$t('lieferzeiten.shipping.unclear');\r\n        },\r\n\r\n        rangeToDays(range) {\r\n            if (!range?.from || !range?.to) {\r\n                return null;\r\n            }\r\n\r\n            const from = new Date(range.from);\r\n            const to = new Date(range.to);\r\n            if (Number.isNaN(from.getTime()) || Number.isNaN(to.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return Math.floor((to.getTime() - from.getTime()) / 86400000) + 1;\r\n        },\r\n\r\n        isRangeValid(range, minDays, maxDays) {\r\n            const days = this.rangeToDays(range);\r\n            return Number.isInteger(days) && days >= minDays && days <= maxDays;\r\n        },\r\n\r\n        isRangeChanged(range, originalRange) {\r\n            return (range?.from || null) !== (originalRange?.from || null)\r\n                || (range?.to || null) !== (originalRange?.to || null);\r\n        },\r\n\r\n        canSaveLiefertermin(order) {\r\n            return this.isRangeValid(order.lieferterminLieferantRange, 1, 14)\r\n                && this.isRangeChanged(order.lieferterminLieferantRange, order.originalLieferterminLieferantRange);\r\n        },\r\n\r\n        canSaveNeuerLiefertermin(order) {\r\n            const supplierRange = order.lieferterminLieferantRange;\r\n            const newRange = order.neuerLieferterminRange;\r\n\r\n            if (!this.isRangeValid(supplierRange, 1, 14)\r\n                || !this.isRangeValid(newRange, 1, 4)\r\n                || !this.isRangeChanged(newRange, order.originalNeuerLieferterminRange)) {\r\n                return false;\r\n            }\r\n\r\n            return newRange.from >= supplierRange.from && newRange.to <= supplierRange.to;\r\n        },\r\n\r\n\r\n\r\n        resolveConcurrencyToken(order) {\r\n            return order.updatedAt || order.lastChangedAt || order.currentUpdatedAt || null;\r\n        },\r\n\r\n        applyConflictRefresh(order, refresh) {\r\n            if (!refresh || refresh.exists === false) {\r\n                return;\r\n            }\r\n\r\n            if (refresh.updatedAt) {\r\n                order.updatedAt = refresh.updatedAt;\r\n            }\r\n            if (refresh.lastChangedAt) {\r\n                order.lastChangedAt = refresh.lastChangedAt;\r\n            }\r\n            if (Object.prototype.hasOwnProperty.call(refresh, 'comment')) {\r\n                order.comment = refresh.comment || '';\r\n            }\r\n\r\n            if (refresh.lieferterminLieferant) {\r\n                order.lieferterminLieferantRange = {\r\n                    from: refresh.lieferterminLieferant.from || null,\r\n                    to: refresh.lieferterminLieferant.to || null,\r\n                };\r\n                order.originalLieferterminLieferantRange = { ...order.lieferterminLieferantRange };\r\n            }\r\n\r\n            if (refresh.neuerLiefertermin) {\r\n                order.neuerLieferterminRange = {\r\n                    from: refresh.neuerLiefertermin.from || null,\r\n                    to: refresh.neuerLiefertermin.to || null,\r\n                };\r\n                order.originalNeuerLieferterminRange = { ...order.neuerLieferterminRange };\r\n            }\r\n        },\r\n\r\n        handleConflictError(error, order) {\r\n            const data = error?.response?.data;\r\n            if (data?.code !== 'CONCURRENT_MODIFICATION') {\r\n                return false;\r\n            }\r\n\r\n            this.applyConflictRefresh(order, data?.refresh || null);\r\n            this.createNotificationWarning({\r\n                title: this.$t('global.default.warning'),\r\n                message: data?.message || 'Conflit d’édition détecté. Ligne rafraîchie, veuillez réappliquer vos modifications.',\r\n            });\r\n\r\n            return true;\r\n        },\r\n        weekLabelFromDate(dateValue) {\r\n            if (!dateValue) {\r\n                return '-';\r\n            }\r\n\r\n            const base = new Date(dateValue);\r\n            if (Number.isNaN(base.getTime())) {\r\n                return '-';\r\n            }\r\n\r\n            const date = new Date(Date.UTC(base.getFullYear(), base.getMonth(), base.getDate()));\r\n            const dayNum = date.getUTCDay() || 7;\r\n            date.setUTCDate(date.getUTCDate() + 4 - dayNum);\r\n            const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\r\n            const week = Math.ceil((((date - yearStart) / 86400000) + 1) / 7);\r\n\r\n            return `KW ${week}`;\r\n        },\r\n\r\n        async saveLiefertermin(order) {\r\n            if (!this.hasEditAccess() || !this.canSaveLiefertermin(order)) {\r\n                return;\r\n            }\r\n\r\n            const positionId = this.getTargetPositionId(order);\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateLieferterminLieferant(positionId, {\r\n                    from: order.lieferterminLieferantRange.from,\r\n                    to: order.lieferterminLieferantRange.to,\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedSupplierDate') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async saveNeuerLiefertermin(order) {\r\n            if (!this.hasEditAccess() || !this.canSaveNeuerLiefertermin(order)) {\r\n                return;\r\n            }\r\n\r\n            const positionId = this.getTargetPositionId(order);\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateNeuerLiefertermin(positionId, {\r\n                    from: order.neuerLieferterminRange.from,\r\n                    to: order.neuerLieferterminRange.to,\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedNewDate') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async saveComment(order) {\r\n            if (!this.hasEditAccess()) {\r\n                return;\r\n            }\r\n\r\n            const positionId = this.getTargetPositionId(order);\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateComment(positionId, {\r\n                    comment: order.comment || '',\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedComment') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async requestAdditionalDeliveryDate(order) {\r\n            if (!this.hasEditAccess()) {\r\n                return;\r\n            }\r\n\r\n            const positionId = this.getTargetPositionId(order);\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            const initiator = this.$t('lieferzeiten.additionalRequest.defaultInitiator');\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.createAdditionalDeliveryRequest(positionId, initiator);\r\n                this.createNotificationSuccess({\r\n                    title: this.$t('lieferzeiten.additionalRequest.notificationTitle'),\r\n                    message: this.$t('lieferzeiten.additionalRequest.notificationRequested', { initiator }),\r\n                });\r\n\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        notifyInitiatorIfClosed(order) {\r\n            const request = order.additionalDeliveryRequest;\r\n            if (!request || request.notifiedAt || this.isOrderOpen(order)) {\r\n                return;\r\n            }\r\n\r\n            request.notifiedAt = new Date().toISOString();\r\n            this.updateAudit(order, this.$t('lieferzeiten.additionalRequest.auditClosed'));\r\n\r\n            this.createNotificationInfo({\r\n                title: this.$t('lieferzeiten.additionalRequest.notificationTitle'),\r\n                message: this.$t('lieferzeiten.additionalRequest.notificationClosed', {\r\n                    initiator: request.initiator || this.$t('lieferzeiten.additionalRequest.defaultInitiator'),\r\n                }),\r\n            });\r\n        },\r\n\r\n        updateAudit(order, action) {\r\n            order.audit = `${action} • ${new Date().toLocaleString('de-DE')}`;\r\n        },\r\n\r\n        getTargetPositionId(order) {\r\n            return order?.positions?.[0]?.id || null;\r\n        },\r\n\r\n        async reloadOrder(order) {\r\n            if (typeof this.onReloadOrder === 'function') {\r\n                await this.onReloadOrder(order);\r\n                return;\r\n            }\r\n\r\n            this.updateAudit(order, this.$t('lieferzeiten.audit.savedComment'));\r\n        },\r\n    },\r\n});\r\n","import './page/lieferzeiten-index';\r\nimport './page/lieferzeiten-all';\r\nimport './page/lieferzeiten-open';\r\nimport './page/lieferzeiten-statistics';\r\nimport './component/lieferzeiten-domain-selection';\r\nimport './component/lieferzeiten-order-table';\r\n\r\nconst { Module } = Shopware;\r\n\r\nModule.register('lieferzeiten', {\r\n    type: 'plugin',\r\n    name: 'lieferzeiten',\r\n    title: 'lieferzeiten.general.mainMenuItemGeneral',\r\n    description: 'lieferzeiten.general.description',\r\n    color: '#2B8CBF',\r\n    icon: 'regular-clock',\r\n\r\n    privileges: {\r\n        viewer: {\r\n            permissions: ['lieferzeiten.viewer'],\r\n            dependencies: [],\r\n        },\r\n        editor: {\r\n            permissions: ['lieferzeiten.editor'],\r\n            dependencies: ['lieferzeiten.viewer'],\r\n        },\r\n    },\r\n\r\n    routes: {\r\n        index: {\r\n            component: 'lieferzeiten-index',\r\n            path: 'index',\r\n            redirect: { name: 'lieferzeiten.all' },\r\n            children: {\r\n                all: {\r\n                    component: 'lieferzeiten-all',\r\n                    path: 'all',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n                open: {\r\n                    component: 'lieferzeiten-open',\r\n                    path: 'open',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n                statistics: {\r\n                    component: 'lieferzeiten-statistics',\r\n                    path: 'statistics',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    },\r\n\r\n    navigation: [\r\n        {\r\n            id: 'lieferzeiten',\r\n            label: 'lieferzeiten.general.mainMenuItemGeneral',\r\n            color: '#2B8CBF',\r\n            path: 'lieferzeiten.index',\r\n            icon: 'regular-clock',\r\n            parent: 'sw-order',\r\n            position: 100,\r\n            privilege: 'lieferzeiten.viewer',\r\n        },\r\n    ],\r\n});\r\n","<sw-page class=\"lieferzeiten-channel-settings-list\">\r\n    <template #smart-bar-header>\r\n        <h2>Channel Settings</h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <sw-button v-if=\"hasEditAccess\" :isLoading=\"isSeedingDemoData\" :variant=\"hasDemoData ? 'danger' : 'default'\" @click=\"onToggleDemoData\">{{ hasDemoData ? 'DemoDaten entfernen' : 'DemoDaten speichern' }}</sw-button>\r\n        <sw-button v-if=\"hasEditAccess\" variant=\"primary\" @click=\"onCreate\">Create</sw-button>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card>\r\n            <sw-entity-listing\r\n                v-if=\"items\"\r\n                :items=\"items\"\r\n                :repository=\"repository\"\r\n                :columns=\"columns\"\r\n                :isLoading=\"isLoading\"\r\n                :showSelection=\"false\"\r\n                :allowInlineEdit=\"hasEditAccess\"\r\n                :allowDelete=\"hasEditAccess\"\r\n                :total=\"total\"\r\n                :page=\"page\"\r\n                :limit=\"limit\"\r\n                @page-change=\"onPageChange\"\r\n                @inline-edit-save=\"onInlineEditSave\"\r\n                @inline-edit-cancel=\"getList\"\r\n                @delete=\"onDelete\"\r\n            />\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import template from './lieferzeiten-channel-settings-list.html.twig';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nComponent.register('lieferzeiten-channel-settings-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory', 'lieferzeitenOrdersService'],\r\n\r\n    data() {\r\n        return {\r\n            repository: null,\r\n            items: null,\r\n            isLoading: false,\r\n            total: 0,\r\n            page: 1,\r\n            limit: 25,\r\n            isSeedingDemoData: false,\r\n            hasDemoData: false,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        hasEditAccess() {\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        columns() {\r\n            return [\r\n                { property: 'salesChannelId', label: 'Sales Channel', inlineEdit: 'string', primary: true },\r\n                { property: 'defaultStatus', label: 'Default Status', inlineEdit: 'string' },\r\n                { property: 'enableNotifications', label: 'Notifications', inlineEdit: 'boolean' },\r\n                { property: 'lastChangedBy', label: 'Last Changed By', inlineEdit: 'string' },\r\n                { property: 'lastChangedAt', label: 'Last Changed At', inlineEdit: 'date' },\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.repository = this.repositoryFactory.create('lieferzeiten_channel_settings');\r\n        this.getList();\r\n        this.loadDemoDataStatus();\r\n    },\r\n\r\n    methods: {\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        async loadDemoDataStatus() {\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.getDemoDataStatus();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'DemoDaten');\r\n            }\r\n        },\r\n\r\n        async onToggleDemoData() {\r\n            if (!this.hasEditAccess) {\r\n                return;\r\n            }\r\n\r\n            this.isSeedingDemoData = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.toggleDemoData();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n\r\n                if (response?.action === 'removed') {\r\n                    const deleted = response?.deleted || {};\r\n                    const totalDeleted = Object.values(deleted).reduce((sum, value) => sum + Number(value || 0), 0);\r\n                    this.createNotificationSuccess({\r\n                        title: 'DemoDaten',\r\n                        message: totalDeleted > 0 ? `Entfernt (${totalDeleted} Datensätze).` : 'Keine Demo-Daten vorhanden.',\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                const created = response?.created || {};\r\n                const totalCreated = Object.values(created).reduce((sum, value) => sum + Number(value || 0), 0);\r\n\r\n                this.createNotificationSuccess({\r\n                    title: 'DemoDaten',\r\n                    message: `Erfolgreich generiert (${totalCreated} Datensätze).`,\r\n                });\r\n            } catch (error) {\r\n                const message = error?.response?.data?.message || error?.message || 'DemoDaten konnten nicht verarbeitet werden.';\r\n                this.createNotificationError({\r\n                    title: 'DemoDaten',\r\n                    message,\r\n                });\r\n            } finally {\r\n                this.isSeedingDemoData = false;\r\n            }\r\n        },\r\n\r\n        async getList() {\r\n            this.isLoading = true;\r\n            const criteria = new Criteria(this.page, this.limit);\r\n            criteria.addSorting(Criteria.sort('createdAt', 'DESC'));\r\n\r\n            try {\r\n                const result = await this.repository.search(criteria, Shopware.Context.api);\r\n                this.items = result;\r\n                this.total = result.total;\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n        onPageChange({ page, limit }) {\r\n            this.page = page;\r\n            this.limit = limit;\r\n            this.getList();\r\n        },\r\n        async onInlineEditSave(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.save(item, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n        async onDelete(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.delete(item.id, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n        async onCreate() {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            const entity = this.repository.create(Shopware.Context.api);\r\n            entity.salesChannelId = '';\r\n            entity.enableNotifications = false;\r\n            try {\r\n                await this.repository.save(entity, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n    },\r\n});\r\n","<sw-page class=\"lieferzeiten-task-assignment-rule-list\">\r\n    <template #smart-bar-header>\r\n        <h2>Task Assignment Rules</h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <sw-button v-if=\"hasEditAccess\" variant=\"primary\" @click=\"onCreate\">Create</sw-button>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card>\r\n            <sw-entity-listing\r\n                v-if=\"items\"\r\n                :items=\"items\"\r\n                :repository=\"repository\"\r\n                :columns=\"columns\"\r\n                :isLoading=\"isLoading\"\r\n                :showSelection=\"false\"\r\n                :allowInlineEdit=\"hasEditAccess\"\r\n                :allowDelete=\"hasEditAccess\"\r\n                :total=\"total\"\r\n                :page=\"page\"\r\n                :limit=\"limit\"\r\n                @page-change=\"onPageChange\"\r\n                @inline-edit-save=\"onInlineEditSave\"\r\n                @inline-edit-cancel=\"getList\"\r\n                @delete=\"onDelete\"\r\n            />\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import template from './lieferzeiten-task-assignment-rule-list.html.twig';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nComponent.register('lieferzeiten-task-assignment-rule-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory'],\r\n\r\n    data() {\r\n        return {\r\n            repository: null,\r\n            items: null,\r\n            isLoading: false,\r\n            total: 0,\r\n            page: 1,\r\n            limit: 25,\r\n            triggerOptions: [\r\n                'versand.datum.ueberfaellig',\r\n                'liefertermin.anfrage.zusaetzlich',\r\n                'liefertermin.anfrage.geschlossen',\r\n            ],\r\n            assigneeTypeOptions: ['user', 'team'],\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        hasEditAccess() {\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        columns() {\r\n            return [\r\n                { property: 'name', label: 'Name', inlineEdit: 'string', primary: true },\r\n                { property: 'status', label: 'Status', inlineEdit: 'string' },\r\n                { property: 'triggerKey', label: 'Trigger', inlineEdit: 'string' },\r\n                { property: 'ruleId', label: 'Rule (Rules Engine)', inlineEdit: 'string' },\r\n                { property: 'assigneeType', label: 'Assignee type', inlineEdit: 'string' },\r\n                { property: 'assigneeIdentifier', label: 'Assignee', inlineEdit: 'string' },\r\n                { property: 'priority', label: 'Priority', inlineEdit: 'number' },\r\n                { property: 'active', label: 'Active', inlineEdit: 'boolean' },\r\n                { property: 'lastChangedBy', label: 'Last Changed By', inlineEdit: 'string' },\r\n                { property: 'lastChangedAt', label: 'Last Changed At', inlineEdit: 'date' },\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.repository = this.repositoryFactory.create('lieferzeiten_task_assignment_rule');\r\n        this.getList();\r\n    },\r\n\r\n    methods: {\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        async getList() {\r\n            this.isLoading = true;\r\n            const criteria = new Criteria(this.page, this.limit);\r\n            criteria.addSorting(Criteria.sort('createdAt', 'DESC'));\r\n\r\n            try {\r\n                const result = await this.repository.search(criteria, Shopware.Context.api);\r\n                this.items = result;\r\n                this.total = result.total;\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Task Assignment Rules');\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n        onPageChange({ page, limit }) {\r\n            this.page = page;\r\n            this.limit = limit;\r\n            this.getList();\r\n        },\r\n        async onInlineEditSave(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.save(item, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Task Assignment Rules');\r\n            }\r\n        },\r\n        async onDelete(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.delete(item.id, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Task Assignment Rules');\r\n            }\r\n        },\r\n        async onCreate() {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            const entity = this.repository.create(Shopware.Context.api);\r\n            entity.name = 'New rule';\r\n            entity.triggerKey = this.triggerOptions[0];\r\n            entity.assigneeType = this.assigneeTypeOptions[0];\r\n            entity.active = false;\r\n            try {\r\n                await this.repository.save(entity, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Task Assignment Rules');\r\n            }\r\n        },\r\n    },\r\n});\r\n","<sw-page class=\"lieferzeiten-notification-toggle-list\">\r\n    <template #smart-bar-header>\r\n        <h2>Notification Toggles par trigger/canal</h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <sw-button v-if=\"hasEditAccess\" variant=\"primary\" @click=\"onCreate\">Create</sw-button>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card>\r\n            <sw-entity-listing\r\n                v-if=\"items\"\r\n                :items=\"items\"\r\n                :repository=\"repository\"\r\n                :columns=\"columns\"\r\n                :isLoading=\"isLoading\"\r\n                :showSelection=\"false\"\r\n                :allowInlineEdit=\"hasEditAccess\"\r\n                :allowDelete=\"hasEditAccess\"\r\n                :total=\"total\"\r\n                :page=\"page\"\r\n                :limit=\"limit\"\r\n                @page-change=\"onPageChange\"\r\n                @inline-edit-save=\"onInlineEditSave\"\r\n                @inline-edit-cancel=\"getList\"\r\n                @delete=\"onDelete\"\r\n            />\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import template from './lieferzeiten-notification-toggle-list.html.twig';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nComponent.register('lieferzeiten-notification-toggle-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory'],\r\n\r\n    data() {\r\n        return {\r\n            repository: null,\r\n            items: null,\r\n            isLoading: false,\r\n            total: 0,\r\n            page: 1,\r\n            limit: 50,\r\n            triggerOptions: [\r\n                'commande.creee',\r\n                'commande.changement_statut',\r\n                'tracking.mis_a_jour',\r\n                'changements.date_livraison',\r\n                'douane.requise',\r\n                'rappel.vorkasse',\r\n                'versand.datum.ueberfaellig',\r\n                'liefertermin.anfrage.zusaetzlich',\r\n                'liefertermin.anfrage.geschlossen',\r\n            ],\r\n            channelOptions: ['email', 'sms', 'webhook'],\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        hasEditAccess() {\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        columns() {\r\n            return [\r\n                { property: 'triggerKey', label: 'Trigger', inlineEdit: 'string', primary: true },\r\n                { property: 'channel', label: 'Canal', inlineEdit: 'string' },\r\n                { property: 'salesChannelId', label: 'Sales Channel Scope', inlineEdit: 'string' },\r\n                { property: 'enabled', label: 'Enabled', inlineEdit: 'boolean' },\r\n                { property: 'lastChangedBy', label: 'Last Changed By', inlineEdit: 'string' },\r\n                { property: 'lastChangedAt', label: 'Last Changed At', inlineEdit: 'date' },\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.repository = this.repositoryFactory.create('lieferzeiten_notification_toggle');\r\n        this.getList();\r\n    },\r\n\r\n    methods: {\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        async getList() {\r\n            this.isLoading = true;\r\n            const criteria = new Criteria(this.page, this.limit);\r\n            criteria.addSorting(Criteria.sort('triggerKey', 'ASC'));\r\n            criteria.addSorting(Criteria.sort('channel', 'ASC'));\r\n\r\n            try {\r\n                const result = await this.repository.search(criteria, Shopware.Context.api);\r\n                this.items = result;\r\n                this.total = result.total;\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n        onPageChange({ page, limit }) {\r\n            this.page = page;\r\n            this.limit = limit;\r\n            this.getList();\r\n        },\r\n        async onInlineEditSave(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            item.code = `${item.triggerKey}:${item.channel}`;\r\n            try {\r\n                await this.repository.save(item, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n        async onDelete(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.delete(item.id, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n        async onCreate() {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            const entity = this.repository.create(Shopware.Context.api);\r\n            entity.triggerKey = 'commande.creee';\r\n            entity.channel = 'email';\r\n            entity.salesChannelId = null;\r\n            entity.code = `${entity.triggerKey}:${entity.channel}`;\r\n            entity.enabled = true;\r\n            try {\r\n                await this.repository.save(entity, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, 'Lieferzeiten Settings');\r\n            }\r\n        },\r\n    },\r\n});\r\n","import './page/lieferzeiten-channel-settings-list';\r\nimport './page/lieferzeiten-task-assignment-rule-list';\r\nimport './page/lieferzeiten-notification-toggle-list';\r\n\r\nconst { Module } = Shopware;\r\n\r\nModule.register('lieferzeiten-settings', {\r\n    type: 'plugin',\r\n    name: 'lieferzeiten-settings',\r\n    title: 'Lieferzeiten Settings',\r\n    description: 'Einstellungen für Lieferzeiten',\r\n    color: '#009ee3',\r\n    icon: 'regular-cog',\r\n\r\n    routes: {\r\n        channelSettings: {\r\n            component: 'lieferzeiten-channel-settings-list',\r\n            path: 'channel-settings',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n        taskAssignmentRules: {\r\n            component: 'lieferzeiten-task-assignment-rule-list',\r\n            path: 'task-assignment-rules',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n        notificationToggles: {\r\n            component: 'lieferzeiten-notification-toggle-list',\r\n            path: 'notification-toggles',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n    },\r\n\r\n    navigation: [\r\n        {\r\n            id: 'lieferzeiten-settings',\r\n            label: 'Lieferzeiten Settings',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.channelSettings',\r\n            icon: 'regular-cog',\r\n            parent: 'sw-settings',\r\n            position: 90,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-channel',\r\n            label: 'Channel Settings',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.channelSettings',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 10,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-task',\r\n            label: 'Task Assignment Rules',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.taskAssignmentRules',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 20,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-notifications',\r\n            label: 'Notification Toggles',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.notificationToggles',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 30,\r\n        },\r\n    ],\r\n});\r\n","/* eslint-disable */\r\nimport deSnippets from '../module/lieferzeiten/snippet/de-DE.json';\r\nimport enSnippets from '../module/lieferzeiten/snippet/en-GB.json';\r\n\r\nShopware.Locale.extend('de-DE', deSnippets);\r\nShopware.Locale.extend('en-GB', enSnippets);\r\n","const { ApiService } = Shopware.Classes;\r\n\r\nclass LieferzeitenTrackingService extends ApiService {\r\n    constructor(httpClient, loginService, apiEndpoint = 'lieferzeiten') {\r\n        super(httpClient, loginService, apiEndpoint);\r\n        this.name = 'lieferzeitenTrackingService';\r\n    }\r\n\r\n    async history(carrier, trackingNumber) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/tracking/${encodeURIComponent(carrier)}/${encodeURIComponent(trackingNumber)}`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        const data = ApiService.handleResponse(response) ?? response?.data;\r\n        return data?.data ?? data;\r\n    }\r\n}\r\n\r\nShopware.Application.addServiceProvider('lieferzeitenTrackingService', (container) => {\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient ?? container.httpClient;\r\n    const loginService = container.loginService ?? Shopware.Service('loginService');\r\n\r\n    return new LieferzeitenTrackingService(httpClient, loginService);\r\n});\r\n","const { ApiService } = Shopware.Classes;\r\n\r\nclass LieferzeitenOrdersService extends ApiService {\r\n    constructor(httpClient, loginService) {\r\n        super(httpClient, loginService, 'lieferzeiten');\r\n        this.name = 'lieferzeitenOrdersService';\r\n    }\r\n\r\n    async getOrders() {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/orders`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        const data = ApiService.handleResponse(response) ?? response?.data;\r\n        return data?.data ?? data ?? [];\r\n    }\r\n\r\n\r\n    async getStatistics(params = {}) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/statistics`, {\r\n            params,\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n\r\n\r\n    async getDemoDataStatus() {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/demo-data/status`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async toggleDemoData() {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/demo-data/toggle`, {}, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async seedDemoData(reset = false) {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/demo-data`, { reset }, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async updateLieferterminLieferant(positionId, payload) {\r\n        return this.post(`position/${positionId}/liefertermin-lieferant`, payload);\r\n    }\r\n\r\n    async updateNeuerLiefertermin(positionId, payload) {\r\n        return this.post(`position/${positionId}/neuer-liefertermin`, payload);\r\n    }\r\n\r\n    async updateComment(positionId, payload) {\r\n        return this.post(`position/${positionId}/comment`, payload);\r\n    }\r\n\r\n    async createAdditionalDeliveryRequest(positionId, initiator) {\r\n        return this.post(`position/${positionId}/additional-delivery-request`, { initiator });\r\n    }\r\n\r\n    async post(path, payload) {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/${path}`, payload, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data;\r\n    }\r\n}\r\n\r\nShopware.Application.addServiceProvider('lieferzeitenOrdersService', (container) => {\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient ?? container.httpClient;\r\n    const loginService = container.loginService ?? Shopware.Service('loginService');\r\n\r\n    return new LieferzeitenOrdersService(httpClient, loginService);\r\n});\r\n","const INTERCEPTOR_FLAG = '__lieferzeitenStoreApiFallbackInterceptorInstalled';\r\nconst STORE_UPDATES_PATH = '/api/_action/store/updates';\r\nconst EXTENSION_INSTALLED_PATH = '/api/_action/extension/installed';\r\n\r\nfunction isKnownStoreEndpoint(url = '') {\r\n    return url.includes(STORE_UPDATES_PATH) || url.includes(EXTENSION_INSTALLED_PATH);\r\n}\r\n\r\nfunction createFallbackResponse(error) {\r\n    const config = error?.config || {};\r\n    const url = String(config.url || '');\r\n\r\n    if (url.includes(STORE_UPDATES_PATH)) {\r\n        return {\r\n            data: {\r\n                total: 0,\r\n                updates: [],\r\n                items: [],\r\n            },\r\n            status: 200,\r\n            statusText: 'OK',\r\n            headers: {},\r\n            config,\r\n        };\r\n    }\r\n\r\n    return {\r\n        data: {\r\n            data: [],\r\n            total: 0,\r\n        },\r\n        status: 200,\r\n        statusText: 'OK',\r\n        headers: {},\r\n        config,\r\n    };\r\n}\r\n\r\nfunction installStoreApiFallbackInterceptor() {\r\n    if (window[INTERCEPTOR_FLAG]) {\r\n        return;\r\n    }\r\n\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient;\r\n\r\n    if (!httpClient?.interceptors?.response) {\r\n        return;\r\n    }\r\n\r\n    httpClient.interceptors.response.use(\r\n        (response) => response,\r\n        (error) => {\r\n            const status = error?.response?.status;\r\n            const url = String(error?.config?.url || '');\r\n\r\n            if (status === 500 && isKnownStoreEndpoint(url)) {\r\n                // eslint-disable-next-line no-console\r\n                console.warn('[LieferzeitenAdmin] Store API unavailable, using empty fallback response for:', url);\r\n                return Promise.resolve(createFallbackResponse(error));\r\n            }\r\n\r\n            return Promise.reject(error);\r\n        },\r\n    );\r\n\r\n    window[INTERCEPTOR_FLAG] = true;\r\n}\r\n\r\ninstallStoreApiFallbackInterceptor();\r\n","const { Component, Mixin } = Shopware;\r\n\r\nComponent.register('lieferzeiten-demo-data-button', {\r\n    template: `\r\n        <div class=\"lieferzeiten-demo-data-button\">\r\n            <label class=\"sw-field__label\" v-if=\"label\">{{ label }}</label>\r\n            <sw-button\r\n                variant=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"isLoading\"\r\n                @click=\"onToggleDemoData\"\r\n            >\r\n                {{ buttonLabel }}\r\n            </sw-button>\r\n            <div v-if=\"helpText\" class=\"sw-field__help-text\">\r\n                {{ helpText }}\r\n            </div>\r\n        </div>\r\n    `,\r\n\r\n    inject: ['lieferzeitenOrdersService'],\r\n\r\n    mixins: [\r\n        Mixin.getByName('notification'),\r\n    ],\r\n\r\n    props: {\r\n        element: {\r\n            type: Object,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            isLoading: false,\r\n            hasDemoData: false,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        label() {\r\n            return this.element?.label ?? '';\r\n        },\r\n        helpText() {\r\n            return this.element?.helpText ?? '';\r\n        },\r\n        buttonLabel() {\r\n            return this.hasDemoData ? 'Demo-Daten entfernen' : 'Demo-Daten speichern';\r\n        },\r\n    },\r\n\r\n    async created() {\r\n        await this.loadStatus();\r\n    },\r\n\r\n    methods: {\r\n        async loadStatus() {\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.getDemoDataStatus();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: 'Demo-Daten Status',\r\n                    message: error?.message || 'Status konnte nicht geladen werden.',\r\n                });\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        async onToggleDemoData() {\r\n            if (this.isLoading) {\r\n                return;\r\n            }\r\n\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.toggleDemoData();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n\r\n                if (response?.action === 'removed') {\r\n                    const removed = response?.deleted || {};\r\n                    const totalRemoved = Object.values(removed).reduce((sum, value) => sum + Number(value || 0), 0);\r\n\r\n                    this.createNotificationSuccess({\r\n                        title: 'Demo-Daten entfernt',\r\n                        message: totalRemoved > 0\r\n                            ? `${totalRemoved} Demo-Datensätze wurden entfernt.`\r\n                            : 'Keine Demo-Daten waren vorhanden.',\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                const created = response?.created || {};\r\n                const totalCreated = Object.values(created).reduce((sum, value) => sum + Number(value || 0), 0);\r\n\r\n                this.createNotificationSuccess({\r\n                    title: 'Demo-Daten gespeichert',\r\n                    message: totalCreated > 0\r\n                        ? `${totalCreated} Demo-Datensätze wurden gespeichert.`\r\n                        : 'Keine neuen Demo-Datensätze wurden gespeichert.',\r\n                });\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: 'Demo-Daten',\r\n                    message: error?.response?.data?.message || error?.message || 'Aktion konnte nicht ausgeführt werden.',\r\n                });\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n    },\r\n});\r\n"],"names":["template$8","template","order","result","error","template$7","total","openParcels","parcel","template$6","template$5","item","activity","payload","dateString","value","headers","rows","csv","line","blob","link","template$4","STORAGE_KEY","newValue","localValue","sessionValue","template$3","supplierRange","newRange","fieldPrefix","fallbackMaxDays","from","to","fallbackDays","date","days","fromDate","toDate","orderId","id","position","carrier","pkg","entry","_a","_b","response","range","minDays","maxDays","originalRange","refresh","data","dateValue","base","dayNum","yearStart","positionId","initiator","request","action","Module","template$2","Component","Criteria","_c","_d","_e","_f","fallbackTitle","deleted","totalDeleted","sum","created","totalCreated","message","criteria","page","limit","entity","template$1","deSnippets","enSnippets","ApiService","LieferzeitenTrackingService","httpClient","loginService","apiEndpoint","trackingNumber","container","initContainer","LieferzeitenOrdersService","params","reset","path","INTERCEPTOR_FLAG","STORE_UPDATES_PATH","EXTENSION_INSTALLED_PATH","isKnownStoreEndpoint","url","createFallbackResponse","config","installStoreApiFallbackInterceptor","status","Mixin","removed","totalRemoved"],"mappings":"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"}