{"version":3,"file":"lieferzeiten-admin-BkMS5O8v.js","sources":["../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-index/lieferzeiten-index.html.twig","../../../app/administration/src/module/lieferzeiten/utils/domain-source-mapping.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-index/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-all/lieferzeiten-all.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-all/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-open/lieferzeiten-open.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-open/index.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-statistics/lieferzeiten-statistics.html.twig","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-statistics/timeline.util.js","../../../app/administration/src/module/lieferzeiten/page/lieferzeiten-statistics/index.js","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-domain-selection/lieferzeiten-domain-selection.html.twig","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-domain-selection/index.js","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-order-table/lieferzeiten-order-table.html.twig","../../../app/administration/src/module/lieferzeiten/component/lieferzeiten-order-table/index.js","../../../app/administration/src/module/lieferzeiten/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-channel-settings-list/lieferzeiten-channel-settings-list.html.twig","../../../app/administration/src/module/lieferzeiten/utils/lms-target-channel-mapping.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-channel-settings-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-task-assignment-rule-list/lieferzeiten-task-assignment-rule-list.html.twig","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-task-assignment-rule-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-notification-toggle-list/lieferzeiten-notification-toggle-list.html.twig","../../../app/administration/src/module/lieferzeiten-settings/page/lieferzeiten-notification-toggle-list/index.js","../../../app/administration/src/module/lieferzeiten-settings/index.js","../../../app/administration/src/init/translation.init.js","../../../app/administration/src/core/service/lieferzeiten-tracking.service.js","../../../app/administration/src/core/service/lieferzeiten-orders.service.js","../../../app/administration/src/init/store-api-fallback.init.js","../../../app/administration/src/component/lieferzeiten-demo-data-button/index.js"],"sourcesContent":["{% block lieferzeiten_index %}\r\n    <sw-page class=\"lieferzeiten-index\">\r\n        <template #smart-bar-header>\r\n            <h2>\r\n                {{ $t('lieferzeiten.general.mainMenuItemGeneral') }}\r\n            </h2>\r\n        </template>\r\n\r\n        <template #smart-bar-actions>\r\n            <lieferzeiten-domain-selection v-model=\"selectedDomain\" />\r\n        </template>\r\n\r\n        <template #content>\r\n            <sw-card-view>\r\n                <sw-card class=\"lieferzeiten-index__info\" :title=\"$t('lieferzeiten.general.infoTitle')\">\r\n                    <p>{{ $t('lieferzeiten.general.timezoneInfo') }}</p>\r\n                    <p>{{ $t('lieferzeiten.general.openDefinition') }}</p>\r\n                </sw-card>\r\n\r\n\r\n                <sw-card class=\"lieferzeiten-index__filters\" :title=\"$t('global.sw-data-grid.filterPanel.title')\">\r\n                    <sw-container columns=\"repeat(auto-fit, minmax(220px, 1fr))\" gap=\"16px\">\r\n                        <sw-text-field v-model:value=\"filters.bestellnummer\" label=\"Bestellnummer\" />\r\n                        <sw-text-field v-model:value=\"filters.san6\" label=\"San6 Auftragsnummer\" />\r\n                        <sw-text-field v-model:value=\"filters.user\" label=\"Username\" />\r\n                        <sw-text-field v-model:value=\"filters.sendenummer\" label=\"Sendenummer\" />\r\n                        <sw-text-field v-model:value=\"filters.status\" label=\"Status\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.shippingDateFrom\" label=\"spätester Versandzeitpunkt (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.shippingDateTo\" label=\"spätester Versandzeitpunkt (bis)\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.businessDateFrom\" label=\"Versand-Datum (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.businessDateTo\" label=\"Versand-Datum (bis)\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.deliveryDateFrom\" label=\"spätester Lieferzeitpunkt (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.deliveryDateTo\" label=\"spätester Lieferzeitpunkt (bis)\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.businessDateEndFrom\" label=\"Liefer-Datum (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.businessDateEndTo\" label=\"Liefer-Datum (bis)\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.lieferterminLieferantFrom\" label=\"Liefertermin Lieferant (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.lieferterminLieferantTo\" label=\"Liefertermin Lieferant (bis)\" />\r\n\r\n                        <sw-datepicker v-model:value=\"filters.neuerLieferterminFrom\" label=\"Liefertermin Auftragsbearbeitung (von)\" />\r\n                        <sw-datepicker v-model:value=\"filters.neuerLieferterminTo\" label=\"Liefertermin Auftragsbearbeitung (bis)\" />\r\n                    </sw-container>\r\n\r\n                    <div class=\"lieferzeiten-index__filter-actions\">\r\n                        <sw-button variant=\"primary\" @click=\"applyFilters\">Filtern</sw-button>\r\n                        <sw-button variant=\"ghost\" @click=\"resetFilters\">Zurücksetzen</sw-button>\r\n                    </div>\r\n                </sw-card>\r\n\r\n                <sw-card class=\"lieferzeiten-index__tabs\">\r\n                    <sw-loader v-if=\"isLoading\" />\r\n\r\n                    <sw-empty-state\r\n                        v-else-if=\"loadError\"\r\n                        :title=\"$t('lieferzeiten.loading.errorTitle')\"\r\n                        :subline=\"$t('lieferzeiten.loading.errorDescription')\"\r\n                    >\r\n                        <template #actions>\r\n                            <sw-button variant=\"primary\" @click=\"reloadData\">\r\n                                {{ $t('lieferzeiten.loading.retry') }}\r\n                            </sw-button>\r\n                        </template>\r\n                    </sw-empty-state>\r\n\r\n                    <template v-else>\r\n                        <sw-tabs>\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.all' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.all')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.all') }}\r\n                            </sw-tabs-item>\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.open' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.open')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.open') }}\r\n                            </sw-tabs-item>\r\n\r\n                            <sw-tabs-item\r\n                                :to=\"{ name: 'lieferzeiten.statistics' }\"\r\n                                :title=\"$t('lieferzeiten.tabs.statistics')\"\r\n                            >\r\n                                {{ $t('lieferzeiten.tabs.statistics') }}\r\n                            </sw-tabs-item>\r\n                        </sw-tabs>\r\n\r\n                        <router-view\r\n                            :orders=\"filteredOrders\"\r\n                            :selected-domain=\"selectedDomain\"\r\n                            :on-reload-order=\"loadOrders\"\r\n                            :statistics-metrics=\"statisticsMetrics\"\r\n                        />\r\n                    </template>\r\n                </sw-card>\r\n            </sw-card-view>\r\n        </template>\r\n    </sw-page>\r\n{% endblock %}\r\n","export const DOMAIN_GROUPS = [\r\n    {\r\n        id: 'first-medical-e-commerce',\r\n        labelSnippet: 'lieferzeiten.domainSelection.groups.firstMedicalECommerce',\r\n        channels: [\r\n            {\r\n                value: 'first-medical-shop.de',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.firstMedicalShop',\r\n            },\r\n            {\r\n                value: 'ebay.de',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.ebayDe',\r\n            },\r\n            {\r\n                value: 'ebay.at',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.ebayAt',\r\n            },\r\n            {\r\n                value: 'kaufland',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.kaufland',\r\n            },\r\n            {\r\n                value: 'peg',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.peg',\r\n            },\r\n            {\r\n                value: 'zonami',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.zonami',\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        id: 'medical-solutions',\r\n        labelSnippet: 'lieferzeiten.domainSelection.groups.medicalSolutions',\r\n        channels: [\r\n            {\r\n                value: 'medical-solutions-germany.de',\r\n                labelSnippet: 'lieferzeiten.domainSelection.channels.medicalSolutionsGermany',\r\n            },\r\n        ],\r\n    },\r\n];\r\n\r\nexport const DEFAULT_DOMAIN_KEY = 'first-medical-shop.de';\r\nexport const DEFAULT_GROUP_ID = 'first-medical-e-commerce';\r\n\r\nconst DOMAIN_SOURCE_MAPPING = {\r\n    'first-medical-shop.de': ['first-medical-shop.de', 'first medical', 'e-commerce', 'shopware', 'gambio', 'first-medical-e-commerce'],\r\n    'ebay.de': ['ebay.de', 'ebay de'],\r\n    'ebay.at': ['ebay.at', 'ebay at'],\r\n    kaufland: ['kaufland'],\r\n    peg: ['peg'],\r\n    zonami: ['zonami'],\r\n    'medical-solutions-germany.de': ['medical-solutions-germany.de', 'medical solutions', 'medical-solutions', 'medical_solutions'],\r\n};\r\n\r\nconst LEGACY_DOMAIN_KEY_MAPPING = {\r\n    'first medical': DEFAULT_DOMAIN_KEY,\r\n    'e-commerce': DEFAULT_DOMAIN_KEY,\r\n    'first medical - e-commerce': DEFAULT_DOMAIN_KEY,\r\n    'first-medical-e-commerce': DEFAULT_DOMAIN_KEY,\r\n    'medical solutions': 'medical-solutions-germany.de',\r\n    'medical-solutions': 'medical-solutions-germany.de',\r\n};\r\n\r\nconst LEGACY_GROUP_KEY_MAPPING = {\r\n    'first medical': DEFAULT_GROUP_ID,\r\n    'e-commerce': DEFAULT_GROUP_ID,\r\n    'first medical - e-commerce': DEFAULT_GROUP_ID,\r\n    'first-medical-e-commerce': DEFAULT_GROUP_ID,\r\n    'medical solutions': 'medical-solutions',\r\n    'medical-solutions': 'medical-solutions',\r\n};\r\n\r\nexport function getChannelsForGroup(groupId) {\r\n    return DOMAIN_GROUPS.find((group) => group.id === groupId)?.channels || [];\r\n}\r\n\r\nexport function getDefaultDomainForGroup(groupId) {\r\n    return getChannelsForGroup(groupId)[0]?.value || null;\r\n}\r\n\r\nexport function normalizeGroupKey(groupId) {\r\n    const normalized = String(groupId || '').trim().toLowerCase();\r\n    if (!normalized) {\r\n        return null;\r\n    }\r\n\r\n    if (LEGACY_GROUP_KEY_MAPPING[normalized]) {\r\n        return LEGACY_GROUP_KEY_MAPPING[normalized];\r\n    }\r\n\r\n    return DOMAIN_GROUPS.some((group) => group.id === normalized) ? normalized : null;\r\n}\r\n\r\nexport function resolveGroupKeyForDomain(domain) {\r\n    const normalizedDomain = normalizeDomainKey(domain);\r\n    if (!normalizedDomain) {\r\n        return null;\r\n    }\r\n\r\n    return DOMAIN_GROUPS.find((group) => group.channels.some((channel) => channel.value === normalizedDomain))?.id || null;\r\n}\r\n\r\nexport function normalizeDomainKey(domain) {\r\n    const normalized = String(domain || '').trim().toLowerCase();\r\n    if (!normalized) {\r\n        return null;\r\n    }\r\n\r\n    if (LEGACY_DOMAIN_KEY_MAPPING[normalized]) {\r\n        return LEGACY_DOMAIN_KEY_MAPPING[normalized];\r\n    }\r\n\r\n    if (DOMAIN_SOURCE_MAPPING[normalized]) {\r\n        return normalized;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport function resolveDomainKeyForSourceSystem(sourceSystem) {\r\n    const normalizedSource = String(sourceSystem || '').trim().toLowerCase();\r\n    if (!normalizedSource) {\r\n        return null;\r\n    }\r\n\r\n    const mappedDomain = Object.entries(DOMAIN_SOURCE_MAPPING)\r\n        .find(([, sources]) => sources.includes(normalizedSource));\r\n\r\n    return mappedDomain ? mappedDomain[0] : normalizeDomainKey(normalizedSource);\r\n}\r\n","import template from './lieferzeiten-index.html.twig';\r\nimport { normalizeDomainKey, resolveDomainKeyForSourceSystem } from '../../utils/domain-source-mapping';\r\n\r\nconst DOMAIN_SOURCE_MAP = {\r\n    'first-medical-shop.de': ['first-medical-shop.de', 'first medical', 'e-commerce', 'shopware', 'gambio', 'first-medical-e-commerce'],\r\n    'ebay.de': ['ebay.de', 'ebay de'],\r\n    'ebay.at': ['ebay.at', 'ebay at'],\r\n    kaufland: ['kaufland'],\r\n    peg: ['peg'],\r\n    zonami: ['zonami'],\r\n    'medical-solutions-germany.de': ['medical-solutions-germany.de', 'medical solutions', 'medical-solutions'],\r\n};\r\n\r\nconst DOMAIN_LABEL_ALIASES = {\r\n    'First Medical': 'first-medical-shop.de',\r\n    'E-Commerce': 'first-medical-shop.de',\r\n    'First Medical - E-Commerce': 'first-medical-shop.de',\r\n    'Medical Solutions': 'medical-solutions-germany.de',\r\n};\r\n\r\nShopware.Component.register('lieferzeiten-index', {\r\n    template,\r\n\r\n    inject: [\r\n        'lieferzeitenOrdersService',\r\n    ],\r\n\r\n    data() {\r\n        return {\r\n            selectedDomain: null,\r\n            orders: [],\r\n            isLoading: false,\r\n            isStatisticsLoading: false,\r\n            loadError: null,\r\n            statisticsMetrics: {\r\n                openOrders: 0,\r\n                overdueShipping: 0,\r\n                overdueDelivery: 0,\r\n            },\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadOrders();\r\n        this.loadStatistics();\r\n    },\r\n\r\n    watch: {\r\n        selectedDomain() {\r\n            this.loadOrders();\r\n            this.loadStatistics();\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        filteredOrders() {\r\n            const domainKey = normalizeDomainKey(this.selectedDomain);\r\n            if (!domainKey) {\r\n                return [];\r\n            }\r\n\r\n            return this.orders.filter((order) => order.domainKey === domainKey);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n\r\n        async loadStatistics() {\r\n            try {\r\n                const payload = await this.lieferzeitenOrdersService.getStatistics({\r\n                    period: 30,\r\n                    domain: normalizeDomainKey(this.selectedDomain),\r\n                    channel: 'all',\r\n                });\r\n\r\n                this.statisticsMetrics = {\r\n                    openOrders: payload?.metrics?.openOrders ?? 0,\r\n                    overdueShipping: payload?.metrics?.overdueShipping ?? 0,\r\n                    overdueDelivery: payload?.metrics?.overdueDelivery ?? 0,\r\n                };\r\n            } catch (error) {\r\n                this.statisticsMetrics = {\r\n                    openOrders: 0,\r\n                    overdueShipping: 0,\r\n                    overdueDelivery: 0,\r\n                };\r\n            }\r\n        },\r\n\r\n        resolveOrderDomainKey(order) {\r\n            const orderDomain = String(order?.domain || order?.sourceSystem || '').trim();\r\n            if (orderDomain === '') {\r\n                return null;\r\n            }\r\n\r\n            const aliasMatch = DOMAIN_LABEL_ALIASES[orderDomain];\r\n            if (aliasMatch) {\r\n                return aliasMatch;\r\n            }\r\n\r\n            const normalizedOrderDomain = orderDomain.toLowerCase();\r\n\r\n            return Object.keys(DOMAIN_SOURCE_MAP).find((domainKey) => DOMAIN_SOURCE_MAP[domainKey]\r\n                .map((source) => source.toLowerCase())\r\n                .includes(normalizedOrderDomain)) || null;\r\n        },\r\n\r\n        async reloadData() {\r\n            await Promise.all([\r\n                this.loadOrders(),\r\n                this.loadStatistics(),\r\n            ]);\r\n        },\r\n\r\n        async loadOrders() {\r\n            this.isLoading = true;\r\n            this.loadError = null;\r\n\r\n            try {\r\n                const domainKey = normalizeDomainKey(this.selectedDomain);\r\n                const result = await this.lieferzeitenOrdersService.getOrders({\r\n                    ...this.buildFilterParams(),\r\n                    domain: domainKey,\r\n                });\r\n                const orders = Array.isArray(result) ? result : [];\r\n\r\n                this.orders = orders.map((order) => ({\r\n                    ...order,\r\n                    domainKey: resolveDomainKeyForSourceSystem(order.sourceSystem || order.domain),\r\n                }));\r\n            } catch (error) {\r\n                this.orders = [];\r\n                this.loadError = error;\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        buildFilterParams() {\r\n            return Object.entries(this.filters).reduce((params, [key, value]) => {\r\n                if (value === null || value === undefined) {\r\n                    return params;\r\n                }\r\n\r\n                const normalizedValue = typeof value === 'string' ? value.trim() : value;\r\n                if (normalizedValue === '') {\r\n                    return params;\r\n                }\r\n\r\n                params[key] = normalizedValue;\r\n\r\n                return params;\r\n            }, {});\r\n        },\r\n\r\n        applyFilters() {\r\n            this.loadOrders();\r\n        },\r\n\r\n        resetFilters() {\r\n            this.filters = {\r\n                bestellnummer: '',\r\n                san6: '',\r\n                shippingDateFrom: null,\r\n                shippingDateTo: null,\r\n                businessDateFrom: null,\r\n                businessDateTo: null,\r\n                deliveryDateFrom: null,\r\n                deliveryDateTo: null,\r\n                businessDateEndFrom: null,\r\n                businessDateEndTo: null,\r\n                lieferterminLieferantFrom: null,\r\n                lieferterminLieferantTo: null,\r\n                neuerLieferterminFrom: null,\r\n                neuerLieferterminTo: null,\r\n                user: '',\r\n                sendenummer: '',\r\n                status: '',\r\n            };\r\n\r\n            this.loadOrders();\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_all %}\r\n    <div class=\"lieferzeiten-all\">\r\n        <sw-container columns=\"repeat(auto-fit, minmax(180px, 1fr))\" gap=\"16px\">\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.open') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.openOrders }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.overdueShipping') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.overdueShipping }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.overdueDelivery') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.overdueDelivery }}</p>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <lieferzeiten-order-table :orders=\"orders\" :on-reload-order=\"onReloadOrder\" />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-all.html.twig';\r\n\r\nShopware.Component.register('lieferzeiten-all', {\r\n    template,\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        statisticsMetrics: {\r\n            type: Object,\r\n            required: false,\r\n            default: () => ({\r\n                openOrders: 0,\r\n                overdueShipping: 0,\r\n                overdueDelivery: 0,\r\n            }),\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_open %}\r\n    <div class=\"lieferzeiten-open\">\r\n        <sw-container columns=\"repeat(auto-fit, minmax(180px, 1fr))\" gap=\"16px\">\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.open') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.openOrders }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.overdueShipping') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.overdueShipping }}</p>\r\n            </sw-card>\r\n            <sw-card class=\"lieferzeiten-kpi\">\r\n                <p class=\"lieferzeiten-kpi__label\">{{ $t('lieferzeiten.statistics.overdueDelivery') }}</p>\r\n                <p class=\"lieferzeiten-kpi__value\">{{ statisticsMetrics.overdueDelivery }}</p>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <lieferzeiten-order-table :orders=\"orders\" :only-open=\"true\" :on-reload-order=\"onReloadOrder\" />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-open.html.twig';\r\n\r\nShopware.Component.register('lieferzeiten-open', {\r\n    template,\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n        statisticsMetrics: {\r\n            type: Object,\r\n            required: false,\r\n            default: () => ({\r\n                openOrders: 0,\r\n                overdueShipping: 0,\r\n                overdueDelivery: 0,\r\n            }),\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_statistics %}\r\n    <div class=\"lieferzeiten-statistics\">\r\n        <sw-container columns=\"1fr auto auto\" gap=\"16px\" class=\"lieferzeiten-statistics__filters\">\r\n            <sw-single-select\r\n                v-model:value=\"selectedPeriod\"\r\n                :label=\"$t('lieferzeiten.statistics.periodLabel')\"\r\n                :options=\"periodOptions\"\r\n                labelProperty=\"label\"\r\n                valueProperty=\"value\"\r\n            />\r\n            <sw-single-select\r\n                v-model:value=\"selectedChannel\"\r\n                :label=\"$t('lieferzeiten.statistics.channelLabel')\"\r\n                :options=\"channelOptions\"\r\n                labelProperty=\"label\"\r\n                valueProperty=\"value\"\r\n            />\r\n            <sw-button variant=\"primary\" @click=\"exportCsv\">\r\n                {{ $t('lieferzeiten.statistics.exportCsv') }}\r\n            </sw-button>\r\n        </sw-container>\r\n\r\n        <sw-loader v-if=\"isLoading\" />\r\n\r\n        <sw-empty-state\r\n            v-else-if=\"loadError\"\r\n            :title=\"$t('lieferzeiten.loading.errorTitle')\"\r\n            :description=\"$t('lieferzeiten.loading.errorDescription')\"\r\n        />\r\n\r\n        <template v-else>\r\n        <sw-container columns=\"repeat(3, 1fr)\" gap=\"16px\" class=\"lieferzeiten-statistics__metrics\">\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.open')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.open }}</div>\r\n            </sw-card>\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.overdueShipping')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.overdueShipping }}</div>\r\n            </sw-card>\r\n            <sw-card :title=\"$t('lieferzeiten.statistics.overdueDelivery')\">\r\n                <div class=\"lieferzeiten-statistics__metric\">{{ metrics.overdueDelivery }}</div>\r\n            </sw-card>\r\n        </sw-container>\r\n\r\n        <sw-card :title=\"$t('lieferzeiten.statistics.chartTitle')\" class=\"lieferzeiten-statistics__chart-card\">\r\n            <div v-if=\"channelChartData.length\" class=\"lieferzeiten-statistics__chart\">\r\n                <div v-for=\"item in channelChartData\" :key=\"item.channel\" class=\"lieferzeiten-statistics__chart-row\">\r\n                    <span>{{ item.channel }}</span>\r\n                    <div class=\"lieferzeiten-statistics__bar-wrap\">\r\n                        <div class=\"lieferzeiten-statistics__bar\" :style=\"{ width: getChartBarWidth(item.value) }\"></div>\r\n                    </div>\r\n                    <strong>{{ item.value }}</strong>\r\n                </div>\r\n            </div>\r\n            <sw-empty-state\r\n                v-else\r\n                :title=\"$t('lieferzeiten.emptyState.title')\"\r\n                :description=\"$t('lieferzeiten.emptyState.description')\"\r\n            />\r\n        </sw-card>\r\n\r\n        <sw-card :title=\"$t('lieferzeiten.statistics.timelineTitle')\" class=\"lieferzeiten-statistics__timeline-card\">\r\n            <div v-if=\"timelineSeries.length > 1\" class=\"lieferzeiten-statistics__timeline-chart\">\r\n                <svg viewBox=\"0 0 100 60\" preserveAspectRatio=\"none\" class=\"lieferzeiten-statistics__timeline-svg\">\r\n                    <path :d=\"timelineChartPaths.areaPath\" class=\"lieferzeiten-statistics__timeline-area\" />\r\n                    <path :d=\"timelineChartPaths.linePath\" class=\"lieferzeiten-statistics__timeline-line\" />\r\n                </svg>\r\n                <div class=\"lieferzeiten-statistics__timeline-axis\">\r\n                    <span>{{ formatTimelineLabel(timelineSeries[0].date) }}</span>\r\n                    <span>{{ formatTimelineLabel(timelineSeries[timelineSeries.length - 1].date) }}</span>\r\n                </div>\r\n            </div>\r\n            <div v-else-if=\"timelineSeries.length === 1\" class=\"lieferzeiten-statistics__timeline-fallback\">\r\n                <strong>{{ timelineSeries[0].value }}</strong>\r\n                <span>{{ formatTimelineLabel(timelineSeries[0].date) }}</span>\r\n            </div>\r\n            <sw-empty-state\r\n                v-else\r\n                :title=\"$t('lieferzeiten.statistics.timelineEmptyTitle')\"\r\n                :description=\"$t('lieferzeiten.statistics.timelineEmptyDescription')\"\r\n            />\r\n        </sw-card>\r\n\r\n        <sw-card :title=\"$t('lieferzeiten.statistics.tableTitle')\">\r\n            <sw-data-grid\r\n                :data-source=\"filteredOrders\"\r\n                :columns=\"tableColumns\"\r\n                :show-selection=\"false\"\r\n            >\r\n                <template #column-status=\"{ item }\">\r\n                    <sw-label :appearance=\"item.status === $t('lieferzeiten.statistics.status.overdue') ? 'error' : 'info'\">\r\n                        {{ item.status }}\r\n                    </sw-label>\r\n                </template>\r\n\r\n                <template #column-eventAt=\"{ item }\">\r\n                    {{ formatDate(item.eventAt) }}\r\n                </template>\r\n\r\n                <template #column-promisedAt=\"{ item }\">\r\n                    {{ formatDate(item.promisedAt) }}\r\n                </template>\r\n\r\n                <template #column-actions=\"{ item }\">\r\n                    <div class=\"lieferzeiten-statistics__actions\">\r\n                        <sw-button\r\n                            v-for=\"action in resolveActivityActions(item)\"\r\n                            :key=\"`${item.id}-${action.id}`\"\r\n                            size=\"x-small\"\r\n                            :variant=\"action.disabled ? 'ghost' : 'secondary'\"\r\n                            :disabled=\"action.disabled || action.isLoading\"\r\n                            :is-loading=\"action.isLoading\"\r\n                            v-tooltip=\"actionTooltip(action)\"\r\n                            @click=\"action.onClick && action.onClick()\"\r\n                        >\r\n                            <sw-icon v-if=\"action.icon\" :name=\"action.icon\" size=\"12px\" />\r\n                            {{ action.label }}\r\n                        </sw-button>\r\n                    </div>\r\n                </template>\r\n\r\n                <template #actions=\"{ item }\">\r\n                    <sw-context-menu-item @click=\"onDrilldown(item)\">\r\n                        {{ $t('lieferzeiten.statistics.drilldown') }}\r\n                    </sw-context-menu-item>\r\n                </template>\r\n            </sw-data-grid>\r\n        </sw-card>\r\n\r\n        <sw-modal\r\n            v-if=\"selectedActivity\"\r\n            :title=\"$t('lieferzeiten.statistics.drilldownTitle')\"\r\n            @modal-close=\"closeDrilldown\"\r\n        >\r\n            <p><strong>{{ $t('lieferzeiten.table.orderNumber') }}:</strong> {{ selectedActivity.orderNumber }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.table.domain') }}:</strong> {{ selectedActivity.domain }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.table.status') }}:</strong> {{ selectedActivity.status }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.statistics.activityDate') }}:</strong> {{ formatDate(selectedActivity.eventAt) }}</p>\r\n            <p><strong>{{ $t('lieferzeiten.statistics.promisedDate') }}:</strong> {{ formatDate(selectedActivity.promisedAt) }}</p>\r\n        </sw-modal>\r\n        </template>\r\n    </div>\r\n{% endblock %}\r\n","const toNumber = (value) => {\r\n    const parsed = Number(value);\r\n\r\n    if (Number.isFinite(parsed)) {\r\n        return parsed;\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nconst toTimelineDate = (point) => {\r\n    return point.date || point.day || point.eventAt || point.createdAt || null;\r\n};\r\n\r\nconst toTimelineValue = (point) => {\r\n    return toNumber(point.count ?? point.value ?? point.total ?? point.orders ?? 0);\r\n};\r\n\r\nconst toIsoDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n\r\n    if (Number.isNaN(date.getTime())) {\r\n        return null;\r\n    }\r\n\r\n    return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesFilter = (point, selectedChannel, selectedDomain) => {\r\n    if (selectedChannel && selectedChannel !== 'all' && point.channel && point.channel !== selectedChannel) {\r\n        return false;\r\n    }\r\n\r\n    if (selectedDomain && point.domain && point.domain !== selectedDomain) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nexport function normalizeTimelinePoints(timeline, { selectedChannel = 'all', selectedDomain = null } = {}) {\r\n    if (!Array.isArray(timeline)) {\r\n        return [];\r\n    }\r\n\r\n    const groupedPoints = timeline.reduce((accumulator, point) => {\r\n        if (!point || !matchesFilter(point, selectedChannel, selectedDomain)) {\r\n            return accumulator;\r\n        }\r\n\r\n        const timelineDate = toTimelineDate(point);\r\n        const isoDate = toIsoDate(timelineDate);\r\n\r\n        if (!isoDate) {\r\n            return accumulator;\r\n        }\r\n\r\n        accumulator[isoDate] = (accumulator[isoDate] || 0) + toTimelineValue(point);\r\n\r\n        return accumulator;\r\n    }, {});\r\n\r\n    return Object.entries(groupedPoints)\r\n        .sort(([left], [right]) => left.localeCompare(right))\r\n        .map(([date, value]) => ({ date, value }));\r\n}\r\n","import template from './lieferzeiten-statistics.html.twig';\r\nimport './lieferzeiten-statistics.scss';\r\nimport { normalizeTimelinePoints } from './timeline.util';\r\n\r\nconst TASK_CLOSABLE_STATUSES = ['open', 'in_progress', 'reopened'];\r\nconst TASK_REOPENABLE_STATUSES = ['done', 'cancelled'];\r\n\r\nShopware.Component.register('lieferzeiten-statistics', {\r\n    template,\r\n\r\n    inject: [\r\n        'lieferzeitenOrdersService',\r\n        'lieferzeitenTrackingService',\r\n        'acl',\r\n    ],\r\n\r\n    mixins: ['notification'],\r\n\r\n    props: {\r\n        selectedDomain: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            periodOptions: [\r\n                { value: 7, label: this.$t('lieferzeiten.statistics.period.7') },\r\n                { value: 30, label: this.$t('lieferzeiten.statistics.period.30') },\r\n                { value: 90, label: this.$t('lieferzeiten.statistics.period.90') },\r\n            ],\r\n            selectedPeriod: 30,\r\n            selectedChannel: 'all',\r\n            selectedActivity: null,\r\n            isLoading: false,\r\n            loadError: null,\r\n            statistics: {\r\n                metrics: {\r\n                    openOrders: 0,\r\n                    overdueShipping: 0,\r\n                    overdueDelivery: 0,\r\n                },\r\n                channels: [],\r\n                timeline: [],\r\n                activitiesData: [],\r\n            },\r\n            tableColumns: [\r\n                { property: 'orderNumber', label: this.$t('lieferzeiten.table.orderNumber'), primary: true },\r\n                { property: 'domain', label: this.$t('lieferzeiten.table.domain') },\r\n                { property: 'status', label: this.$t('lieferzeiten.table.status') },\r\n                { property: 'eventAt', label: this.$t('lieferzeiten.statistics.activityDate') },\r\n                { property: 'promisedAt', label: this.$t('lieferzeiten.statistics.promisedDate') },\r\n                { property: 'actions', label: this.$t('lieferzeiten.statistics.actionsColumn') },\r\n            ],\r\n            actionLoadingByActivity: {},\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadStatistics();\r\n    },\r\n\r\n    watch: {\r\n        selectedPeriod() {\r\n            this.loadStatistics();\r\n        },\r\n        selectedChannel() {\r\n            this.loadStatistics();\r\n        },\r\n        selectedDomain() {\r\n            this.selectedChannel = 'all';\r\n            this.loadStatistics();\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        channelOptions() {\r\n            return [\r\n                { value: 'all', label: this.$t('lieferzeiten.statistics.allChannels') },\r\n                ...this.statistics.channels.map((item) => ({ value: item.channel, label: item.channel })),\r\n            ];\r\n        },\r\n\r\n        metrics() {\r\n            return {\r\n                open: this.statistics.metrics.openOrders,\r\n                overdueShipping: this.statistics.metrics.overdueShipping,\r\n                overdueDelivery: this.statistics.metrics.overdueDelivery,\r\n            };\r\n        },\r\n\r\n        filteredOrders() {\r\n            return this.statistics.activitiesData.map((activity) => ({\r\n                ...activity,\r\n                status: activity.status === 'open'\r\n                    ? this.$t('lieferzeiten.status.open')\r\n                    : (activity.status === 'done' ? this.$t('lieferzeiten.status.closed') : activity.status),\r\n            }));\r\n        },\r\n\r\n        channelChartData() {\r\n            return this.statistics.channels;\r\n        },\r\n\r\n        maxChartValue() {\r\n            if (!this.channelChartData.length) {\r\n                return 1;\r\n            }\r\n\r\n            return Math.max(...this.channelChartData.map((item) => item.value));\r\n        },\r\n\r\n        timelineSeries() {\r\n            return normalizeTimelinePoints(this.statistics.timeline, {\r\n                selectedChannel: this.selectedChannel,\r\n                selectedDomain: this.selectedDomain,\r\n            });\r\n        },\r\n\r\n        timelineMaxValue() {\r\n            if (!this.timelineSeries.length) {\r\n                return 0;\r\n            }\r\n\r\n            return Math.max(...this.timelineSeries.map((item) => item.value));\r\n        },\r\n\r\n        timelineChartPaths() {\r\n            if (this.timelineSeries.length < 2) {\r\n                return null;\r\n            }\r\n\r\n            const width = 100;\r\n            const height = 60;\r\n            const maxValue = this.timelineMaxValue || 1;\r\n            const step = width / (this.timelineSeries.length - 1);\r\n            const points = this.timelineSeries.map((item, index) => {\r\n                const x = Number((index * step).toFixed(2));\r\n                const normalized = Math.min(item.value / maxValue, 1);\r\n                const y = Number((height - (normalized * height)).toFixed(2));\r\n\r\n                return { x, y };\r\n            });\r\n\r\n            const linePath = points\r\n                .map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`)\r\n                .join(' ');\r\n            const areaPath = `${linePath} L ${width} ${height} L 0 ${height} Z`;\r\n\r\n            return { linePath, areaPath };\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        hasViewAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.viewer') || this.acl.can('admin');\r\n        },\r\n\r\n        hasEditAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        resolveActivityActions(item) {\r\n            const actions = [];\r\n            const eventType = String(item?.eventType || '').toLowerCase();\r\n\r\n            if (['paket', 'position', 'audit'].includes(eventType)) {\r\n                actions.push(this.createOrderAction(item));\r\n            }\r\n\r\n            if (eventType === 'task') {\r\n                actions.push(this.createTaskRouteAction(item));\r\n                actions.push(this.createTaskTransitionAction(item));\r\n            }\r\n\r\n            if (item?.trackingNumber) {\r\n                actions.push(this.createTrackingAction(item));\r\n            }\r\n\r\n            if (actions.length === 0) {\r\n                return [{\r\n                    id: 'unavailable',\r\n                    label: this.$t('lieferzeiten.statistics.actionsUnavailable'),\r\n                    icon: 'regular-ban',\r\n                    disabled: true,\r\n                    disabledReason: this.$t('lieferzeiten.statistics.actionUnavailableReason'),\r\n                    onClick: null,\r\n                }];\r\n            }\r\n\r\n            return actions;\r\n        },\r\n\r\n        createOrderAction(item) {\r\n            const hasOrderReference = Boolean(item?.paketId || item?.orderNumber);\r\n\r\n            return {\r\n                id: 'open-order',\r\n                label: this.$t('lieferzeiten.statistics.actions.openOrder'),\r\n                icon: 'regular-shopping-bag',\r\n                disabled: !this.hasViewAccess() || !hasOrderReference,\r\n                disabledReason: !this.hasViewAccess()\r\n                    ? this.$t('lieferzeiten.statistics.actionReasons.noViewAcl')\r\n                    : this.$t('lieferzeiten.statistics.actionReasons.missingOrderReference'),\r\n                onClick: () => this.navigateToOrder(item),\r\n            };\r\n        },\r\n\r\n        createTaskRouteAction(item) {\r\n            return {\r\n                id: 'open-task',\r\n                label: this.$t('lieferzeiten.statistics.actions.openTask'),\r\n                icon: 'regular-briefcase',\r\n                disabled: !this.hasViewAccess() || !item?.taskId,\r\n                disabledReason: !this.hasViewAccess()\r\n                    ? this.$t('lieferzeiten.statistics.actionReasons.noViewAcl')\r\n                    : this.$t('lieferzeiten.statistics.actionReasons.missingTaskReference'),\r\n                onClick: () => this.navigateToTask(item),\r\n            };\r\n        },\r\n\r\n        createTaskTransitionAction(item) {\r\n            const normalizedStatus = String(item?.status || '').toLowerCase();\r\n            const isClosable = TASK_CLOSABLE_STATUSES.includes(normalizedStatus);\r\n            const isReopenable = TASK_REOPENABLE_STATUSES.includes(normalizedStatus);\r\n\r\n            const operation = isReopenable ? 'reopen' : 'close';\r\n            const isActionAvailable = isClosable || isReopenable;\r\n\r\n            return {\r\n                id: `task-${operation}`,\r\n                label: this.$t(`lieferzeiten.statistics.actions.${operation}Task`),\r\n                icon: isReopenable ? 'regular-redo' : 'regular-checkmark',\r\n                disabled: !this.hasEditAccess() || !item?.taskId || !isActionAvailable,\r\n                disabledReason: !this.hasEditAccess()\r\n                    ? this.$t('lieferzeiten.statistics.actionReasons.noEditAcl')\r\n                    : (!item?.taskId\r\n                        ? this.$t('lieferzeiten.statistics.actionReasons.missingTaskReference')\r\n                        : this.$t('lieferzeiten.statistics.actionReasons.unsupportedTaskStatus')),\r\n                onClick: () => this.performTaskAction(item, operation),\r\n                isLoading: Boolean(this.actionLoadingByActivity[this.getActionLoadingKey(item, operation)]),\r\n            };\r\n        },\r\n\r\n        createTrackingAction(item) {\r\n            return {\r\n                id: 'open-tracking',\r\n                label: this.$t('lieferzeiten.statistics.actions.openTracking'),\r\n                icon: 'regular-shipping',\r\n                disabled: !this.hasViewAccess() || !item?.trackingNumber,\r\n                disabledReason: !this.hasViewAccess()\r\n                    ? this.$t('lieferzeiten.statistics.actionReasons.noViewAcl')\r\n                    : this.$t('lieferzeiten.statistics.actionReasons.missingTrackingReference'),\r\n                onClick: () => this.navigateToTracking(item),\r\n            };\r\n        },\r\n\r\n        getActionLoadingKey(item, operation) {\r\n            return `${item?.id || 'unknown'}:${operation}`;\r\n        },\r\n\r\n        async performTaskAction(item, operation) {\r\n            if (!item?.taskId || !['close', 'reopen'].includes(operation)) {\r\n                return;\r\n            }\r\n\r\n            const loadingKey = this.getActionLoadingKey(item, operation);\r\n            this.$set(this.actionLoadingByActivity, loadingKey, true);\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.post(`tasks/${encodeURIComponent(item.taskId)}/${operation}`, {});\r\n                this.createNotificationSuccess({\r\n                    title: this.$t('lieferzeiten.statistics.actionSuccessTitle'),\r\n                    message: this.$t(`lieferzeiten.statistics.actionSuccess.${operation}Task`),\r\n                });\r\n                await this.loadStatistics();\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('lieferzeiten.statistics.actionErrorTitle'),\r\n                    message: this.$t(`lieferzeiten.statistics.actionError.${operation}Task`),\r\n                });\r\n            } finally {\r\n                this.$delete(this.actionLoadingByActivity, loadingKey);\r\n            }\r\n        },\r\n\r\n        navigateToOrder(item) {\r\n            this.$router.push({\r\n                name: 'lieferzeiten.index',\r\n                query: {\r\n                    bestellnummer: item?.orderNumber || undefined,\r\n                    paketId: item?.paketId || undefined,\r\n                },\r\n            });\r\n        },\r\n\r\n        navigateToTask(item) {\r\n            this.$router.push({\r\n                name: 'lieferzeiten.index',\r\n                query: {\r\n                    taskId: item?.taskId || undefined,\r\n                    bestellnummer: item?.orderNumber || undefined,\r\n                },\r\n            });\r\n        },\r\n\r\n        async navigateToTracking(item) {\r\n            const trackingNumber = String(item?.trackingNumber || '').trim();\r\n            if (trackingNumber === '') {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenTrackingService.history('dhl', trackingNumber);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('lieferzeiten.statistics.actionErrorTitle'),\r\n                    message: this.$t('lieferzeiten.statistics.actionError.openTracking'),\r\n                });\r\n                return;\r\n            }\r\n\r\n            window.open(`https://www.dhl.de/de/privatkunden/pakete-empfangen/verfolgen.html?piececode=${encodeURIComponent(trackingNumber)}`, '_blank', 'noopener');\r\n        },\r\n\r\n        actionTooltip(action) {\r\n            if (!action?.disabled) {\r\n                return '';\r\n            }\r\n\r\n            return action.disabledReason || this.$t('lieferzeiten.statistics.actionUnavailableReason');\r\n        },\r\n\r\n        async loadStatistics() {\r\n            this.isLoading = true;\r\n            this.loadError = null;\r\n\r\n            try {\r\n                const payload = await this.lieferzeitenOrdersService.getStatistics({\r\n                    period: this.selectedPeriod,\r\n                    domain: this.selectedDomain,\r\n                    channel: this.selectedChannel,\r\n                });\r\n\r\n                this.statistics = {\r\n                    metrics: payload.metrics ?? {\r\n                        openOrders: 0,\r\n                        overdueShipping: 0,\r\n                        overdueDelivery: 0,\r\n                    },\r\n                    channels: Array.isArray(payload.channels) ? payload.channels : [],\r\n                    timeline: Array.isArray(payload.timeline) ? payload.timeline : [],\r\n                    activitiesData: Array.isArray(payload.activitiesData) ? payload.activitiesData : [],\r\n                };\r\n            } catch (error) {\r\n                this.statistics = {\r\n                    metrics: {\r\n                        openOrders: 0,\r\n                        overdueShipping: 0,\r\n                        overdueDelivery: 0,\r\n                    },\r\n                    channels: [],\r\n                    timeline: [],\r\n                    activitiesData: [],\r\n                };\r\n                this.loadError = error;\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        formatDate(dateString) {\r\n            if (!dateString) {\r\n                return '—';\r\n            }\r\n\r\n            return Shopware.Utils.format.date(dateString);\r\n        },\r\n\r\n        getChartBarWidth(value) {\r\n            return `${Math.max(Math.round((value / this.maxChartValue) * 100), 6)}%`;\r\n        },\r\n\r\n        formatTimelineLabel(dateString) {\r\n            return Shopware.Utils.format.date(dateString);\r\n        },\r\n\r\n        onDrilldown(item) {\r\n            this.selectedActivity = item;\r\n        },\r\n\r\n        closeDrilldown() {\r\n            this.selectedActivity = null;\r\n        },\r\n\r\n        exportCsv() {\r\n            const headers = [\r\n                this.$t('lieferzeiten.table.orderNumber'),\r\n                this.$t('lieferzeiten.table.domain'),\r\n                this.$t('lieferzeiten.table.status'),\r\n                this.$t('lieferzeiten.statistics.activityDate'),\r\n                this.$t('lieferzeiten.statistics.promisedDate'),\r\n            ];\r\n\r\n            const rows = this.filteredOrders.map((order) => [\r\n                order.orderNumber,\r\n                order.domain,\r\n                order.status,\r\n                this.formatDate(order.eventAt),\r\n                this.formatDate(order.promisedAt),\r\n            ]);\r\n\r\n            const csv = [headers, ...rows]\r\n                .map((line) => line.map((value) => `\"${String(value).replace(/\"/g, '\"\"')}\"`).join(';'))\r\n                .join('\\n');\r\n\r\n            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n            const link = document.createElement('a');\r\n\r\n            link.href = URL.createObjectURL(blob);\r\n            link.download = 'lieferzeiten-statistiken.csv';\r\n            link.click();\r\n\r\n            URL.revokeObjectURL(link.href);\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_domain_selection %}\r\n    <div class=\"lieferzeiten-domain-selection\">\r\n        <sw-single-select\r\n            v-model=\"selectedDomain\"\r\n            :options=\"channelOptions\"\r\n            :placeholder=\"$t('lieferzeiten.domainSelection.channelPlaceholder')\"\r\n            :clearable=\"false\"\r\n            :disabled=\"showDomainModal || !selectedGroup\"\r\n        />\r\n\r\n        <sw-button\r\n            size=\"small\"\r\n            variant=\"ghost\"\r\n            class=\"lieferzeiten-domain-selection__reset\"\r\n            @click=\"resetDomainSelection\"\r\n        >\r\n            {{ $t('lieferzeiten.domainSelection.reset') }}\r\n        </sw-button>\r\n\r\n        <sw-modal\r\n            v-if=\"showDomainModal\"\r\n            :title=\"$t('lieferzeiten.domainSelection.modalTitle')\"\r\n            @modal-close=\"confirmDomainSelection\"\r\n        >\r\n            <p>{{ $t('lieferzeiten.domainSelection.modalDescription') }}</p>\r\n\r\n            <sw-label>\r\n                {{ $t('lieferzeiten.domainSelection.steps.group') }}\r\n            </sw-label>\r\n            <sw-single-select\r\n                v-model=\"selectedGroup\"\r\n                :options=\"groupOptions\"\r\n                :placeholder=\"$t('lieferzeiten.domainSelection.groupPlaceholder')\"\r\n                :clearable=\"false\"\r\n                required\r\n            />\r\n\r\n            <template v-if=\"modalStep === 2\">\r\n                <sw-label>\r\n                    {{ $t('lieferzeiten.domainSelection.steps.channel') }}\r\n                </sw-label>\r\n                <sw-single-select\r\n                    v-model=\"selectedDomain\"\r\n                    :options=\"channelOptions\"\r\n                    :placeholder=\"$t('lieferzeiten.domainSelection.channelPlaceholder')\"\r\n                    :clearable=\"false\"\r\n                    required\r\n                />\r\n            </template>\r\n\r\n            <sw-switch-field\r\n                v-model=\"persistSelection\"\r\n                :label=\"$t('lieferzeiten.domainSelection.persistLabel')\"\r\n            />\r\n\r\n            <template #modal-footer>\r\n                <sw-button\r\n                    v-if=\"modalStep === 2\"\r\n                    size=\"small\"\r\n                    variant=\"ghost\"\r\n                    @click=\"goToGroupStep\"\r\n                >\r\n                    {{ $t('lieferzeiten.domainSelection.back') }}\r\n                </sw-button>\r\n\r\n                <sw-button\r\n                    v-if=\"modalStep === 1\"\r\n                    size=\"small\"\r\n                    variant=\"primary\"\r\n                    :disabled=\"!canGoToChannelStep\"\r\n                    @click=\"goToChannelStep\"\r\n                >\r\n                    {{ $t('lieferzeiten.domainSelection.next') }}\r\n                </sw-button>\r\n\r\n                <sw-button\r\n                    v-else\r\n                    size=\"small\"\r\n                    variant=\"primary\"\r\n                    :disabled=\"!canConfirmSelection\"\r\n                    @click=\"confirmDomainSelection\"\r\n                >\r\n                    {{ $t('lieferzeiten.domainSelection.confirm') }}\r\n                </sw-button>\r\n            </template>\r\n        </sw-modal>\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-domain-selection.html.twig';\r\nimport {\r\n    DEFAULT_DOMAIN_KEY,\r\n    DEFAULT_GROUP_ID,\r\n    DOMAIN_GROUPS,\r\n    getChannelsForGroup,\r\n    getDefaultDomainForGroup,\r\n    normalizeDomainKey,\r\n    normalizeGroupKey,\r\n    resolveGroupKeyForDomain,\r\n} from '../../utils/domain-source-mapping';\r\n\r\nconst STORAGE_DOMAIN_KEY = 'lieferzeitenManagementDomain';\r\nconst STORAGE_GROUP_KEY = 'lieferzeitenManagementGroup';\r\n\r\nShopware.Component.register('lieferzeiten-domain-selection', {\r\n    template,\r\n\r\n    props: {\r\n        value: {\r\n            type: String,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selectedGroup: null,\r\n            selectedDomain: normalizeDomainKey(this.value),\r\n            persistSelection: false,\r\n            showDomainModal: false,\r\n            modalStep: 1,\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.loadStoredSelection();\r\n    },\r\n\r\n    watch: {\r\n        value(newValue) {\r\n            const normalizedDomain = normalizeDomainKey(newValue);\r\n            this.selectedDomain = normalizedDomain;\r\n            this.selectedGroup = this.resolveInitialGroup(normalizedDomain, this.selectedGroup);\r\n        },\r\n        selectedGroup(newValue) {\r\n            if (!newValue) {\r\n                this.selectedDomain = null;\r\n                return;\r\n            }\r\n\r\n            const channelExists = getChannelsForGroup(newValue)\r\n                .some((channel) => channel.value === this.selectedDomain);\r\n\r\n            if (!channelExists) {\r\n                this.selectedDomain = getDefaultDomainForGroup(newValue);\r\n            }\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        groupOptions() {\r\n            return DOMAIN_GROUPS.map((group) => ({\r\n                value: group.id,\r\n                label: this.$t(group.labelSnippet),\r\n            }));\r\n        },\r\n\r\n        channelOptions() {\r\n            return getChannelsForGroup(this.selectedGroup).map((channel) => ({\r\n                value: channel.value,\r\n                label: this.$t(channel.labelSnippet),\r\n            }));\r\n        },\r\n\r\n        canGoToChannelStep() {\r\n            return Boolean(this.selectedGroup);\r\n        },\r\n\r\n        canConfirmSelection() {\r\n            return Boolean(this.selectedGroup && this.selectedDomain);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        resolveInitialGroup(domain, fallbackGroup = null) {\r\n            return resolveGroupKeyForDomain(domain)\r\n                || normalizeGroupKey(fallbackGroup)\r\n                || DEFAULT_GROUP_ID;\r\n        },\r\n\r\n        loadStoredSelection() {\r\n            const localGroup = normalizeGroupKey(localStorage.getItem(STORAGE_GROUP_KEY));\r\n            const localDomain = normalizeDomainKey(localStorage.getItem(STORAGE_DOMAIN_KEY));\r\n            if (localGroup || localDomain) {\r\n                this.persistSelection = true;\r\n                this.applySelection(localGroup, localDomain, true, false);\r\n                return;\r\n            }\r\n\r\n            const sessionGroup = normalizeGroupKey(sessionStorage.getItem(STORAGE_GROUP_KEY));\r\n            const sessionDomain = normalizeDomainKey(sessionStorage.getItem(STORAGE_DOMAIN_KEY));\r\n            if (sessionGroup || sessionDomain) {\r\n                this.persistSelection = false;\r\n                this.applySelection(sessionGroup, sessionDomain, true, false);\r\n                return;\r\n            }\r\n\r\n            const propDomain = normalizeDomainKey(this.value);\r\n            if (propDomain) {\r\n                this.applySelection(null, propDomain, true, false);\r\n                return;\r\n            }\r\n\r\n            this.applySelection(DEFAULT_GROUP_ID, DEFAULT_DOMAIN_KEY, false, false);\r\n            this.showDomainModal = true;\r\n            this.modalStep = 1;\r\n        },\r\n\r\n        applySelection(group, domain, emit = true, persist = true) {\r\n            const resolvedGroup = this.resolveInitialGroup(domain, group);\r\n            const allowedDomains = getChannelsForGroup(resolvedGroup).map((channel) => channel.value);\r\n            const resolvedDomain = allowedDomains.includes(domain)\r\n                ? domain\r\n                : getDefaultDomainForGroup(resolvedGroup);\r\n\r\n            this.selectedGroup = resolvedGroup;\r\n            this.selectedDomain = resolvedDomain;\r\n\r\n            if (emit && resolvedDomain) {\r\n                this.$emit('input', resolvedDomain);\r\n            }\r\n\r\n            if (persist) {\r\n                this.persistDomainSelection(resolvedGroup, resolvedDomain);\r\n            }\r\n        },\r\n\r\n        persistDomainSelection(group, domain) {\r\n            if (!group || !domain) {\r\n                return;\r\n            }\r\n\r\n            const targetStorage = this.persistSelection ? localStorage : sessionStorage;\r\n            const secondaryStorage = this.persistSelection ? sessionStorage : localStorage;\r\n\r\n            targetStorage.setItem(STORAGE_GROUP_KEY, group);\r\n            targetStorage.setItem(STORAGE_DOMAIN_KEY, domain);\r\n\r\n            secondaryStorage.removeItem(STORAGE_GROUP_KEY);\r\n            secondaryStorage.removeItem(STORAGE_DOMAIN_KEY);\r\n        },\r\n\r\n        goToChannelStep() {\r\n            if (!this.canGoToChannelStep) {\r\n                return;\r\n            }\r\n\r\n            this.modalStep = 2;\r\n        },\r\n\r\n        goToGroupStep() {\r\n            this.modalStep = 1;\r\n        },\r\n\r\n        confirmDomainSelection() {\r\n            if (!this.canConfirmSelection) {\r\n                return;\r\n            }\r\n\r\n            this.applySelection(this.selectedGroup, this.selectedDomain, true);\r\n            this.showDomainModal = false;\r\n        },\r\n\r\n        resetDomainSelection() {\r\n            localStorage.removeItem(STORAGE_GROUP_KEY);\r\n            localStorage.removeItem(STORAGE_DOMAIN_KEY);\r\n            sessionStorage.removeItem(STORAGE_GROUP_KEY);\r\n            sessionStorage.removeItem(STORAGE_DOMAIN_KEY);\r\n\r\n            this.applySelection(DEFAULT_GROUP_ID, DEFAULT_DOMAIN_KEY, true);\r\n            this.showDomainModal = true;\r\n            this.modalStep = 1;\r\n        },\r\n    },\r\n});\r\n","{% block lieferzeiten_order_table %}\r\n    <div class=\"lieferzeiten-order-table\">\r\n        <table class=\"sw-data-grid__table\">\r\n            <thead>\r\n                <tr class=\"lieferzeiten-order-table__zone-row\">\r\n                    <th colspan=\"10\" title=\"Bestellung: Auftrags-, Kunden- und Positionsdaten\">{{ $t('lieferzeiten.zones.order') }}</th>\r\n                    <th colspan=\"11\" title=\"Lieferung: Paket-, Tracking- und Termininformationen\">{{ $t('lieferzeiten.zones.delivery') }}</th>\r\n                    <th colspan=\"5\" title=\"Status: interne Hinweise, Statuspflege und Protokoll\">{{ $t('lieferzeiten.zones.status') }}</th>\r\n                </tr>\r\n                <tr class=\"lieferzeiten-order-table__column-row\">\r\n                    <th>{{ $t('lieferzeiten.table.orderNumber') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.san6OrderNumber') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.san6Position') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.totalQuantity') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.orderDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.paymentMethod') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.paymentDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.customerNames') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.domain') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.positions') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.parcels') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.tracking') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.supplierDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.supplierWeek') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.newDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.packageStatus') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.latestShippingDeadline') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.shippingDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.latestDeliveryDeadline') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.deliveryDate') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.shippingType') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.comment') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.history') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.businessStatus') }}</th>\r\n                    <th>{{ $t('lieferzeiten.table.status') }}</th>\r\n                    <th>{{ $t('lieferzeiten.fields.audit') }}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <template v-for=\"order in displayedOrders\">\r\n                    <tr :key=\"order.id\">\r\n                        <td>\r\n                            <sw-button size=\"small\" variant=\"ghost\" @click=\"toggleOrder(order.id)\">\r\n                                {{ isExpanded(order.id) ? '-' : '+' }}\r\n                            </sw-button>\r\n                            {{ displayOrDash(order.orderNumber) }}\r\n                        </td>\r\n                        <td>{{ displayOrDash(order.san6OrderNumberDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.san6PositionDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.quantityDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.orderDateDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.paymentMethodDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.paymentDateDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.customerNamesDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.domain) }}</td>\r\n                        <td>{{ displayOrDash(order.positionsCountDisplay) }}</td>\r\n                        <td>{{ parcelSummary(order) }}</td>\r\n                        <td>{{ displayOrDash(order.trackingSummaryDisplay || order.trackingSummary) }}</td>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td>{{ displayOrDash(order.packageStatusDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.latestShippingDeadlineDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.shippingDateDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.latestDeliveryDeadlineDisplay) }}</td>\r\n                        <td>{{ displayOrDash(order.deliveryDateDisplay) }}</td>\r\n                        <td>{{ shippingLabel(order) }}</td>\r\n                        <td>\r\n                            <sw-text-field v-model:value=\"order.comment\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" :disabled=\"!canSaveComment(order)\" @click=\"saveComment(order)\">\r\n                                {{ $t('global.default.save') }}\r\n                            </sw-button>\r\n                        </td>\r\n                        <td>\r\n                            <ul>\r\n                                <li v-for=\"(entry, index) in order.lieferterminLieferantHistory\" :key=\"`liefertermin-${order.id}-${index}`\">{{ formatHistoryEntry(entry) }}</li>\r\n                                <li v-for=\"(entry, index) in order.neuerLieferterminHistory\" :key=\"`neuer-liefertermin-${order.id}-${index}`\">{{ formatHistoryEntry(entry) }}</li>\r\n                                <li v-for=\"(entry, index) in order.commentHistory\" :key=\"`comment-${order.id}-${index}`\">{{ formatHistoryEntry(entry) }}</li>\r\n                            </ul>\r\n                        </td>\r\n                        <td>\r\n                            <sw-single-select\r\n                                v-model:value=\"order.selectedBusinessStatus\"\r\n                                :options=\"editableBusinessStatuses\"\r\n                                :disabled=\"!hasEditAccess()\"\r\n                                size=\"small\"\r\n                                :placeholder=\"$t('lieferzeiten.statusChange.placeholder')\"\r\n                            />\r\n                            <sw-button\r\n                                v-if=\"hasEditAccess()\"\r\n                                size=\"small\"\r\n                                variant=\"primary\"\r\n                                :disabled=\"!canSaveBusinessStatus(order)\"\r\n                                @click=\"saveBusinessStatus(order)\"\r\n                            >\r\n                                {{ $t('lieferzeiten.statusChange.save') }}\r\n                            </sw-button>\r\n                            <div class=\"lieferzeiten-order-table__business-status-current\">{{ businessStatusLabel(order) }}</div>\r\n                        </td>\r\n                        <td>\r\n                            <sw-label :variant=\"isOrderOpen(order) ? 'warning' : 'success'\">\r\n                                {{ isOrderOpen(order) ? $t('lieferzeiten.status.open') : $t('lieferzeiten.status.closed') }}\r\n                            </sw-label>\r\n                            <div v-if=\"canUpdateOrderStatus(order)\" class=\"lieferzeiten-order-table__status-editor\">\r\n                                <sw-single-select\r\n                                    v-model:value=\"order.selectedManualStatus\"\r\n                                    size=\"small\"\r\n                                    :options=\"statusOptions()\"\r\n                                    value-property=\"value\"\r\n                                    label-property=\"label\"\r\n                                />\r\n                                <sw-button\r\n                                    size=\"small\"\r\n                                    variant=\"primary\"\r\n                                    :is-loading=\"Boolean(statusUpdateLoadingByOrder[order.id])\"\r\n                                    @click=\"saveOrderStatus(order)\"\r\n                                >\r\n                                    {{ $t('lieferzeiten.status.manual.save') }}\r\n                                </sw-button>\r\n                            </div>\r\n                        </td>\r\n                        <td>{{ resolveAuditDisplay(order) }}</td>\r\n                    </tr>\r\n                    <tr v-if=\"isExpanded(order.id)\" :key=\"`${order.id}-positions`\">\r\n                        <td colspan=\"26\">\r\n                            <sw-loader v-if=\"isDetailsLoading(order.id)\" />\r\n\r\n                            <template v-else>\r\n                            <table class=\"sw-data-grid__table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{{ $t('lieferzeiten.table.position') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.article') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.quantity') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.packageNumbers') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.fields.shippingType') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.fields.supplierDate') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.fields.supplierWeek') }}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"position in order.positions\" :key=\"position.id\">\r\n                                        <td>{{ displayOrDash(position.number || position.positionNumber) }}</td>\r\n                                        <td>{{ displayOrDash(position.label || position.article) }}</td>\r\n                                        <td>{{ displayOrDash(position.quantity) }}</td>\r\n                                        <td>\r\n                                            <template v-for=\"entry in resolveTrackingEntries(order, position)\">\r\n                                                <button\r\n                                                    :key=\"`${position.id}-${entry.number}`\"\r\n                                                    type=\"button\"\r\n                                                    class=\"lieferzeiten-order-table__tracking-link\"\r\n                                                    @click=\"openTrackingHistory(entry)\"\r\n                                                >\r\n                                                    {{ entry.number }}\r\n                                                </button>\r\n                                            </template>\r\n                                        </td>\r\n                                        <td>{{ shippingLabelForPosition(order, position) }}</td>\r\n                                        <td>\r\n                                            <sw-datepicker v-model:value=\"position.lieferterminLieferantRange.from\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                                            <sw-datepicker v-model:value=\"position.lieferterminLieferantRange.to\" :disabled=\"!hasEditAccess()\" size=\"small\" />\r\n                                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"primary\" :disabled=\"!canSaveLiefertermin(order, position)\" @click=\"saveLiefertermin(order, position)\">\r\n                                                {{ $t('global.default.save') }}\r\n                                            </sw-button>\r\n                                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"ghost\" @click=\"requestAdditionalDeliveryDate(order, position.id)\">\r\n                                                {{ $t('lieferzeiten.additionalRequest.button') }}\r\n                                            </sw-button>\r\n                                        </td>\r\n                                        <td>{{ weekLabelFromDate(position.lieferterminLieferantRange.to) }}</td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n\r\n                            <table class=\"sw-data-grid__table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{{ $t('lieferzeiten.table.parcels') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.table.packageStatus') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.fields.newDate') }}</th>\r\n                                        <th>{{ $t('lieferzeiten.fields.supplierWeek') }}</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"parcel in order.parcels\" :key=\"parcel.id\">\r\n                                        <td>{{ displayOrDash(parcel.paketId || parcel.id) }}</td>\r\n                                        <td>{{ displayOrDash(parcel.statusDisplay) }}</td>\r\n                                        <td>\r\n                                            <sw-datepicker v-model:value=\"parcel.neuerLieferterminRange.from\" :disabled=\"!hasEditAccess() || !parcel.supplierRange.from || !isParcelEditableByStatus(parcel)\" size=\"small\" />\r\n                                            <sw-datepicker v-model:value=\"parcel.neuerLieferterminRange.to\" :disabled=\"!hasEditAccess() || !parcel.supplierRange.to || !isParcelEditableByStatus(parcel)\" size=\"small\" />\r\n                                            <sw-button v-if=\"hasEditAccess()\" size=\"small\" variant=\"primary\" :disabled=\"!canSaveNeuerLiefertermin(parcel)\" @click=\"saveNeuerLiefertermin(order, parcel)\">\r\n                                                {{ $t('global.default.save') }}\r\n                                            </sw-button>\r\n                                        </td>\r\n                                        <td>{{ weekLabelFromDate(parcel.neuerLieferterminRange.to) }}</td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                            </template>\r\n                        </td>\r\n                    </tr>\r\n                </template>\r\n            </tbody>\r\n        </table>\r\n\r\n\r\n        <div\r\n            v-if=\"showTrackingModal\"\r\n            class=\"lieferzeiten-order-table__tracking-overlay\"\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n        >\r\n            <div class=\"lieferzeiten-order-table__tracking-dialog\">\r\n                <header class=\"lieferzeiten-order-table__tracking-header\">\r\n                    <h3>\r\n                        Tracking {{ activeTracking && activeTracking.carrier && activeTracking.carrier.toUpperCase() }} / {{ activeTracking && activeTracking.number }}\r\n                    </h3>\r\n                    <button type=\"button\" class=\"lieferzeiten-order-table__tracking-close\" @click=\"closeTrackingModal\">×</button>\r\n                </header>\r\n\r\n                <div class=\"lieferzeiten-order-table__tracking-body\">\r\n                    <div v-if=\"isTrackingLoading\">{{ $t('lieferzeiten.tracking.loading') }}</div>\r\n                    <div v-else-if=\"trackingError\" class=\"lieferzeiten-order-table__tracking-error\">{{ trackingError }}</div>\r\n                    <div v-else-if=\"!trackingEvents.length\">{{ $t('lieferzeiten.tracking.empty') }}</div>\r\n                    <ul v-else class=\"lieferzeiten-order-table__tracking-list\">\r\n                        <li v-for=\"(event, index) in trackingEvents\" :key=\"`${event.timestamp}-${index}`\">\r\n                            <strong>{{ event.status }}</strong>\r\n                            <div>{{ event.label }}</div>\r\n                            <small>{{ event.timestamp }}<span v-if=\"event.location\"> · {{ event.location }}</span></small>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <sw-empty-state\r\n            v-if=\"displayedOrders.length === 0\"\r\n            :title=\"$t('lieferzeiten.emptyState.title')\"\r\n            :description=\"$t('lieferzeiten.emptyState.description')\"\r\n        />\r\n    </div>\r\n{% endblock %}\r\n","import template from './lieferzeiten-order-table.html.twig';\r\nimport './lieferzeiten-order-table.scss';\r\n\r\nconst BUSINESS_STATUS_SNIPPETS = {\r\n    '1': 'lieferzeiten.businessStatus.new',\r\n    '2': 'lieferzeiten.businessStatus.inClarification',\r\n    '3': 'lieferzeiten.businessStatus.awaitingSupplier',\r\n    '4': 'lieferzeiten.businessStatus.partiallyAvailable',\r\n    '5': 'lieferzeiten.businessStatus.readyForShipping',\r\n    '6': 'lieferzeiten.businessStatus.partiallyShipped',\r\n    '7': 'lieferzeiten.businessStatus.shipped',\r\n    '8': 'lieferzeiten.businessStatus.closed',\r\n};\r\n\r\nconst INTERNAL_SHIPPING_LABEL = 'Versand durch First Medical';\r\n\r\nShopware.Component.register('lieferzeiten-order-table', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['lieferzeitenTrackingService', 'lieferzeitenOrdersService', 'acl'],\r\n\r\n    props: {\r\n        orders: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        onlyOpen: {\r\n            type: Boolean,\r\n            required: false,\r\n            default: false,\r\n        },\r\n        onReloadOrder: {\r\n            type: Function,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            expandedOrderIds: [],\r\n            editableOrders: {},\r\n            showTrackingModal: false,\r\n            isTrackingLoading: false,\r\n            trackingError: '',\r\n            trackingEvents: [],\r\n            activeTracking: null,\r\n            statusUpdateLoadingByOrder: {},\r\n            detailsLoadingByOrder: {},\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        displayedOrders() {\r\n            return this.orders\r\n                .filter((order) => (this.onlyOpen ? this.isOrderOpen(order) : true))\r\n                .map((order) => this.getEditableOrder(order));\r\n        },\r\n        editableBusinessStatuses() {\r\n            return [7, 8].map((status) => ({\r\n                value: String(status),\r\n                label: `${status} · ${this.$t(BUSINESS_STATUS_SNIPPETS[String(status)])}`,\r\n            }));\r\n        },\r\n    },\r\n\r\n    methods: {\r\n\r\n        hasViewAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.viewer') || this.acl.can('admin');\r\n        },\r\n\r\n        hasEditAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        canUpdateOrderStatus(order) {\r\n            return this.hasEditAccess() && !!order?.id;\r\n        },\r\n\r\n        statusOptions() {\r\n            return [7, 8].map((code) => ({\r\n                value: code,\r\n                label: this.$t(BUSINESS_STATUS_SNIPPETS[String(code)]),\r\n            }));\r\n        },\r\n\r\n        statusOptionLabel(code) {\r\n            const snippet = BUSINESS_STATUS_SNIPPETS[String(code)] || 'lieferzeiten.businessStatus.unknown';\r\n            return `${code} · ${this.$t(snippet)}`;\r\n        },\r\n\r\n        resolveBusinessStatus(order) {\r\n            const businessStatus = order?.business_status || order?.businessStatus || null;\r\n            const code = Number(businessStatus?.code ?? order?.status);\r\n\r\n            if (!Number.isInteger(code) || code < 1 || code > 8) {\r\n                return '-';\r\n            }\r\n\r\n            const labelKey = businessStatus?.labelKey || `lieferzeiten.businessStatus.${code}`;\r\n\r\n            return `${code} - ${this.$t(labelKey)}`;\r\n        },\r\n\r\n        isOrderOpen(order) {\r\n            const parcels = Array.isArray(order?.parcels) ? order.parcels : [];\r\n            return parcels.some((parcel) => !parcel.closed);\r\n        },\r\n\r\n        getEditableOrder(order) {\r\n            if (!this.editableOrders[order.id]) {\r\n                const supplierRange = this.resolveInitialRange(order, 'lieferterminLieferant', 14);\r\n                const newRange = this.resolveInitialRange(order, 'neuerLiefertermin', 4);\r\n\r\n                const positions = (order.positions || []).map((position) => ({\r\n                    ...position,\r\n                    lieferterminLieferantRange: { ...supplierRange },\r\n                    originalLieferterminLieferantRange: { ...supplierRange },\r\n                }));\r\n\r\n                const parcels = (order.parcels || []).map((parcel) => {\r\n                    const parcelNewRange = this.resolveParcelInitialRange(parcel, newRange);\r\n\r\n                    return {\r\n                        ...parcel,\r\n                        supplierRange: { ...supplierRange },\r\n                        neuerLieferterminRange: { ...parcelNewRange },\r\n                        originalNeuerLieferterminRange: { ...parcelNewRange },\r\n                        statusDisplay: this.resolveParcelStatus(parcel),\r\n                    };\r\n                });\r\n\r\n                const commentTargetPositionId = this.resolveCommentTargetPositionId(positions);\r\n\r\n                this.$set(this.editableOrders, order.id, {\r\n                    ...order,\r\n                    san6OrderNumberDisplay: this.resolveSan6OrderNumber(order),\r\n                    san6PositionDisplay: this.resolveSan6Position(order, positions),\r\n                    quantityDisplay: this.resolveQuantity(order, positions),\r\n                    orderDateDisplay: this.resolveOrderDate(order),\r\n                    paymentMethodDisplay: this.resolvePaymentMethod(order),\r\n                    paymentDateDisplay: this.resolvePaymentDate(order),\r\n                    customerNamesDisplay: this.resolveCustomerNames(order),\r\n                    positionsCountDisplay: positions.length,\r\n                    packageStatusDisplay: this.resolvePackageStatus(order),\r\n                    trackingSummaryDisplay: this.resolveTrackingSummaryDisplay(order),\r\n                    latestShippingDeadlineDisplay: this.formatDateTime(this.resolveDeadlineValue(order, [\r\n                        'latestShippingDeadline',\r\n                        'spaetester_versand',\r\n                        'spaetesterVersand',\r\n                        'latestShippingDate',\r\n                    ])),\r\n                    shippingDateDisplay: this.resolveShippingDate(order),\r\n                    latestDeliveryDeadlineDisplay: this.formatDateTime(this.resolveDeadlineValue(order, [\r\n                        'latestDeliveryDeadline',\r\n                        'spaeteste_lieferung',\r\n                        'spaetesteLieferung',\r\n                        'latestDeliveryDate',\r\n                    ])),\r\n                    deliveryDateDisplay: this.resolveDeliveryDate(order),\r\n                    lieferterminLieferantRange: supplierRange,\r\n                    neuerLieferterminRange: newRange,\r\n                    originalLieferterminLieferantRange: { ...supplierRange },\r\n                    originalNeuerLieferterminRange: { ...newRange },\r\n                    comment: this.resolveInitialComment(order),\r\n                    commentTargetPositionId,\r\n                    additionalDeliveryRequest: order.additionalDeliveryRequest || null,\r\n                    latestShippingDeadline: this.resolveDeadlineValue(order, ['spaetester_versand', 'spaetesterVersand', 'latestShippingDeadline']),\r\n                    latestDeliveryDeadline: this.resolveDeadlineValue(order, ['spaeteste_lieferung', 'spaetesteLieferung', 'latestDeliveryDeadline']),\r\n                    selectedManualStatus: [7, 8].includes(Number(order?.status)) ? Number(order.status) : 7,\r\n                });\r\n            }\r\n\r\n            return this.editableOrders[order.id];\r\n        },\r\n\r\n        resolveInitialComment(order) {\r\n            const rawComment = this.pickFirstDefined(order, ['currentComment', 'comment']);\r\n\r\n            if (rawComment === null || rawComment === undefined) {\r\n                return '';\r\n            }\r\n\r\n            return String(rawComment);\r\n        },\r\n\r\n        isOpenPosition(position) {\r\n            const normalized = String(position?.status || '').trim().toLowerCase();\r\n\r\n            if (position?.closed === true) {\r\n                return false;\r\n            }\r\n\r\n            return !['closed', 'done', 'completed', 'shipped', 'delivered', '8'].includes(normalized);\r\n        },\r\n\r\n        resolveCommentTargetPositionId(positions) {\r\n            if (!Array.isArray(positions) || positions.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            const firstOpenPosition = positions.find((position) => this.isOpenPosition(position) && position?.id);\r\n            if (firstOpenPosition?.id) {\r\n                return firstOpenPosition.id;\r\n            }\r\n\r\n            return positions.find((position) => !!position?.id)?.id || null;\r\n        },\r\n\r\n        canSaveComment(order) {\r\n            return this.hasEditAccess() && !!this.getValidCommentTargetPositionId(order);\r\n        },\r\n\r\n        getValidCommentTargetPositionId(order) {\r\n            if (!order || !Array.isArray(order.positions)) {\r\n                return null;\r\n            }\r\n\r\n            const currentTargetPositionId = order.commentTargetPositionId;\r\n            if (currentTargetPositionId\r\n                && order.positions.some((position) => position?.id === currentTargetPositionId)) {\r\n                return currentTargetPositionId;\r\n            }\r\n\r\n            return this.resolveCommentTargetPositionId(order.positions);\r\n        },\r\n\r\n        ensureCommentTargetPositionId(order) {\r\n            const validPositionId = this.getValidCommentTargetPositionId(order);\r\n\r\n            if (order && order.commentTargetPositionId !== validPositionId) {\r\n                this.$set(order, 'commentTargetPositionId', validPositionId);\r\n            }\r\n\r\n            return validPositionId;\r\n        },\r\n\r\n\r\n        resolveParcelInitialRange(parcel, fallbackRange) {\r\n            const from = this.normalizeDate(parcel?.neuerLieferterminFrom || parcel?.neuer_liefertermin_from || parcel?.neuerLiefertermin?.from);\r\n            const to = this.normalizeDate(parcel?.neuerLieferterminTo || parcel?.neuer_liefertermin_to || parcel?.neuerLiefertermin?.to || parcel?.neuerLiefertermin);\r\n\r\n            if (from && to) {\r\n                return { from, to };\r\n            }\r\n\r\n            return { ...fallbackRange };\r\n        },\r\n\r\n        resolveParcelStatus(parcel) {\r\n            const status = String(parcel?.status || '').trim();\r\n\r\n            if (status === '') {\r\n                return parcel?.closed ? this.$t('lieferzeiten.status.closed') : this.$t('lieferzeiten.status.open');\r\n            }\r\n\r\n            return status;\r\n        },\r\n\r\n        isParcelEditableByStatus(parcel) {\r\n            const status = String(parcel?.status || '').trim().toLowerCase();\r\n\r\n            if (parcel?.closed === true) {\r\n                return false;\r\n            }\r\n\r\n            return !['closed', 'done', 'completed', 'shipped', 'delivered', '8'].includes(status);\r\n        },\r\n\r\n        resolveInitialRange(order, fieldPrefix, fallbackMaxDays) {\r\n            const from = this.normalizeDate(order[`${fieldPrefix}From`]);\r\n            const to = this.normalizeDate(order[`${fieldPrefix}To`] || order[fieldPrefix]);\r\n\r\n            if (from && to) {\r\n                return { from, to };\r\n            }\r\n\r\n            const fallbackDays = Number(order[`${fieldPrefix}Days`]);\r\n            if (Number.isInteger(fallbackDays) && fallbackDays >= 1 && fallbackDays <= fallbackMaxDays) {\r\n                return this.buildRangeFromDayOffset(fallbackDays);\r\n            }\r\n\r\n            return { from: null, to: null };\r\n        },\r\n\r\n        normalizeDate(value) {\r\n            if (!value) {\r\n                return null;\r\n            }\r\n\r\n            const date = new Date(value);\r\n            if (Number.isNaN(date.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return date.toISOString().slice(0, 10);\r\n        },\r\n\r\n        buildRangeFromDayOffset(days) {\r\n            const fromDate = new Date();\r\n            fromDate.setDate(fromDate.getDate() + 1);\r\n            const toDate = new Date();\r\n            toDate.setDate(toDate.getDate() + days);\r\n\r\n            return {\r\n                from: fromDate.toISOString().slice(0, 10),\r\n                to: toDate.toISOString().slice(0, 10),\r\n            };\r\n        },\r\n\r\n        async toggleOrder(orderId) {\r\n            if (this.expandedOrderIds.includes(orderId)) {\r\n                this.expandedOrderIds = this.expandedOrderIds.filter((id) => id !== orderId);\r\n                return;\r\n            }\r\n\r\n            await this.loadOrderDetails(orderId);\r\n\r\n            this.expandedOrderIds = [...this.expandedOrderIds, orderId];\r\n        },\r\n\r\n        hasOrderDetails(order) {\r\n            return Array.isArray(order?.positions)\r\n                && Array.isArray(order?.parcels)\r\n                && Array.isArray(order?.lieferterminLieferantHistory)\r\n                && Array.isArray(order?.neuerLieferterminHistory)\r\n                && Array.isArray(order?.commentHistory);\r\n        },\r\n\r\n        mergeOrderDetails(orderId, details) {\r\n            const source = this.editableOrders[orderId] || this.orders.find((item) => item?.id === orderId);\r\n            if (!source || !details) {\r\n                return;\r\n            }\r\n\r\n            const mergedOrder = {\r\n                ...source,\r\n                ...details,\r\n            };\r\n\r\n            this.$delete(this.editableOrders, orderId);\r\n            const editable = this.getEditableOrder(mergedOrder);\r\n\r\n            this.$set(this.editableOrders, orderId, {\r\n                ...editable,\r\n                lieferterminLieferantHistory: details.lieferterminLieferantHistory || [],\r\n                neuerLieferterminHistory: details.neuerLieferterminHistory || [],\r\n                commentHistory: details.commentHistory || [],\r\n                trackingSummaryDisplay: this.resolveTrackingSummaryDisplay(editable),\r\n            });\r\n        },\r\n\r\n        async loadOrderDetails(orderId) {\r\n            if (!orderId) {\r\n                return;\r\n            }\r\n\r\n            const existing = this.editableOrders[orderId] || this.orders.find((order) => order.id === orderId);\r\n            if (this.hasOrderDetails(existing)) {\r\n                return;\r\n            }\r\n\r\n            this.$set(this.detailsLoadingByOrder, orderId, true);\r\n            try {\r\n                const details = await this.lieferzeitenOrdersService.getOrderDetails(orderId);\r\n                this.mergeOrderDetails(orderId, details);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            } finally {\r\n                this.$set(this.detailsLoadingByOrder, orderId, false);\r\n            }\r\n        },\r\n\r\n        isDetailsLoading(orderId) {\r\n            return this.detailsLoadingByOrder[orderId] === true;\r\n        },\r\n\r\n        isExpanded(orderId) {\r\n            return this.expandedOrderIds.includes(orderId);\r\n        },\r\n\r\n        parcelSummary(order) {\r\n            const parcels = Array.isArray(order?.parcels) ? order.parcels : [];\r\n            const openParcels = parcels.filter((parcel) => !parcel.closed).length;\r\n            return `${openParcels}/${parcels.length}`;\r\n        },\r\n\r\n        displayOrDash(value) {\r\n            if (value === null || value === undefined) {\r\n                return '-';\r\n            }\r\n\r\n            const normalized = String(value).trim();\r\n            return normalized === '' ? '-' : normalized;\r\n        },\r\n\r\n        resolveSan6OrderNumber(order) {\r\n            return this.pickFirstDefined(order, ['san6OrderNumber']);\r\n        },\r\n\r\n        resolveSan6Position(order, positions) {\r\n            if (!positions.length) {\r\n                return this.displayOrDash(this.pickFirstDefined(order, ['san6Position', 'san6Pos']));\r\n            }\r\n\r\n            const values = positions\r\n                .map((position) => this.pickFirstDefined(position, ['number']))\r\n                .filter((value) => value !== null && value !== undefined && String(value).trim() !== '');\r\n\r\n            return values.length ? values.join(', ') : '-';\r\n        },\r\n\r\n        resolveQuantity(order, positions) {\r\n            if (!positions.length) {\r\n                return this.displayOrDash(this.pickFirstDefined(order, ['quantity', 'positionsCount']));\r\n            }\r\n\r\n            const total = positions.reduce((acc, position) => {\r\n                const raw = this.pickFirstDefined(position, ['quantity', 'orderedQuantity', 'menge']);\r\n                const numeric = Number(raw);\r\n                return Number.isFinite(numeric) ? acc + numeric : acc;\r\n            }, 0);\r\n\r\n            return total > 0 ? String(total) : '-';\r\n        },\r\n\r\n        resolveOrderDate(order) {\r\n            return this.formatDate(this.pickFirstDefined(order, ['orderDate']));\r\n        },\r\n\r\n        resolvePaymentMethod(order) {\r\n            return this.pickFirstDefined(order, ['paymentMethod']) || '-';\r\n        },\r\n\r\n        resolvePaymentDate(order) {\r\n            return this.formatDate(this.pickFirstDefined(order, ['paymentDate']));\r\n        },\r\n\r\n        resolveCustomerNames(order) {\r\n            const primaryParts = [\r\n                this.pickFirstDefined(order, ['customerFirstName', 'customer_first_name']),\r\n                this.pickFirstDefined(order, ['customerLastName', 'customer_last_name']),\r\n            ];\r\n\r\n            const additionalParts = [\r\n                this.pickFirstDefined(order, ['customerAdditionalName', 'customer_additional_name']),\r\n                this.pickFirstDefined(order, ['customerNames', 'customer_names']),\r\n            ];\r\n\r\n            const nameParts = [...primaryParts, ...additionalParts]\r\n                .map((value) => (value === null || value === undefined ? '' : String(value).trim()))\r\n                .filter((value) => value !== '');\r\n\r\n            if (nameParts.length > 0) {\r\n                return nameParts.join(' ');\r\n            }\r\n\r\n            return this.pickFirstDefined(order, ['customerEmail', 'customer_email']) || '-';\r\n        },\r\n\r\n        resolveDeadlineValue(order, keys) {\r\n            const value = keys.map((key) => order[key]).find((candidate) => candidate);\r\n\r\n            if (!value) {\r\n                return null;\r\n            }\r\n\r\n            const date = new Date(value);\r\n            if (Number.isNaN(date.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return date.toISOString();\r\n        },\r\n\r\n        resolvePackageStatus(order) {\r\n            const rawStatus = this.pickFirstDefined(order, ['packageStatus', 'status']);\r\n\r\n            if (!rawStatus || String(rawStatus).trim() === '') {\r\n                return null;\r\n            }\r\n\r\n            const normalized = String(rawStatus).trim();\r\n            const labels = {\r\n                open: this.$t('lieferzeiten.status.open'),\r\n                closed: this.$t('lieferzeiten.status.closed'),\r\n                pending: 'Pending',\r\n                shipped: 'Shipped',\r\n                delivered: 'Delivered',\r\n            };\r\n\r\n            return labels[normalized.toLowerCase()] || normalized;\r\n        },\r\n\r\n        resolveLatestShippingAt(order) {\r\n            return this.formatDateTime(this.pickFirstDefined(order, ['latestShippingDate']));\r\n        },\r\n\r\n        resolveShippingDate(order) {\r\n            return this.formatDate(this.pickFirstDefined(order, ['shippingDate', 'businessDateFrom']));\r\n        },\r\n\r\n        resolveLatestDeliveryAt(order) {\r\n            return this.formatDateTime(this.pickFirstDefined(order, ['latestDeliveryDate']));\r\n        },\r\n\r\n        resolveDeliveryDate(order) {\r\n            return this.formatDate(this.pickFirstDefined(order, ['deliveryDate', 'businessDateTo', 'calculatedDeliveryDate']));\r\n        },\r\n\r\n        pickFirstDefined(source, keys) {\r\n            if (!source || !Array.isArray(keys)) {\r\n                return null;\r\n            }\r\n\r\n            for (const key of keys) {\r\n                if (Object.prototype.hasOwnProperty.call(source, key) && source[key] !== null && source[key] !== undefined) {\r\n                    return source[key];\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        formatDate(value) {\r\n            if (!value) {\r\n                return '-';\r\n            }\r\n\r\n            const date = new Date(value);\r\n            if (Number.isNaN(date.getTime())) {\r\n                return '-';\r\n            }\r\n\r\n            return date.toLocaleDateString('de-DE', { timeZone: 'Europe/Berlin' });\r\n        },\r\n\r\n        formatDateTime(value) {\r\n            if (!value) {\r\n                return null;\r\n            }\r\n\r\n            const date = new Date(value);\r\n            if (Number.isNaN(date.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return date.toLocaleString('de-DE', {\r\n                timeZone: 'Europe/Berlin',\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n                hour: '2-digit',\r\n                minute: '2-digit',\r\n            });\r\n        },\r\n\r\n        formatHistoryEntry(entry) {\r\n            if (typeof entry === 'string') {\r\n                return entry;\r\n            }\r\n\r\n            if (!entry || typeof entry !== 'object') {\r\n                return '-';\r\n            }\r\n\r\n            const actor = String(entry.lastChangedBy || entry.user || entry.actor || 'system').trim() || 'system';\r\n            const changedAt = this.formatDateTime(entry.lastChangedAt || entry.createdAt || entry.timestamp || null);\r\n\r\n            if (entry.label) {\r\n                return changedAt ? `${entry.label}: ${actor} · ${changedAt}` : `${entry.label}: ${actor}`;\r\n            }\r\n\r\n            return changedAt ? `${actor} · ${changedAt}` : actor;\r\n        },\r\n\r\n        resolveAuditDisplay(order) {\r\n            if (!order || typeof order !== 'object') {\r\n                return '-';\r\n            }\r\n\r\n            const actor = String(order.lastChangedBy || order.user || '').trim();\r\n            const changedAt = this.formatDateTime(order.lastChangedAt || order.updatedAt || order.currentUpdatedAt || null);\r\n\r\n            if (actor && changedAt) {\r\n                return `${actor} · ${changedAt}`;\r\n            }\r\n\r\n            if (actor) {\r\n                return actor;\r\n            }\r\n\r\n            if (changedAt) {\r\n                return changedAt;\r\n            }\r\n\r\n            return order.audit || '-';\r\n        },\r\n\r\n        resolveTrackingEntries(order, position) {\r\n            if (Array.isArray(position?.trackingEntries) && position.trackingEntries.length > 0) {\r\n                return position.trackingEntries.map((entry) => ({\r\n                    number: String(entry?.number || '').trim(),\r\n                    carrier: String(entry?.carrier || '').trim().toLowerCase(),\r\n                })).filter((entry) => entry.number !== '');\r\n            }\r\n\r\n            const carrier = String(position.trackingCarrier || order.trackingCarrier || '').toLowerCase();\r\n            const packageEntries = Array.isArray(position.packages) ? position.packages : [];\r\n            const fallbackPackages = packageEntries.length === 0\r\n                ? [position.sendenummer || order.sendenummer || '']\r\n                : packageEntries;\r\n\r\n            return fallbackPackages.map((pkg) => {\r\n                if (typeof pkg === 'string') {\r\n                    const number = String(pkg || '').trim();\r\n                    if (number.toLowerCase() === INTERNAL_SHIPPING_LABEL.toLowerCase()) {\r\n                        return { number, carrier: 'internal', isInternal: true };\r\n                    }\r\n\r\n                    return { number, carrier };\r\n                }\r\n\r\n                const number = String(pkg?.number || '').trim();\r\n                if (number.toLowerCase() === INTERNAL_SHIPPING_LABEL.toLowerCase()) {\r\n                    return { number, carrier: 'internal', isInternal: true };\r\n                }\r\n\r\n                return {\r\n                    number,\r\n                    carrier: String(pkg?.carrier || carrier).toLowerCase(),\r\n                };\r\n            }).filter((entry) => entry.number !== '');\r\n        },\r\n\r\n        resolveTrackingSummaryDisplay(order) {\r\n            const entries = this.resolveOrderTrackingEntries(order)\r\n                .filter((entry) => ['dhl', 'gls'].includes(entry.carrier));\r\n\r\n            if (entries.length > 0) {\r\n                return entries.map((entry) => entry.number).join(', ');\r\n            }\r\n\r\n            if (this.isInternalShippingMode(order)) {\r\n                return 'Versand durch First Medical';\r\n            }\r\n\r\n            return '-';\r\n        },\r\n\r\n        isInternalShippingMode(order) {\r\n            const candidates = [\r\n                order?.shippingMode,\r\n                order?.shipping_mode,\r\n                order?.shippingType,\r\n                order?.shipping_type,\r\n                order?.shippingMethod,\r\n                order?.shipping_method,\r\n                order?.versandart,\r\n                order?.versandArt,\r\n                order?.versand_art,\r\n            ].filter((value) => value !== null && value !== undefined);\r\n\r\n            if (order?.internalShipping === true || order?.isInternalShipping === true) {\r\n                return true;\r\n            }\r\n\r\n            return candidates.some((value) => {\r\n                const normalized = String(value).toLowerCase();\r\n                return normalized.includes('internal')\r\n                    || normalized.includes('intern')\r\n                    || normalized.includes('first medical')\r\n                    || normalized.includes('hausversand');\r\n            });\r\n        },\r\n\r\n        async openTrackingHistory(entry) {\r\n            if (entry?.isInternal) {\r\n                this.activeTracking = entry;\r\n                this.trackingError = this.$t('lieferzeiten.tracking.internalShipmentInfo');\r\n                this.trackingEvents = [];\r\n                this.isTrackingLoading = false;\r\n                this.showTrackingModal = true;\r\n\r\n                return;\r\n            }\r\n\r\n            if (!entry?.number || !entry?.carrier) {\r\n                this.trackingError = this.$t('lieferzeiten.tracking.missingCarrier');\r\n                this.showTrackingModal = true;\r\n                return;\r\n            }\r\n\r\n            this.activeTracking = entry;\r\n            this.showTrackingModal = true;\r\n            this.isTrackingLoading = true;\r\n            this.trackingError = '';\r\n            this.trackingEvents = [];\r\n\r\n            try {\r\n                const response = await this.lieferzeitenTrackingService.history(entry.carrier, entry.number);\r\n                if (response?.ok === false) {\r\n                    this.trackingError = response?.message || this.$t('lieferzeiten.tracking.loadError');\r\n                    return;\r\n                }\r\n                this.trackingEvents = Array.isArray(response?.events) ? response.events : [];\r\n            } catch (error) {\r\n                this.trackingError = error?.response?.data?.message || error?.message || this.$t('lieferzeiten.tracking.loadError');\r\n            } finally {\r\n                this.isTrackingLoading = false;\r\n            }\r\n        },\r\n\r\n        closeTrackingModal() {\r\n            this.showTrackingModal = false;\r\n            this.isTrackingLoading = false;\r\n            this.trackingError = '';\r\n            this.trackingEvents = [];\r\n            this.activeTracking = null;\r\n        },\r\n\r\n\r\n        resolveLastChangedBy(order) {\r\n            const changedBy = this.pickFirstDefined(order, ['lastChangedBy', 'user']);\r\n\r\n            return changedBy ? String(changedBy).trim() : null;\r\n        },\r\n\r\n        resolveBusinessStatusDisplay(order) {\r\n            const businessStatus = order?.business_status || order?.businessStatus || null;\r\n            const statusCode = String(businessStatus?.code || order?.status || '').trim();\r\n            const statusLabel = String(\r\n                businessStatus?.label\r\n                || order?.business_status_label\r\n                || order?.statusLabel\r\n                || '',\r\n            ).trim();\r\n\r\n            if (!statusCode && !statusLabel) {\r\n                return null;\r\n            }\r\n\r\n            if (!statusCode) {\r\n                return statusLabel;\r\n            }\r\n\r\n            if (!statusLabel) {\r\n                return statusCode;\r\n            }\r\n\r\n            return `${statusCode} · ${statusLabel}`;\r\n        },\r\n\r\n        businessStatusLabel(order) {\r\n            const statusCode = String(order?.businessStatus?.code || order?.status || '').trim();\r\n            const snippetKey = BUSINESS_STATUS_SNIPPETS[statusCode] || 'lieferzeiten.businessStatus.unknown';\r\n            const fallbackLabel = String(order?.businessStatus?.label || '').trim();\r\n            const translatedLabel = this.$t(snippetKey);\r\n            const resolvedLabel = translatedLabel === snippetKey ? (fallbackLabel || this.$t('lieferzeiten.businessStatus.unknown')) : translatedLabel;\r\n\r\n            return `${statusCode || '-'} · ${resolvedLabel}`;\r\n        },\r\n\r\n        resolveEditableBusinessStatus(order) {\r\n            const statusCode = Number(order?.businessStatus?.code ?? order?.status ?? 0);\r\n\r\n            if (statusCode === 7 || statusCode === 8) {\r\n                return String(statusCode);\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        canSaveBusinessStatus(order) {\r\n            if (!this.hasEditAccess()) {\r\n                return false;\r\n            }\r\n\r\n            const nextStatus = Number(order?.selectedBusinessStatus || 0);\r\n            if (![7, 8].includes(nextStatus)) {\r\n                return false;\r\n            }\r\n\r\n            const currentStatus = Number(order?.businessStatus?.code ?? order?.status ?? 0);\r\n\r\n            return nextStatus !== currentStatus;\r\n        },\r\n\r\n        async saveBusinessStatus(order) {\r\n            if (!this.hasEditAccess()) {\r\n                return;\r\n            }\r\n\r\n            const paketId = order?.id || null;\r\n            const status = Number(order?.selectedBusinessStatus || 0);\r\n            if (!paketId || ![7, 8].includes(status)) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: this.$t('lieferzeiten.statusChange.invalidSelection'),\r\n                });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateOrderStatus(paketId, status);\r\n                this.createNotificationSuccess({\r\n                    title: this.$t('global.default.success'),\r\n                    message: this.$t('lieferzeiten.statusChange.saved'),\r\n                });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        shippingLabel(order) {\r\n            return this.shippingLabelForPosition(order, null);\r\n        },\r\n\r\n        shippingLabelForPosition(order, position) {\r\n            const shippingType = this.normalizeShippingType(order?.shippingAssignmentType || order?.versandart);\r\n            const orderedQuantity = this.parseQuantity(position?.orderedQuantity);\r\n            const shippedQuantity = this.parseQuantity(position?.shippedQuantity);\r\n\r\n            if (shippingType === 'unknown') {\r\n                return this.$t('lieferzeiten.shipping.unclear');\r\n            }\r\n\r\n            if (shippingType === 'gesamt') {\r\n                return this.$t('lieferzeiten.shipping.completeShipment');\r\n            }\r\n\r\n            if (shippingType === 'teil') {\r\n                if (orderedQuantity !== null && shippedQuantity !== null && shippedQuantity >= orderedQuantity) {\r\n                    return this.$t('lieferzeiten.shipping.partialShipment');\r\n                }\r\n\r\n                return `${this.$t('lieferzeiten.shipping.splitPosition')} ${this.positionQuantitySuffix(shippedQuantity, orderedQuantity)}`;\r\n            }\r\n\r\n            if (shippingType === 'trennung') {\r\n                return `${this.$t('lieferzeiten.shipping.splitPosition')} ${this.positionQuantitySuffix(shippedQuantity, orderedQuantity)}`;\r\n            }\r\n\r\n            return this.$t('lieferzeiten.shipping.unclear');\r\n        },\r\n\r\n        normalizeShippingType(value) {\r\n            const normalized = String(value || '').trim().toLowerCase();\r\n\r\n            if (normalized === '') {\r\n                return 'unknown';\r\n            }\r\n\r\n            if (['gesamt', 'complete', 'all_in_one', 'full'].includes(normalized)) {\r\n                return 'gesamt';\r\n            }\r\n\r\n            if (['teil', 'partial', 'teillieferung', 'partial_shipment'].includes(normalized)) {\r\n                return 'teil';\r\n            }\r\n\r\n            if (['trennung', 'split', 'split_position'].includes(normalized)) {\r\n                return 'trennung';\r\n            }\r\n\r\n            return normalized;\r\n        },\r\n\r\n        parseQuantity(value) {\r\n            if (value === null || value === undefined || value === '') {\r\n                return null;\r\n            }\r\n\r\n            const numeric = Number(value);\r\n            if (!Number.isFinite(numeric) || numeric < 0) {\r\n                return null;\r\n            }\r\n\r\n            return Math.round(numeric);\r\n        },\r\n\r\n        positionQuantitySuffix(shippedQuantity, orderedQuantity) {\r\n            const shipped = shippedQuantity ?? 0;\r\n            const ordered = orderedQuantity ?? 0;\r\n\r\n            return `${shipped}/${ordered} ${this.$t('lieferzeiten.shipping.pieces')}`;\r\n        },\r\n\r\n        rangeToDays(range) {\r\n            if (!range?.from || !range?.to) {\r\n                return null;\r\n            }\r\n\r\n            const from = new Date(range.from);\r\n            const to = new Date(range.to);\r\n            if (Number.isNaN(from.getTime()) || Number.isNaN(to.getTime())) {\r\n                return null;\r\n            }\r\n\r\n            return Math.floor((to.getTime() - from.getTime()) / 86400000) + 1;\r\n        },\r\n\r\n        isRangeValid(range, minDays, maxDays) {\r\n            const days = this.rangeToDays(range);\r\n            return Number.isInteger(days) && days >= minDays && days <= maxDays;\r\n        },\r\n\r\n        isRangeChanged(range, originalRange) {\r\n            return (range?.from || null) !== (originalRange?.from || null)\r\n                || (range?.to || null) !== (originalRange?.to || null);\r\n        },\r\n\r\n        hasValidNeuerLieferterminRange(order) {\r\n            return Array.isArray(order?.parcels)\r\n                && order.parcels.some((parcel) => this.isRangeValid(parcel.neuerLieferterminRange, 1, 4));\r\n        },\r\n\r\n        canSaveLiefertermin(order, target) {\r\n            return this.isRangeValid(target.lieferterminLieferantRange, 1, 14)\r\n                && this.isRangeChanged(target.lieferterminLieferantRange, target.originalLieferterminLieferantRange)\r\n                && this.hasValidNeuerLieferterminRange(order);\r\n        },\r\n\r\n        canSaveNeuerLiefertermin(target) {\r\n            const supplierRange = target.supplierRange;\r\n            const newRange = target.neuerLieferterminRange;\r\n\r\n            if (!this.isParcelEditableByStatus(target)\r\n                || !this.isRangeValid(supplierRange, 1, 14)\r\n                || !this.isRangeValid(newRange, 1, 4)\r\n                || !this.isRangeChanged(newRange, target.originalNeuerLieferterminRange)) {\r\n                return false;\r\n            }\r\n\r\n            return newRange.from >= supplierRange.from && newRange.to <= supplierRange.to;\r\n        },\r\n\r\n\r\n\r\n        resolveConcurrencyToken(order) {\r\n            return order.updatedAt || order.lastChangedAt || order.currentUpdatedAt || null;\r\n        },\r\n\r\n        applyConflictRefresh(order, refresh) {\r\n            if (!refresh || refresh.exists === false) {\r\n                return;\r\n            }\r\n\r\n            if (refresh.updatedAt) {\r\n                order.updatedAt = refresh.updatedAt;\r\n            }\r\n            if (refresh.lastChangedAt) {\r\n                order.lastChangedAt = refresh.lastChangedAt;\r\n            }\r\n            if (Object.prototype.hasOwnProperty.call(refresh, 'comment')) {\r\n                order.comment = refresh.comment || '';\r\n            }\r\n\r\n            if (refresh.lieferterminLieferant) {\r\n                order.lieferterminLieferantRange = {\r\n                    from: refresh.lieferterminLieferant.from || null,\r\n                    to: refresh.lieferterminLieferant.to || null,\r\n                };\r\n                order.originalLieferterminLieferantRange = { ...order.lieferterminLieferantRange };\r\n            }\r\n\r\n            if (refresh.neuerLiefertermin) {\r\n                order.neuerLieferterminRange = {\r\n                    from: refresh.neuerLiefertermin.from || null,\r\n                    to: refresh.neuerLiefertermin.to || null,\r\n                };\r\n                order.originalNeuerLieferterminRange = { ...order.neuerLieferterminRange };\r\n            }\r\n        },\r\n\r\n        handleConflictError(error, order) {\r\n            const data = error?.response?.data;\r\n            if (data?.code !== 'CONCURRENT_MODIFICATION') {\r\n                return false;\r\n            }\r\n\r\n            this.applyConflictRefresh(order, data?.refresh || null);\r\n            this.createNotificationWarning({\r\n                title: this.$t('global.default.warning'),\r\n                message: data?.message || 'Conflit d’édition détecté. Ligne rafraîchie, veuillez réappliquer vos modifications.',\r\n            });\r\n\r\n            return true;\r\n        },\r\n        weekLabelFromDate(dateValue) {\r\n            if (!dateValue) {\r\n                return '-';\r\n            }\r\n\r\n            const base = new Date(dateValue);\r\n            if (Number.isNaN(base.getTime())) {\r\n                return '-';\r\n            }\r\n\r\n            const date = new Date(Date.UTC(base.getFullYear(), base.getMonth(), base.getDate()));\r\n            const dayNum = date.getUTCDay() || 7;\r\n            date.setUTCDate(date.getUTCDate() + 4 - dayNum);\r\n            const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\r\n            const week = Math.ceil((((date - yearStart) / 86400000) + 1) / 7);\r\n\r\n            return `KW ${week}`;\r\n        },\r\n\r\n        async saveLiefertermin(order, position) {\r\n            if (!this.hasEditAccess()) {\r\n                return;\r\n            }\r\n\r\n            if (!this.canSaveLiefertermin(order, position)) {\r\n                this.createNotificationWarning({\r\n                    title: this.$t('global.default.warning'),\r\n                    message: this.$t('lieferzeiten.validation.supplierSaveRequiresCombinedRange'),\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            const positionId = position?.id || null;\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateLieferterminLieferant(positionId, {\r\n                    from: position.lieferterminLieferantRange.from,\r\n                    to: position.lieferterminLieferantRange.to,\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedSupplierDate') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async saveNeuerLiefertermin(order, parcel) {\r\n            if (!this.hasEditAccess() || !this.canSaveNeuerLiefertermin(parcel)) {\r\n                return;\r\n            }\r\n\r\n            const paketId = parcel?.id || null;\r\n            if (!paketId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing paket id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateNeuerLieferterminByPaket(paketId, {\r\n                    from: parcel.neuerLieferterminRange.from,\r\n                    to: parcel.neuerLieferterminRange.to,\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedNewDate') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async saveComment(order) {\r\n            if (!this.canSaveComment(order)) {\r\n                return;\r\n            }\r\n\r\n            const positionId = this.ensureCommentTargetPositionId(order);\r\n\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updateComment(positionId, {\r\n                    comment: order.comment || '',\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n                this.createNotificationSuccess({ title: this.$t('global.default.success'), message: this.$t('lieferzeiten.audit.savedComment') });\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n        async requestAdditionalDeliveryDate(order, positionId) {\r\n            if (!this.hasEditAccess()) {\r\n                return;\r\n            }\r\n\r\n            if (!positionId) {\r\n                this.createNotificationError({ title: this.$t('global.default.error'), message: 'Missing position id' });\r\n                return;\r\n            }\r\n\r\n            const initiator = this.resolveAdditionalRequestInitiator();\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.createAdditionalDeliveryRequest(positionId, initiator);\r\n                this.createNotificationSuccess({\r\n                    title: this.$t('lieferzeiten.additionalRequest.notificationTitle'),\r\n                    message: this.$t('lieferzeiten.additionalRequest.notificationRequested', { initiator }),\r\n                });\r\n\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            }\r\n        },\r\n\r\n\r\n        async saveOrderStatus(order) {\r\n            if (!this.canUpdateOrderStatus(order)) {\r\n                return;\r\n            }\r\n\r\n            const targetStatus = Number(order.selectedManualStatus);\r\n            if (![7, 8].includes(targetStatus)) {\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: this.$t('lieferzeiten.status.manual.invalid'),\r\n                });\r\n                return;\r\n            }\r\n\r\n            this.$set(this.statusUpdateLoadingByOrder, order.id, true);\r\n\r\n            try {\r\n                await this.lieferzeitenOrdersService.updatePaketStatus(order.id, {\r\n                    status: targetStatus,\r\n                    updatedAt: this.resolveConcurrencyToken(order),\r\n                });\r\n\r\n                this.createNotificationSuccess({\r\n                    title: this.$t('global.default.success'),\r\n                    message: this.$t('lieferzeiten.status.manual.updated', { status: targetStatus }),\r\n                });\r\n\r\n                await this.reloadOrder(order);\r\n            } catch (error) {\r\n                if (this.handleConflictError(error, order)) {\r\n                    return;\r\n                }\r\n\r\n                this.createNotificationError({\r\n                    title: this.$t('global.default.error'),\r\n                    message: error?.response?.data?.message || error?.message || this.$t('global.default.error'),\r\n                });\r\n            } finally {\r\n                this.$set(this.statusUpdateLoadingByOrder, order.id, false);\r\n            }\r\n        },\r\n\r\n        notifyInitiatorIfClosed(order) {\r\n            const request = order.additionalDeliveryRequest;\r\n            if (!request || request.notifiedAt || this.isOrderOpen(order)) {\r\n                return;\r\n            }\r\n\r\n            request.notifiedAt = new Date().toISOString();\r\n            this.updateAudit(order, this.$t('lieferzeiten.additionalRequest.auditClosed'));\r\n\r\n            this.createNotificationInfo({\r\n                title: this.$t('lieferzeiten.additionalRequest.notificationTitle'),\r\n                message: this.$t('lieferzeiten.additionalRequest.notificationClosed', {\r\n                    initiator: request.initiator || this.$t('lieferzeiten.additionalRequest.defaultInitiator'),\r\n                }),\r\n            });\r\n        },\r\n\r\n        resolveAdditionalRequestInitiator() {\r\n            const contextUser = Shopware?.Context?.api?.user || null;\r\n            const sessionUser = Shopware?.Store?.get?.('session')?.currentUser || Shopware?.State?.get?.('session')?.currentUser || null;\r\n            const user = contextUser || sessionUser;\r\n\r\n            const userId = typeof user?.id === 'string' ? user.id.trim() : '';\r\n            const fullName = [user?.firstName, user?.lastName].filter((part) => typeof part === 'string' && part.trim() !== '').join(' ').trim();\r\n            const readableName = fullName || String(user?.username || user?.email || '').trim();\r\n\r\n            if (readableName && userId) {\r\n                return `${readableName} (${userId})`;\r\n            }\r\n\r\n            return userId || readableName || this.$t('lieferzeiten.additionalRequest.defaultInitiator');\r\n        },\r\n\r\n        updateAudit(order, action) {\r\n            const actor = String(order?.lastChangedBy || order?.user || 'system').trim() || 'system';\r\n            order.audit = `${action} · ${actor} · ${new Date().toLocaleString('de-DE')}`;\r\n        },\r\n\r\n        async reloadOrder(order) {\r\n            if (typeof this.onReloadOrder === 'function') {\r\n                await this.onReloadOrder(order);\r\n                return;\r\n            }\r\n\r\n        },\r\n    },\r\n});\r\n","import './page/lieferzeiten-index';\r\nimport './page/lieferzeiten-all';\r\nimport './page/lieferzeiten-open';\r\nimport './page/lieferzeiten-statistics';\r\nimport './component/lieferzeiten-domain-selection';\r\nimport './component/lieferzeiten-order-table';\r\n\r\nconst { Module } = Shopware;\r\n\r\nModule.register('lieferzeiten', {\r\n    type: 'plugin',\r\n    name: 'lieferzeiten',\r\n    title: 'lieferzeiten.general.mainMenuItemGeneral',\r\n    description: 'lieferzeiten.general.description',\r\n    color: '#2B8CBF',\r\n    icon: 'regular-clock',\r\n\r\n    privileges: {\r\n        viewer: {\r\n            permissions: ['lieferzeiten.viewer'],\r\n            dependencies: [],\r\n        },\r\n        editor: {\r\n            permissions: ['lieferzeiten.editor'],\r\n            dependencies: ['lieferzeiten.viewer'],\r\n        },\r\n    },\r\n\r\n    routes: {\r\n        index: {\r\n            component: 'lieferzeiten-index',\r\n            path: 'index',\r\n            redirect: { name: 'lieferzeiten.all' },\r\n            children: {\r\n                all: {\r\n                    component: 'lieferzeiten-all',\r\n                    path: 'all',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n                open: {\r\n                    component: 'lieferzeiten-open',\r\n                    path: 'open',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n                statistics: {\r\n                    component: 'lieferzeiten-statistics',\r\n                    path: 'statistics',\r\n                    meta: {\r\n                        parentPath: 'lieferzeiten.index',\r\n                        privilege: 'lieferzeiten.viewer',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    },\r\n\r\n    navigation: [\r\n        {\r\n            id: 'lieferzeiten',\r\n            label: 'lieferzeiten.general.mainMenuItemGeneral',\r\n            color: '#2B8CBF',\r\n            path: 'lieferzeiten.index',\r\n            icon: 'regular-clock',\r\n            parent: 'sw-order',\r\n            position: 100,\r\n            privilege: 'lieferzeiten.viewer',\r\n        },\r\n        {\r\n            id: 'lieferzeiten-statistics',\r\n            label: 'lieferzeiten.general.mainMenuItemStatistics',\r\n            color: '#2B8CBF',\r\n            path: 'lieferzeiten.statistics',\r\n            icon: 'regular-chart-bar',\r\n            parent: 'sw-dashboard',\r\n            position: 110,\r\n            privilege: 'lieferzeiten.viewer',\r\n        },\r\n    ],\r\n});\r\n","<sw-page class=\"lieferzeiten-channel-settings-list\">\r\n    <template #smart-bar-header>\r\n        <h2>{{ $tc('lieferzeiten.lms.dashboard.title') }}</h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <sw-button v-if=\"hasEditAccess\" :isLoading=\"isSeedingDemoData\" :variant=\"hasDemoData ? 'danger' : 'default'\" @click=\"onToggleDemoData\">{{ hasDemoData ? $tc('lieferzeiten.lms.dashboard.removeDemoData') : $tc('lieferzeiten.lms.dashboard.seedDemoData') }}</sw-button>\r\n        <sw-button-process v-if=\"hasEditAccess\" variant=\"primary\" :isLoading=\"isSaving\" @click=\"onSave\">{{ $tc('global.default.save') }}</sw-button-process>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card :isLoading=\"isLoading\" :title=\"$tc('lieferzeiten.lms.dashboard.cardTitle')\">\r\n            <sw-alert variant=\"info\" appearance=\"default\" :showIcon=\"true\">\r\n                {{ $tc('lieferzeiten.lms.dashboard.introText') }}\r\n            </sw-alert>\r\n\r\n            <sw-alert v-if=\"hasValidationErrors\" variant=\"error\" appearance=\"default\" :showIcon=\"true\" class=\"sw-mt-16\">\r\n                {{ $tc('lieferzeiten.lms.dashboard.validationError') }}\r\n            </sw-alert>\r\n\r\n            <section v-for=\"group in groupedChannels\" :key=\"group.id\" class=\"sw-mt-24\">\r\n                <h3 class=\"sw-mb-8\">{{ group.title }}</h3>\r\n\r\n                <div v-for=\"channel in group.channels\" :key=\"channel.id\" class=\"sw-mt-16\">\r\n                    <div class=\"sw-flex sw-flex--align-center sw-flex--justify-space-between\">\r\n                        <h4 class=\"sw-m-0\">{{ channel.name || channel.id }}</h4>\r\n                        <sw-label v-if=\"hasIncompletePdmsMapping(channel.id)\" appearance=\"pill\" variant=\"warning\" size=\"small\">\r\n                            {{ $tc('lieferzeiten.lms.dashboard.incompleteMappingBadge') }}\r\n                        </sw-label>\r\n                    </div>\r\n\r\n                    <sw-alert v-if=\"hasIncompletePdmsMapping(channel.id)\" variant=\"warning\" appearance=\"default\" :showIcon=\"true\" class=\"sw-mt-8 sw-mb-8\">\r\n                        {{ $tc('lieferzeiten.lms.dashboard.incompleteMappingWarning', 0, { channelName: channel.name || channel.id }) }}\r\n                    </sw-alert>\r\n\r\n                    <sw-data-grid\r\n                        :dataSource=\"getChannelPdmsLieferzeiten(channel.id)\"\r\n                        :columns=\"[\r\n                            { property: 'label', label: $tc('lieferzeiten.lms.dashboard.columns.pdmsLieferzeit'), width: '160px' },\r\n                            { property: 'shippingOverdueWorkingDays', label: $tc('lieferzeiten.lms.dashboard.columns.shippingOverdueWorkingDays') },\r\n                            { property: 'deliveryOverdueWorkingDays', label: $tc('lieferzeiten.lms.dashboard.columns.deliveryOverdueWorkingDays') }\r\n                        ]\"\r\n                        :showSelection=\"false\"\r\n                        :showActions=\"false\"\r\n                        :allowColumnEdit=\"false\"\r\n                    >\r\n                        <template #column-label=\"{ item }\">\r\n                            {{ item.label }}\r\n                        </template>\r\n\r\n                        <template #column-shippingOverdueWorkingDays=\"{ item }\">\r\n                            <sw-number-field\r\n                                numberType=\"int\"\r\n                                :min=\"0\"\r\n                                :disabled=\"!hasEditAccess\"\r\n                                :value=\"getMatrixValue(channel.id, item.key, 'shippingOverdueWorkingDays')\"\r\n                                :error=\"getFieldError(channel.id, item.key, 'shippingOverdueWorkingDays')\"\r\n                                @input=\"onChangeNumberField(channel.id, item.key, 'shippingOverdueWorkingDays', $event)\"\r\n                            />\r\n                        </template>\r\n\r\n                        <template #column-deliveryOverdueWorkingDays=\"{ item }\">\r\n                            <sw-number-field\r\n                                numberType=\"int\"\r\n                                :min=\"0\"\r\n                                :disabled=\"!hasEditAccess\"\r\n                                :value=\"getMatrixValue(channel.id, item.key, 'deliveryOverdueWorkingDays')\"\r\n                                :error=\"getFieldError(channel.id, item.key, 'deliveryOverdueWorkingDays')\"\r\n                                @input=\"onChangeNumberField(channel.id, item.key, 'deliveryOverdueWorkingDays', $event)\"\r\n                            />\r\n                        </template>\r\n                    </sw-data-grid>\r\n                </div>\r\n            </section>\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import { normalizeDomainKey } from './domain-source-mapping';\r\n\r\n/**\r\n * LMS channel matching rules (in priority order):\r\n * 1) Match by mapped sales-channel domain hostname only\r\n *    (canonical + legacy aliases via normalizeDomainKey).\r\n * 2) If no mapped domain exists, match by explicit technical identifiers only\r\n *    (technicalName, shortName, technical custom-field keys; exact match after normalization).\r\n *\r\n * Freely editable display labels (name, translated.name) are intentionally excluded\r\n * from technical matching to avoid false-positive LMS assignments after renames/translations.\r\n */\r\nexport const LMS_TARGET_CHANNELS = Object.freeze([\r\n    {\r\n        domainKey: 'first-medical-shop.de',\r\n        technicalIdentifiers: ['first-medical-shop.de', 'first-medical-shop', 'first_medical_shop', 'first-medical-e-commerce'],\r\n    },\r\n    {\r\n        domainKey: 'ebay.de',\r\n        technicalIdentifiers: ['ebay.de', 'ebay_de', 'ebay-de'],\r\n    },\r\n    {\r\n        domainKey: 'ebay.at',\r\n        technicalIdentifiers: ['ebay.at', 'ebay_at', 'ebay-at'],\r\n    },\r\n    {\r\n        domainKey: 'kaufland',\r\n        technicalIdentifiers: ['kaufland'],\r\n    },\r\n    {\r\n        domainKey: 'peg',\r\n        technicalIdentifiers: ['peg'],\r\n    },\r\n    {\r\n        domainKey: 'zonami',\r\n        technicalIdentifiers: ['zonami'],\r\n    },\r\n    {\r\n        domainKey: 'medical-solutions-germany.de',\r\n        technicalIdentifiers: ['medical-solutions-germany.de', 'medical-solutions-germany', 'medical_solutions_germany'],\r\n    },\r\n]);\r\n\r\nconst TECHNICAL_IDENTIFIER_TO_DOMAIN_KEY = Object.freeze(\r\n    LMS_TARGET_CHANNELS.reduce((acc, config) => {\r\n        config.technicalIdentifiers.forEach((identifier) => {\r\n            acc[normalizeIdentifier(identifier)] = config.domainKey;\r\n        });\r\n\r\n        return acc;\r\n    }, {}),\r\n);\r\n\r\nfunction normalizeIdentifier(value) {\r\n    return String(value || '').trim().toLowerCase();\r\n}\r\n\r\nfunction normalizeDomainFromUrl(url) {\r\n    if (!url) {\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        const parsedUrl = new URL(url);\r\n        return normalizeDomainKey(parsedUrl.hostname);\r\n    } catch (error) {\r\n        return normalizeDomainKey(url);\r\n    }\r\n}\r\n\r\nexport function resolveLmsTargetChannelKey(channel) {\r\n    const domainMatch = channel?.domains\r\n        ?.map((domain) => normalizeDomainFromUrl(domain?.url))\r\n        .find((domainKey) => domainKey !== null);\r\n\r\n    if (domainMatch && LMS_TARGET_CHANNELS.some((config) => config.domainKey === domainMatch)) {\r\n        return domainMatch;\r\n    }\r\n\r\n    // Important: display names are not technical identifiers and can be edited/translatable.\r\n    // Matching must stay strict to domain hostnames and explicit technical keys only.\r\n    const technicalIdentifierCandidates = [\r\n        channel?.technicalName,\r\n        channel?.shortName,\r\n        channel?.customFields?.technicalIdentifier,\r\n        channel?.customFields?.technicalName,\r\n        channel?.customFields?.technical_name,\r\n        channel?.customFields?.technical_identifier,\r\n    ]\r\n        .map((identifier) => normalizeIdentifier(identifier))\r\n        .filter((identifier) => identifier.length > 0);\r\n\r\n    return technicalIdentifierCandidates\r\n        .map((identifier) => TECHNICAL_IDENTIFIER_TO_DOMAIN_KEY[identifier] || null)\r\n        .find((domainKey) => domainKey !== null) || null;\r\n}\r\n\r\nexport function isLmsTargetChannel(channel) {\r\n    return resolveLmsTargetChannelKey(channel) !== null;\r\n}\r\n","import template from './lieferzeiten-channel-settings-list.html.twig';\r\nimport { DOMAIN_GROUPS, normalizeDomainKey } from '../../../lieferzeiten/utils/domain-source-mapping';\r\nimport {\r\n    isLmsTargetChannel,\r\n    LMS_TARGET_CHANNELS,\r\n    resolveLmsTargetChannelKey,\r\n} from '../../../lieferzeiten/utils/lms-target-channel-mapping';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nconst PDMS_SLOTS = [1, 2, 3, 4];\r\n\r\n/**\r\n * LMS whitelist matching is resolved in lms-target-channel-mapping via:\r\n * 1) canonical sales-channel domain mapping (normalized hostname)\r\n * 2) explicit technical identifiers (exact match after normalization)\r\n *\r\n * Display names are not used as fuzzy matching input.\r\n */\r\nconst LMS_TARGET_DOMAIN_KEYS = LMS_TARGET_CHANNELS.map((targetChannel) => targetChannel.domainKey);\r\n\r\nconst CHANNEL_GROUP_TITLES = {\r\n    'first-medical-e-commerce': 'First Medical - E-Commerce',\r\n    'medical-solutions': 'Medical Solutions',\r\n};\r\n\r\nconst CHANNEL_GROUPS = Object.entries(CHANNEL_GROUP_TITLES)\r\n    .map(([groupId, groupTitle]) => {\r\n        const sourceGroup = DOMAIN_GROUPS.find((group) => group.id === groupId);\r\n\r\n        return {\r\n            id: groupId,\r\n            title: groupTitle,\r\n            domainKeys: (sourceGroup?.channels || [])\r\n                .map((channel) => channel.value)\r\n                .filter((channelDomainKey) => LMS_TARGET_DOMAIN_KEYS.includes(channelDomainKey)),\r\n        };\r\n    });\r\n\r\nconst OTHER_CHANNELS_GROUP = {\r\n    id: 'other-channels',\r\n    title: 'Weitere Kanäle',\r\n};\r\n\r\nComponent.register('lieferzeiten-channel-settings-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory', 'lieferzeitenOrdersService', 'acl'],\r\n\r\n    data() {\r\n        return {\r\n            thresholdRepository: null,\r\n            salesChannelRepository: null,\r\n            channels: [],\r\n            matrixValues: {},\r\n            existingEntryIds: {},\r\n            validationErrors: {},\r\n            isLoading: false,\r\n            isSaving: false,\r\n            isSeedingDemoData: false,\r\n            hasDemoData: false,\r\n            channelPdmsLieferzeiten: {},\r\n            channelPdmsMappingIncomplete: {},\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        groupedChannels() {\r\n            const groupedEntries = CHANNEL_GROUPS.map((group) => ({\r\n                ...group,\r\n                channels: [],\r\n            }));\r\n\r\n            const channelsWithoutMapping = [];\r\n\r\n            this.channels.forEach((channel) => {\r\n                const domainKey = this.resolveChannelDomainKey(channel);\r\n                const matchingGroup = groupedEntries.find((group) => group.domainKeys.includes(domainKey));\r\n\r\n                if (matchingGroup) {\r\n                    matchingGroup.channels.push(channel);\r\n                    return;\r\n                }\r\n\r\n                channelsWithoutMapping.push(channel);\r\n            });\r\n\r\n            const visibleGroups = groupedEntries.filter((group) => group.channels.length > 0);\r\n\r\n            if (channelsWithoutMapping.length > 0) {\r\n                visibleGroups.push({\r\n                    ...OTHER_CHANNELS_GROUP,\r\n                    channels: channelsWithoutMapping,\r\n                });\r\n            }\r\n\r\n            return visibleGroups;\r\n        },\r\n\r\n        hasEditAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        hasValidationErrors() {\r\n            return Object.keys(this.validationErrors).length > 0;\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.thresholdRepository = this.repositoryFactory.create('lieferzeiten_channel_pdms_threshold');\r\n        this.salesChannelRepository = this.repositoryFactory.create('sales_channel');\r\n        this.loadData();\r\n        this.loadDemoDataStatus();\r\n    },\r\n\r\n    methods: {\r\n        getWhitelistedChannels(salesChannels) {\r\n            return salesChannels.filter((channel) => isLmsTargetChannel(channel));\r\n        },\r\n\r\n        getWhitelistedChannelIds() {\r\n            return new Set(this.channels.map((channel) => channel.id));\r\n        },\r\n\r\n        resolveChannelDomainKey(channel) {\r\n            const lmsTargetDomainKey = resolveLmsTargetChannelKey(channel);\r\n\r\n            if (lmsTargetDomainKey) {\r\n                return lmsTargetDomainKey;\r\n            }\r\n\r\n            const domainFromChannelDomain = channel?.domains\r\n                ?.map((domain) => this.normalizeDomainFromUrl(domain?.url))\r\n                .find((domainKey) => domainKey !== null);\r\n\r\n            if (domainFromChannelDomain) {\r\n                return domainFromChannelDomain;\r\n            }\r\n\r\n            return normalizeDomainKey(channel?.name);\r\n        },\r\n\r\n        normalizeDomainFromUrl(url) {\r\n            if (!url) {\r\n                return null;\r\n            }\r\n\r\n            try {\r\n                const parsedUrl = new URL(url);\r\n                return normalizeDomainKey(parsedUrl.hostname);\r\n            } catch (error) {\r\n                return normalizeDomainKey(url);\r\n            }\r\n        },\r\n\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        getChannelPdmsLieferzeiten(channelId) {\r\n            return this.channelPdmsLieferzeiten[channelId] || this.buildNormalizedPdmsSlots();\r\n        },\r\n\r\n        createMissingSlotEntry(slot) {\r\n            return {\r\n                key: `PDMS_${slot}`,\r\n                label: this.$tc('lieferzeiten.lms.dashboard.incompleteMappingSlotLabel', 0, { slot }),\r\n                isPlaceholder: true,\r\n            };\r\n        },\r\n\r\n        buildNormalizedPdmsSlots(entriesBySlot = new Map()) {\r\n            return PDMS_SLOTS.map((slot) => entriesBySlot.get(slot) || this.createMissingSlotEntry(slot));\r\n        },\r\n\r\n        getEntryKey(channelId, pdmsKey) {\r\n            return `${channelId}.${pdmsKey}`;\r\n        },\r\n\r\n        hasIncompletePdmsMapping(channelId) {\r\n            return Boolean(this.channelPdmsMappingIncomplete[channelId]);\r\n        },\r\n\r\n        getFieldKey(channelId, pdmsKey, fieldName) {\r\n            return `${channelId}.${pdmsKey}.${fieldName}`;\r\n        },\r\n\r\n        ensureChannelMatrix(channelId) {\r\n            if (!this.matrixValues[channelId]) {\r\n                this.$set(this.matrixValues, channelId, {});\r\n            }\r\n\r\n            this.getChannelPdmsLieferzeiten(channelId).forEach(({ key }) => {\r\n                if (!this.matrixValues[channelId][key]) {\r\n                    this.$set(this.matrixValues[channelId], key, {\r\n                        shippingOverdueWorkingDays: 0,\r\n                        deliveryOverdueWorkingDays: 0,\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        async loadChannelPdmsLieferzeiten(channelId) {\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.getSalesChannelLieferzeiten(channelId);\r\n                const entriesBySlot = new Map();\r\n\r\n                if (Array.isArray(response?.lieferzeiten)) {\r\n                    response.lieferzeiten.forEach((entry) => {\r\n                        const slot = Number.parseInt(entry?.slot, 10);\r\n\r\n                        if (!Number.isInteger(slot) || slot < 1 || slot > 4 || entriesBySlot.has(slot)) {\r\n                            return;\r\n                        }\r\n\r\n                        entriesBySlot.set(slot, {\r\n                            key: `PDMS_${slot}`,\r\n                            label: entry?.lieferzeit?.name || `PDMS ${slot}`,\r\n                            isPlaceholder: false,\r\n                        });\r\n                    });\r\n                }\r\n\r\n                const normalizedEntries = this.buildNormalizedPdmsSlots(entriesBySlot);\r\n\r\n                this.$set(this.channelPdmsLieferzeiten, channelId, normalizedEntries);\r\n                this.$set(this.channelPdmsMappingIncomplete, channelId, normalizedEntries.some((entry) => entry.isPlaceholder));\r\n            } catch (error) {\r\n                this.$set(this.channelPdmsLieferzeiten, channelId, this.buildNormalizedPdmsSlots());\r\n                this.$set(this.channelPdmsMappingIncomplete, channelId, true);\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.dashboard.title'));\r\n            }\r\n        },\r\n\r\n        normalizeNonNegativeInteger(rawValue) {\r\n            if (typeof rawValue === 'number') {\r\n                return Number.isInteger(rawValue) ? rawValue : rawValue;\r\n            }\r\n\r\n            if (typeof rawValue !== 'string') {\r\n                return rawValue;\r\n            }\r\n\r\n            const trimmed = rawValue.trim();\r\n            if (!/^\\d+$/.test(trimmed)) {\r\n                return rawValue;\r\n            }\r\n\r\n            return Number.parseInt(trimmed, 10);\r\n        },\r\n\r\n        validateValue(channelId, pdmsKey, fieldName) {\r\n            const fieldKey = this.getFieldKey(channelId, pdmsKey, fieldName);\r\n            const value = this.matrixValues[channelId]?.[pdmsKey]?.[fieldName];\r\n            const isValid = Number.isInteger(value) && value >= 0;\r\n\r\n            if (!isValid) {\r\n                this.$set(this.validationErrors, fieldKey, this.$tc('lieferzeiten.lms.dashboard.inlineValidationError'));\r\n                return;\r\n            }\r\n\r\n            this.$delete(this.validationErrors, fieldKey);\r\n        },\r\n\r\n        onChangeNumberField(channelId, pdmsKey, fieldName, rawValue) {\r\n            this.ensureChannelMatrix(channelId);\r\n            this.matrixValues[channelId][pdmsKey][fieldName] = this.normalizeNonNegativeInteger(rawValue);\r\n            this.validateValue(channelId, pdmsKey, fieldName);\r\n        },\r\n\r\n        getMatrixValue(channelId, pdmsKey, fieldName) {\r\n            return this.matrixValues[channelId]?.[pdmsKey]?.[fieldName] ?? 0;\r\n        },\r\n\r\n        getFieldError(channelId, pdmsKey, fieldName) {\r\n            return this.validationErrors[this.getFieldKey(channelId, pdmsKey, fieldName)] || null;\r\n        },\r\n\r\n        async loadData() {\r\n            this.isLoading = true;\r\n\r\n            const thresholdCriteria = new Criteria(1, 500);\r\n            const salesChannelCriteria = new Criteria(1, 500);\r\n            salesChannelCriteria.addSorting(Criteria.sort('name', 'ASC'));\r\n            salesChannelCriteria.addAssociation('domains');\r\n\r\n            try {\r\n                const [thresholds, salesChannels] = await Promise.all([\r\n                    this.thresholdRepository.search(thresholdCriteria, Shopware.Context.api),\r\n                    this.salesChannelRepository.search(salesChannelCriteria, Shopware.Context.api),\r\n                ]);\r\n\r\n                this.channels = this.getWhitelistedChannels(salesChannels);\r\n                this.matrixValues = {};\r\n                this.existingEntryIds = {};\r\n                this.channelPdmsLieferzeiten = {};\r\n                this.channelPdmsMappingIncomplete = {};\r\n\r\n                const loadedChannelIds = this.getWhitelistedChannelIds();\r\n\r\n                await Promise.all(this.channels.map((channel) => this.loadChannelPdmsLieferzeiten(channel.id)));\r\n\r\n                this.channels.forEach((channel) => {\r\n                    this.ensureChannelMatrix(channel.id);\r\n                });\r\n\r\n                thresholds.forEach((entry) => {\r\n                    if (!loadedChannelIds.has(entry.salesChannelId)) {\r\n                        return;\r\n                    }\r\n\r\n                    this.ensureChannelMatrix(entry.salesChannelId);\r\n                    this.$set(this.matrixValues[entry.salesChannelId], entry.pdmsLieferzeit, {\r\n                        shippingOverdueWorkingDays: entry.shippingOverdueWorkingDays,\r\n                        deliveryOverdueWorkingDays: entry.deliveryOverdueWorkingDays,\r\n                    });\r\n                    this.$set(this.existingEntryIds, this.getEntryKey(entry.salesChannelId, entry.pdmsLieferzeit), entry.id);\r\n                });\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.dashboard.title'));\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        async onSave() {\r\n            if (!this.hasEditAccess) {\r\n                return;\r\n            }\r\n\r\n            this.validationErrors = {};\r\n            this.channels.forEach((channel) => {\r\n                this.getChannelPdmsLieferzeiten(channel.id).forEach(({ key }) => {\r\n                    this.validateValue(channel.id, key, 'shippingOverdueWorkingDays');\r\n                    this.validateValue(channel.id, key, 'deliveryOverdueWorkingDays');\r\n                });\r\n            });\r\n\r\n            if (this.hasValidationErrors) {\r\n                this.createNotificationError({\r\n                    title: this.$tc('lieferzeiten.lms.dashboard.title'),\r\n                    message: this.$tc('lieferzeiten.lms.dashboard.validationError'),\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            this.isSaving = true;\r\n\r\n            try {\r\n                const whitelistedChannelIds = this.getWhitelistedChannelIds();\r\n\r\n                for (const channel of this.channels) {\r\n                    if (!whitelistedChannelIds.has(channel.id)) {\r\n                        continue;\r\n                    }\r\n\r\n                    this.ensureChannelMatrix(channel.id);\r\n\r\n                    for (const { key } of this.getChannelPdmsLieferzeiten(channel.id)) {\r\n                        const entity = this.thresholdRepository.create(Shopware.Context.api);\r\n                        entity.id = this.existingEntryIds[this.getEntryKey(channel.id, key)] || entity.id;\r\n                        entity.salesChannelId = channel.id;\r\n                        entity.pdmsLieferzeit = key;\r\n                        entity.shippingOverdueWorkingDays = this.matrixValues[channel.id][key].shippingOverdueWorkingDays;\r\n                        entity.deliveryOverdueWorkingDays = this.matrixValues[channel.id][key].deliveryOverdueWorkingDays;\r\n\r\n                        await this.thresholdRepository.save(entity, Shopware.Context.api);\r\n                    }\r\n                }\r\n\r\n                this.createNotificationSuccess({\r\n                    title: this.$tc('lieferzeiten.lms.dashboard.title'),\r\n                    message: this.$tc('lieferzeiten.lms.dashboard.saveSuccess'),\r\n                });\r\n\r\n                await this.loadData();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.dashboard.title'));\r\n            } finally {\r\n                this.isSaving = false;\r\n            }\r\n        },\r\n\r\n        async loadDemoDataStatus() {\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.getDemoDataStatus();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.dashboard.demoDataTitle'));\r\n            }\r\n        },\r\n\r\n        async onToggleDemoData() {\r\n            if (!this.hasEditAccess) {\r\n                return;\r\n            }\r\n\r\n            this.isSeedingDemoData = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.toggleDemoData();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n                await this.loadData();\r\n\r\n                this.createNotificationSuccess({\r\n                    title: this.$tc('lieferzeiten.lms.dashboard.demoDataTitle'),\r\n                    message: response?.action === 'removed'\r\n                        ? this.$tc('lieferzeiten.lms.dashboard.demoDataRemoved')\r\n                        : this.$tc('lieferzeiten.lms.dashboard.demoDataSaved'),\r\n                });\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.dashboard.demoDataTitle'));\r\n            } finally {\r\n                this.isSeedingDemoData = false;\r\n            }\r\n        },\r\n    },\r\n});\r\n","<sw-page class=\"lieferzeiten-task-assignment-rule-list\">\r\n    <template #smart-bar-header>\r\n        <h2>{{ $tc('lieferzeiten.lms.navigation.taskAssignmentRules') }}</h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <sw-button v-if=\"hasEditAccess\" variant=\"primary\" @click=\"onCreate\">Create</sw-button>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card>\r\n            <sw-entity-listing\r\n                v-if=\"items\"\r\n                :items=\"items\"\r\n                :repository=\"repository\"\r\n                :columns=\"columns\"\r\n                :isLoading=\"isLoading\"\r\n                :showSelection=\"false\"\r\n                :allowInlineEdit=\"hasEditAccess\"\r\n                :allowDelete=\"hasEditAccess\"\r\n                :total=\"total\"\r\n                :page=\"page\"\r\n                :limit=\"limit\"\r\n                @page-change=\"onPageChange\"\r\n                @inline-edit-save=\"onInlineEditSave\"\r\n                @inline-edit-cancel=\"getList\"\r\n                @delete=\"onDelete\"\r\n            />\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import template from './lieferzeiten-task-assignment-rule-list.html.twig';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nComponent.register('lieferzeiten-task-assignment-rule-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory', 'acl'],\r\n\r\n    data() {\r\n        return {\r\n            repository: null,\r\n            items: null,\r\n            isLoading: false,\r\n            total: 0,\r\n            page: 1,\r\n            limit: 25,\r\n            triggerOptions: [\r\n                'versand.datum.ueberfaellig',\r\n                'liefertermin.anfrage.zusaetzlich',\r\n                'liefertermin.anfrage.geschlossen',\r\n            ],\r\n            assigneeTypeOptions: ['user', 'team'],\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        hasEditAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        columns() {\r\n            return [\r\n                { property: 'name', label: 'Name', inlineEdit: 'string', primary: true },\r\n                { property: 'status', label: 'Status', inlineEdit: 'string' },\r\n                { property: 'triggerKey', label: 'Trigger', inlineEdit: 'string' },\r\n                { property: 'ruleId', label: 'Rule (Rules Engine)', inlineEdit: 'string' },\r\n                { property: 'assigneeType', label: 'Assignee type', inlineEdit: 'string' },\r\n                { property: 'assigneeIdentifier', label: 'Assignee', inlineEdit: 'string' },\r\n                { property: 'priority', label: 'Priority', inlineEdit: 'number' },\r\n                { property: 'active', label: 'Active', inlineEdit: 'boolean' },\r\n                { property: 'lastChangedBy', label: 'Last Changed By', inlineEdit: 'string' },\r\n                { property: 'lastChangedAt', label: 'Last Changed At', inlineEdit: 'date' },\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.repository = this.repositoryFactory.create('lieferzeiten_task_assignment_rule');\r\n        this.getList();\r\n    },\r\n\r\n    methods: {\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        async getList() {\r\n            this.isLoading = true;\r\n            const criteria = new Criteria(this.page, this.limit);\r\n            criteria.addSorting(Criteria.sort('createdAt', 'DESC'));\r\n\r\n            try {\r\n                const result = await this.repository.search(criteria, Shopware.Context.api);\r\n                this.items = result;\r\n                this.total = result.total;\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.navigation.taskAssignmentRules'));\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n        onPageChange({ page, limit }) {\r\n            this.page = page;\r\n            this.limit = limit;\r\n            this.getList();\r\n        },\r\n        async onInlineEditSave(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.save(item, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.navigation.taskAssignmentRules'));\r\n            }\r\n        },\r\n        async onDelete(item) {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            this.isLoading = true;\r\n            try {\r\n                await this.repository.delete(item.id, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.navigation.taskAssignmentRules'));\r\n            }\r\n        },\r\n        async onCreate() {\r\n            if (!this.hasEditAccess) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            const entity = this.repository.create(Shopware.Context.api);\r\n            entity.name = 'New rule';\r\n            entity.triggerKey = this.triggerOptions[0];\r\n            entity.assigneeType = this.assigneeTypeOptions[0];\r\n            entity.active = false;\r\n            try {\r\n                await this.repository.save(entity, Shopware.Context.api);\r\n                await this.getList();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.navigation.taskAssignmentRules'));\r\n            }\r\n        },\r\n    },\r\n});\r\n","<sw-page class=\"lieferzeiten-notification-toggle-list\">\r\n    <template #smart-bar-header>\r\n        <h2>{{ $tc('lieferzeiten.lms.navigation.notificationToggles') }}</h2>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card :isLoading=\"isLoading\" title=\"Matrice des notifications\">\r\n            <sw-alert variant=\"info\" appearance=\"default\" :showIcon=\"true\">\r\n                Source: <code>lieferzeiten_notification_toggle</code> avec clé logique\r\n                <code>(triggerKey, channel, salesChannelId)</code>.\r\n            </sw-alert>\r\n\r\n            <sw-alert v-if=\"invalidEntries.length\" variant=\"warning\" appearance=\"default\" :showIcon=\"true\">\r\n                {{ invalidEntries.length }} entrée(s) incohérente(s) détectée(s) (triggerKey/channel/code). Elles sont verrouillées dans la matrice.\r\n            </sw-alert>\r\n\r\n            <div class=\"sw-data-grid sw-data-grid--compact\">\r\n                <table class=\"sw-data-grid__table\">\r\n                    <thead class=\"sw-data-grid__header\">\r\n                        <tr class=\"sw-data-grid__row\">\r\n                            <th class=\"sw-data-grid__cell\">Type de notification</th>\r\n                            <th\r\n                                v-for=\"scope in salesChannelColumns\"\r\n                                :key=\"scope.id\"\r\n                                class=\"sw-data-grid__cell\"\r\n                            >\r\n                                {{ scope.name }}\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody class=\"sw-data-grid__body\">\r\n                        <tr\r\n                            v-for=\"triggerKey in triggerOptions\"\r\n                            :key=\"triggerKey\"\r\n                            class=\"sw-data-grid__row\"\r\n                        >\r\n                            <td class=\"sw-data-grid__cell\"><strong>{{ triggerKey }}</strong></td>\r\n                            <td\r\n                                v-for=\"scope in salesChannelColumns\"\r\n                                :key=\"`${triggerKey}-${scope.id}`\"\r\n                                class=\"sw-data-grid__cell\"\r\n                            >\r\n                                <div\r\n                                    v-for=\"channel in channelOptions\"\r\n                                    :key=\"`${triggerKey}-${scope.id}-${channel}`\"\r\n                                    style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\"\r\n                                >\r\n                                    <span>{{ channel }}</span>\r\n                                    <sw-switch-field\r\n                                        :value=\"getToggleValue(triggerKey, channel, scope.id === 'global' ? null : scope.id)\"\r\n                                        :disabled=\"!hasEditAccess || isCellDisabled(triggerKey, channel, scope.id === 'global' ? null : scope.id)\"\r\n                                        @update:value=\"onToggleChanged(triggerKey, channel, scope.id === 'global' ? null : scope.id, $event)\"\r\n                                    />\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </sw-card>\r\n    </template>\r\n</sw-page>\r\n","import template from './lieferzeiten-notification-toggle-list.html.twig';\r\n\r\nconst { Component } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nComponent.register('lieferzeiten-notification-toggle-list', {\r\n    template,\r\n\r\n    mixins: ['notification'],\r\n\r\n    inject: ['repositoryFactory', 'acl'],\r\n\r\n    data() {\r\n        return {\r\n            repository: null,\r\n            salesChannelRepository: null,\r\n            items: [],\r\n            salesChannels: [],\r\n            isLoading: false,\r\n            triggerOptions: [\r\n                'commande.creee',\r\n                'commande.changement_statut',\r\n                'tracking.mis_a_jour',\r\n                'expedition.confirmee',\r\n                'changements.date_livraison',\r\n                'livraison.date.attribuee',\r\n                'livraison.date.modifiee',\r\n                'douane.requise',\r\n                'commande.storno',\r\n                'livraison.impossible',\r\n                'livraison.retoure',\r\n                'rappel.vorkasse',\r\n                'paiement.recu.vorkasse',\r\n                'commande.terminee.rappel_evaluation',\r\n                'versand.datum.ueberfaellig',\r\n                'liefertermin.anfrage.zusaetzlich',\r\n                'liefertermin.anfrage.geschlossen',\r\n                'liefertermin.anfrage.wiedereroeffnet',\r\n            ],\r\n            channelOptions: ['email', 'sms', 'webhook'],\r\n            invalidEntries: [],\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        hasEditAccess() {\r\n            if (typeof this.acl?.can !== 'function') {\r\n                return false;\r\n            }\r\n\r\n            return this.acl.can('lieferzeiten.editor') || this.acl.can('admin');\r\n        },\r\n\r\n        salesChannelColumns() {\r\n            return [\r\n                {\r\n                    id: 'global',\r\n                    name: 'Global',\r\n                },\r\n                ...this.salesChannels.map((salesChannel) => ({\r\n                    id: salesChannel.id,\r\n                    name: salesChannel.name || salesChannel.id,\r\n                })),\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.repository = this.repositoryFactory.create('lieferzeiten_notification_toggle');\r\n        this.salesChannelRepository = this.repositoryFactory.create('sales_channel');\r\n        this.loadData();\r\n    },\r\n\r\n    methods: {\r\n        extractErrorMessage(error) {\r\n            return error?.response?.data?.errors?.[0]?.detail\r\n                || error?.response?.data?.message\r\n                || error?.message\r\n                || this.$tc('global.default.error');\r\n        },\r\n\r\n        notifyRequestError(error, fallbackTitle) {\r\n            this.createNotificationError({\r\n                title: fallbackTitle,\r\n                message: this.extractErrorMessage(error),\r\n            });\r\n        },\r\n\r\n        async loadData() {\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                const toggleCriteria = new Criteria(1, 500);\r\n                toggleCriteria.addSorting(Criteria.sort('triggerKey', 'ASC'));\r\n                toggleCriteria.addSorting(Criteria.sort('channel', 'ASC'));\r\n                toggleCriteria.addSorting(Criteria.sort('salesChannelId', 'ASC'));\r\n\r\n                const salesChannelCriteria = new Criteria(1, 500);\r\n                salesChannelCriteria.addSorting(Criteria.sort('name', 'ASC'));\r\n\r\n                const [toggleResult, salesChannelResult] = await Promise.all([\r\n                    this.repository.search(toggleCriteria, Shopware.Context.api),\r\n                    this.salesChannelRepository.search(salesChannelCriteria, Shopware.Context.api),\r\n                ]);\r\n\r\n                this.items = [...toggleResult];\r\n                this.salesChannels = [...salesChannelResult];\r\n                this.invalidEntries = this.items.filter((item) => !this.isValidToggle(item));\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.general.mainMenuItem'));\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        getToggleEntity(triggerKey, channel, salesChannelId) {\r\n            const scopeId = salesChannelId || null;\r\n\r\n            return this.items.find((item) => item.triggerKey === triggerKey\r\n                && item.channel === channel\r\n                && (item.salesChannelId || null) === scopeId);\r\n        },\r\n\r\n        getToggleValue(triggerKey, channel, salesChannelId) {\r\n            return Boolean(this.getToggleEntity(triggerKey, channel, salesChannelId)?.enabled);\r\n        },\r\n\r\n        isValidToggle(item) {\r\n            const expectedCode = `${item.triggerKey}:${item.channel}`;\r\n\r\n            return this.triggerOptions.includes(item.triggerKey)\r\n                && this.channelOptions.includes(item.channel)\r\n                && item.code === expectedCode;\r\n        },\r\n\r\n        isCellDisabled(triggerKey, channel, salesChannelId) {\r\n            const existingEntity = this.getToggleEntity(triggerKey, channel, salesChannelId);\r\n\r\n            if (!existingEntity) {\r\n                return false;\r\n            }\r\n\r\n            return !this.isValidToggle(existingEntity);\r\n        },\r\n\r\n        async onToggleChanged(triggerKey, channel, salesChannelId, enabled) {\r\n            if (!this.hasEditAccess) {\r\n                return;\r\n            }\r\n\r\n            if (!this.triggerOptions.includes(triggerKey)) {\r\n                this.createNotificationError({\r\n                    title: 'Validation',\r\n                    message: `Trigger invalide: ${triggerKey}`,\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            if (!this.channelOptions.includes(channel)) {\r\n                this.createNotificationError({\r\n                    title: 'Validation',\r\n                    message: `Canal invalide: ${channel}`,\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            const normalizedSalesChannelId = salesChannelId || null;\r\n            let entity = this.getToggleEntity(triggerKey, channel, normalizedSalesChannelId);\r\n\r\n            if (entity && !this.isValidToggle(entity)) {\r\n                this.createNotificationError({\r\n                    title: 'Validation',\r\n                    message: 'Impossible de modifier une entrée incohérente. Corrigez triggerKey/channel/code via API ou supprimez-la.',\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            if (!entity) {\r\n                entity = this.repository.create(Shopware.Context.api);\r\n                entity.triggerKey = triggerKey;\r\n                entity.channel = channel;\r\n                entity.salesChannelId = normalizedSalesChannelId;\r\n            }\r\n\r\n            entity.code = `${triggerKey}:${channel}`;\r\n            entity.enabled = Boolean(enabled);\r\n\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                await this.repository.save(entity, Shopware.Context.api);\r\n                await this.loadData();\r\n            } catch (error) {\r\n                this.notifyRequestError(error, this.$tc('lieferzeiten.lms.general.mainMenuItem'));\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n    },\r\n});\r\n","import './page/lieferzeiten-channel-settings-list';\r\nimport './page/lieferzeiten-task-assignment-rule-list';\r\nimport './page/lieferzeiten-notification-toggle-list';\r\n\r\nconst { Module } = Shopware;\r\n\r\nModule.register('lieferzeiten-settings', {\r\n    type: 'plugin',\r\n    name: 'lieferzeiten-settings',\r\n    title: 'lieferzeiten.lms.general.mainMenuItem',\r\n    description: 'lieferzeiten.lms.general.description',\r\n    color: '#009ee3',\r\n    icon: 'regular-cog',\r\n\r\n    routes: {\r\n        index: {\r\n            component: 'lieferzeiten-channel-settings-list',\r\n            path: '',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n        channelSettings: {\r\n            component: 'lieferzeiten-channel-settings-list',\r\n            path: 'channel-settings',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n        taskAssignmentRules: {\r\n            component: 'lieferzeiten-task-assignment-rule-list',\r\n            path: 'task-assignment-rules',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n        notificationToggles: {\r\n            component: 'lieferzeiten-notification-toggle-list',\r\n            path: 'notification-toggles',\r\n            meta: {\r\n                privilege: 'admin',\r\n            },\r\n        },\r\n    },\r\n\r\n    navigation: [\r\n        {\r\n            id: 'lieferzeiten-settings',\r\n            label: 'lieferzeiten.lms.general.mainMenuItem',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.index',\r\n            icon: 'regular-cog',\r\n            parent: 'sw-order',\r\n            position: 90,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-channel',\r\n            label: 'lieferzeiten.lms.navigation.thresholdsByChannel',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.index',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 10,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-task',\r\n            label: 'lieferzeiten.lms.navigation.taskAssignmentRules',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.taskAssignmentRules',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 20,\r\n        },\r\n        {\r\n            id: 'lieferzeiten-settings-notifications',\r\n            label: 'lieferzeiten.lms.navigation.notificationToggles',\r\n            color: '#009ee3',\r\n            path: 'lieferzeiten.settings.notificationToggles',\r\n            parent: 'lieferzeiten-settings',\r\n            position: 30,\r\n        },\r\n    ],\r\n});\r\n","/* eslint-disable */\r\nimport deSnippets from '../module/lieferzeiten/snippet/de-DE.json';\r\nimport enSnippets from '../module/lieferzeiten/snippet/en-GB.json';\r\n\r\nShopware.Locale.extend('de-DE', deSnippets);\r\nShopware.Locale.extend('en-GB', enSnippets);\r\n","const { ApiService } = Shopware.Classes;\r\n\r\nclass LieferzeitenTrackingService extends ApiService {\r\n    constructor(httpClient, loginService, apiEndpoint = 'lieferzeiten') {\r\n        super(httpClient, loginService, apiEndpoint);\r\n        this.name = 'lieferzeitenTrackingService';\r\n    }\r\n\r\n    async history(carrier, trackingNumber) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/tracking/${encodeURIComponent(carrier)}/${encodeURIComponent(trackingNumber)}`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        const data = ApiService.handleResponse(response) ?? response?.data;\r\n        return data?.data ?? data;\r\n    }\r\n}\r\n\r\nShopware.Application.addServiceProvider('lieferzeitenTrackingService', (container) => {\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient ?? container.httpClient;\r\n    const loginService = container.loginService ?? Shopware.Service('loginService');\r\n\r\n    return new LieferzeitenTrackingService(httpClient, loginService);\r\n});\r\n","const { ApiService } = Shopware.Classes;\r\n\r\nclass LieferzeitenOrdersService extends ApiService {\r\n    constructor(httpClient, loginService) {\r\n        super(httpClient, loginService, 'lieferzeiten');\r\n        this.name = 'lieferzeitenOrdersService';\r\n    }\r\n\r\n    async getOrders(params = {}) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/orders`, {\r\n            params,\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        const data = ApiService.handleResponse(response) ?? response?.data;\r\n        const rows = data?.data ?? data ?? [];\r\n\r\n        if (!Array.isArray(rows)) {\r\n            return [];\r\n        }\r\n\r\n        return rows.map((row) => this.normalizeOrderRow(row));\r\n    }\r\n\r\n    async getOrderDetails(paketId) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/orders/${encodeURIComponent(paketId)}/details`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        const data = ApiService.handleResponse(response) ?? response?.data ?? {};\r\n\r\n        const details = data?.data || data;\r\n\r\n        return this.normalizeOrderDetails(details);\r\n    }\r\n\r\n    normalizeOrderRow(row = {}) {\r\n        return {\r\n            ...row,\r\n            orderNumber: row.orderNumber || null,\r\n            san6OrderNumber: row.san6OrderNumber || null,\r\n            san6Position: row.san6Position || null,\r\n            quantity: row.quantity || null,\r\n            paymentMethod: row.paymentMethod || null,\r\n            paymentDate: row.paymentDate || null,\r\n            trackingSummary: row.trackingSummary || null,\r\n            shippingAssignmentType: row.shippingAssignmentType || null,\r\n            sourceSystem: row.sourceSystem || null,\r\n            domain: row.domain || null,\r\n            positions: Array.isArray(row.positions) ? row.positions : [],\r\n            parcels: Array.isArray(row.parcels) ? row.parcels : [],\r\n            lieferterminLieferantHistory: Array.isArray(row.lieferterminLieferantHistory) ? row.lieferterminLieferantHistory : [],\r\n            neuerLieferterminHistory: Array.isArray(row.neuerLieferterminHistory) ? row.neuerLieferterminHistory : [],\r\n            commentHistory: Array.isArray(row.commentHistory) ? row.commentHistory : [],\r\n        };\r\n    }\r\n\r\n    normalizeOrderDetails(details) {\r\n        if (!details || typeof details !== 'object') {\r\n            return details;\r\n        }\r\n\r\n        return this.normalizeOrderRow(details);\r\n    }\r\n\r\n    async getStatistics(params = {}) {\r\n        try {\r\n            const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/v1/statistics`, {\r\n                params,\r\n                headers: this.getBasicHeaders(),\r\n            });\r\n\r\n            return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n        } catch (error) {\r\n            const statusCode = error?.response?.status;\r\n            if (statusCode !== 404) {\r\n                throw error;\r\n            }\r\n\r\n            const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/statistics`, {\r\n                params,\r\n                headers: this.getBasicHeaders(),\r\n            });\r\n\r\n            return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async getDemoDataStatus() {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/demo-data/status`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async toggleDemoData() {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/demo-data/toggle`, {}, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async seedDemoData(reset = false) {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/demo-data`, { reset }, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async getSalesChannelLieferzeiten(salesChannelId) {\r\n        const response = await this.httpClient.get(`_action/${this.getApiBasePath()}/sales-channel/${encodeURIComponent(salesChannelId)}/lieferzeiten`, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data ?? {};\r\n    }\r\n\r\n    async updateLieferterminLieferant(positionId, payload) {\r\n        return this.post(`position/${positionId}/liefertermin-lieferant`, payload);\r\n    }\r\n\r\n    async updateNeuerLiefertermin(positionId, payload) {\r\n        return this.post(`position/${positionId}/neuer-liefertermin`, payload);\r\n    }\r\n\r\n    async updateNeuerLieferterminByPaket(paketId, payload) {\r\n        return this.post(`paket/${paketId}/neuer-liefertermin`, payload);\r\n    }\r\n\r\n    async updateComment(positionId, payload) {\r\n        if (!positionId) {\r\n            throw new Error('Missing position id');\r\n        }\r\n\r\n        return this.post(`position/${positionId}/comment`, payload);\r\n    }\r\n\r\n    async createAdditionalDeliveryRequest(positionId, initiator = null) {\r\n        const payload = {};\r\n\r\n        if (typeof initiator === 'string' && initiator.trim() !== '') {\r\n            payload.initiator = initiator.trim();\r\n        }\r\n\r\n        return this.post(`position/${positionId}/additional-delivery-request`, payload);\r\n    }\r\n\r\n    async updatePaketStatus(paketId, payload) {\r\n        return this.post(`paket/${paketId}/status`, payload);\r\n    }\r\n\r\n    async post(path, payload) {\r\n        const response = await this.httpClient.post(`_action/${this.getApiBasePath()}/${path}`, payload, {\r\n            headers: this.getBasicHeaders(),\r\n        });\r\n\r\n        return ApiService.handleResponse(response) ?? response?.data;\r\n    }\r\n}\r\n\r\nShopware.Application.addServiceProvider('lieferzeitenOrdersService', (container) => {\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient ?? container.httpClient;\r\n    const loginService = container.loginService ?? Shopware.Service('loginService');\r\n\r\n    return new LieferzeitenOrdersService(httpClient, loginService);\r\n});\r\n","const INTERCEPTOR_FLAG = '__lieferzeitenStoreApiFallbackInterceptorInstalled';\r\nconst STORE_UPDATES_PATH = '/api/_action/store/updates';\r\nconst EXTENSION_INSTALLED_PATH = '/api/_action/extension/installed';\r\n\r\nfunction isKnownStoreEndpoint(url = '') {\r\n    return url.includes(STORE_UPDATES_PATH) || url.includes(EXTENSION_INSTALLED_PATH);\r\n}\r\n\r\nfunction createFallbackResponse(error) {\r\n    const config = error?.config || {};\r\n    const url = String(config.url || '');\r\n\r\n    if (url.includes(STORE_UPDATES_PATH)) {\r\n        return {\r\n            data: {\r\n                total: 0,\r\n                updates: [],\r\n                items: [],\r\n            },\r\n            status: 200,\r\n            statusText: 'OK',\r\n            headers: {},\r\n            config,\r\n        };\r\n    }\r\n\r\n    return {\r\n        data: {\r\n            data: [],\r\n            total: 0,\r\n        },\r\n        status: 200,\r\n        statusText: 'OK',\r\n        headers: {},\r\n        config,\r\n    };\r\n}\r\n\r\nfunction installStoreApiFallbackInterceptor() {\r\n    if (window[INTERCEPTOR_FLAG]) {\r\n        return;\r\n    }\r\n\r\n    const initContainer = Shopware.Application.getContainer('init');\r\n    const httpClient = initContainer?.httpClient;\r\n\r\n    if (!httpClient?.interceptors?.response) {\r\n        return;\r\n    }\r\n\r\n    httpClient.interceptors.response.use(\r\n        (response) => response,\r\n        (error) => {\r\n            const status = error?.response?.status;\r\n            const url = String(error?.config?.url || '');\r\n\r\n            if (status === 500 && isKnownStoreEndpoint(url)) {\r\n                // eslint-disable-next-line no-console\r\n                console.warn('[LieferzeitenAdmin] Store API unavailable, using empty fallback response for:', url);\r\n                return Promise.resolve(createFallbackResponse(error));\r\n            }\r\n\r\n            return Promise.reject(error);\r\n        },\r\n    );\r\n\r\n    window[INTERCEPTOR_FLAG] = true;\r\n}\r\n\r\ninstallStoreApiFallbackInterceptor();\r\n","const { Component, Mixin } = Shopware;\r\n\r\nComponent.register('lieferzeiten-demo-data-button', {\r\n    template: `\r\n        <div class=\"lieferzeiten-demo-data-button\">\r\n            <label class=\"sw-field__label\" v-if=\"label\">{{ label }}</label>\r\n            <sw-button\r\n                variant=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"isLoading\"\r\n                @click=\"onToggleDemoData\"\r\n            >\r\n                {{ buttonLabel }}\r\n            </sw-button>\r\n            <div v-if=\"helpText\" class=\"sw-field__help-text\">\r\n                {{ helpText }}\r\n            </div>\r\n        </div>\r\n    `,\r\n\r\n    inject: ['lieferzeitenOrdersService'],\r\n\r\n    mixins: [\r\n        Mixin.getByName('notification'),\r\n    ],\r\n\r\n    props: {\r\n        element: {\r\n            type: Object,\r\n            required: false,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            isLoading: false,\r\n            hasDemoData: false,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        label() {\r\n            return this.element?.label ?? '';\r\n        },\r\n        helpText() {\r\n            return this.element?.helpText ?? '';\r\n        },\r\n        buttonLabel() {\r\n            return this.hasDemoData ? 'Demo-Daten entfernen' : 'Demo-Daten speichern';\r\n        },\r\n    },\r\n\r\n    async created() {\r\n        await this.loadStatus();\r\n    },\r\n\r\n    methods: {\r\n        async loadStatus() {\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.getDemoDataStatus();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: 'Demo-Daten Status',\r\n                    message: error?.message || 'Status konnte nicht geladen werden.',\r\n                });\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n\r\n        async onToggleDemoData() {\r\n            if (this.isLoading) {\r\n                return;\r\n            }\r\n\r\n            this.isLoading = true;\r\n\r\n            try {\r\n                const response = await this.lieferzeitenOrdersService.toggleDemoData();\r\n                this.hasDemoData = Boolean(response?.hasDemoData);\r\n\r\n                if (response?.action === 'removed') {\r\n                    const removed = response?.deleted || {};\r\n                    const totalRemoved = Object.values(removed).reduce((sum, value) => sum + Number(value || 0), 0);\r\n\r\n                    this.createNotificationSuccess({\r\n                        title: 'Demo-Daten entfernt',\r\n                        message: totalRemoved > 0\r\n                            ? `${totalRemoved} Demo-Datensätze wurden entfernt.`\r\n                            : 'Keine Demo-Daten waren vorhanden.',\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                const created = response?.created || {};\r\n                const totalCreated = Object.values(created).reduce((sum, value) => sum + Number(value || 0), 0);\r\n\r\n                this.createNotificationSuccess({\r\n                    title: 'Demo-Daten gespeichert',\r\n                    message: totalCreated > 0\r\n                        ? `${totalCreated} Demo-Datensätze wurden gespeichert.`\r\n                        : 'Keine neuen Demo-Datensätze wurden gespeichert.',\r\n                });\r\n            } catch (error) {\r\n                this.createNotificationError({\r\n                    title: 'Demo-Daten',\r\n                    message: error?.response?.data?.message || error?.message || 'Aktion konnte nicht ausgeführt werden.',\r\n                });\r\n            } finally {\r\n                this.isLoading = false;\r\n            }\r\n        },\r\n    },\r\n});\r\n"],"names":["template$8","DOMAIN_GROUPS","DEFAULT_DOMAIN_KEY","DEFAULT_GROUP_ID","DOMAIN_SOURCE_MAPPING","LEGACY_DOMAIN_KEY_MAPPING","LEGACY_GROUP_KEY_MAPPING","getChannelsForGroup","groupId","_a","group","getDefaultDomainForGroup","normalizeGroupKey","normalized","resolveGroupKeyForDomain","domain","normalizedDomain","normalizeDomainKey","channel","resolveDomainKeyForSourceSystem","sourceSystem","normalizedSource","mappedDomain","sources","DOMAIN_SOURCE_MAP","DOMAIN_LABEL_ALIASES","template","domainKey","order","_b","_c","payload","orderDomain","aliasMatch","normalizedOrderDomain","source","result","orders","error","params","key","value","normalizedValue","template$7","template$6","template$5","toNumber","parsed","toTimelineDate","point","toTimelineValue","toIsoDate","dateString","date","matchesFilter","selectedChannel","selectedDomain","normalizeTimelinePoints","timeline","groupedPoints","accumulator","timelineDate","isoDate","left","right","TASK_CLOSABLE_STATUSES","TASK_REOPENABLE_STATUSES","item","activity","width","height","maxValue","step","linePath","index","x","y","areaPath","actions","eventType","hasOrderReference","normalizedStatus","isClosable","isReopenable","operation","isActionAvailable","loadingKey","trackingNumber","action","headers","rows","csv","line","blob","link","template$4","STORAGE_DOMAIN_KEY","STORAGE_GROUP_KEY","newValue","fallbackGroup","localGroup","localDomain","sessionGroup","sessionDomain","propDomain","emit","persist","resolvedGroup","resolvedDomain","targetStorage","secondaryStorage","template$3","BUSINESS_STATUS_SNIPPETS","INTERNAL_SHIPPING_LABEL","status","code","snippet","businessStatus","labelKey","parcel","supplierRange","newRange","positions","position","parcelNewRange","commentTargetPositionId","rawComment","firstOpenPosition","currentTargetPositionId","validPositionId","fallbackRange","from","to","fieldPrefix","fallbackMaxDays","fallbackDays","days","fromDate","toDate","orderId","id","details","mergedOrder","editable","existing","parcels","values","total","acc","raw","numeric","primaryParts","additionalParts","nameParts","keys","candidate","rawStatus","entry","actor","changedAt","carrier","packageEntries","pkg","number","entries","candidates","response","changedBy","statusCode","statusLabel","snippetKey","fallbackLabel","translatedLabel","resolvedLabel","nextStatus","currentStatus","paketId","shippingType","orderedQuantity","shippedQuantity","range","minDays","maxDays","originalRange","target","refresh","data","dateValue","base","dayNum","yearStart","positionId","initiator","targetStatus","request","_d","_e","_f","_g","_h","contextUser","sessionUser","user","userId","readableName","part","Module","template$2","LMS_TARGET_CHANNELS","TECHNICAL_IDENTIFIER_TO_DOMAIN_KEY","config","identifier","normalizeIdentifier","normalizeDomainFromUrl","url","parsedUrl","resolveLmsTargetChannelKey","domainMatch","isLmsTargetChannel","Component","Criteria","PDMS_SLOTS","LMS_TARGET_DOMAIN_KEYS","targetChannel","CHANNEL_GROUP_TITLES","CHANNEL_GROUPS","groupTitle","sourceGroup","channelDomainKey","OTHER_CHANNELS_GROUP","groupedEntries","channelsWithoutMapping","matchingGroup","visibleGroups","salesChannels","lmsTargetDomainKey","domainFromChannelDomain","fallbackTitle","channelId","slot","entriesBySlot","pdmsKey","fieldName","normalizedEntries","rawValue","trimmed","fieldKey","thresholdCriteria","salesChannelCriteria","thresholds","loadedChannelIds","whitelistedChannelIds","entity","template$1","criteria","page","limit","salesChannel","toggleCriteria","toggleResult","salesChannelResult","triggerKey","salesChannelId","scopeId","expectedCode","existingEntity","enabled","normalizedSalesChannelId","deSnippets","enSnippets","ApiService","LieferzeitenTrackingService","httpClient","loginService","apiEndpoint","container","initContainer","LieferzeitenOrdersService","row","reset","path","INTERCEPTOR_FLAG","STORE_UPDATES_PATH","EXTENSION_INSTALLED_PATH","isKnownStoreEndpoint","createFallbackResponse","installStoreApiFallbackInterceptor","Mixin","removed","totalRemoved","sum","created","totalCreated"],"mappings":"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"}